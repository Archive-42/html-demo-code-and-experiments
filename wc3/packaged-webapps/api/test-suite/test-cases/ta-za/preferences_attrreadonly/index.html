<!DOCTYPE html>
<title>Test preferences_attrreadonly</title>
<style>body{ background:red } </style>
<body onload="test()" id="body">
<h1 id="verdict">FAIL</h1>
<p id="reason">Test did not run.</p>
<script>
/*Called iff the test passed */
function pass(excuse){
	body.style.backgroundColor = "green";
	verdict.innerHTML = "PASS";
	reason.innerHTML  = "Test "+id+" passed because "+excuse;
}
/*Called iff the test failed */
function fail(excuse){
	body.style.backgroundColor = "red";
	verdict.innerHTML = "FAIL";
	reason.innerHTML  = "Test "+id+" failed because "+excuse;
}
/*Called to perform the test */
function test(){
    /* Description: widget.preferences is read-only */
    // attrreadonly
    
    try {
        var obj = window.widget;
    var propValue = obj.preferences;
    try {
        obj.preferences = "newVal";
    } catch (e) {}
    
    if (obj.preferences === "newVal" || obj.preferences !== propValue) {
        return fail("preferences in window.widget is not read-only");
    }
    else pass("preferences in window.widget is read-only");
} catch (e) {
        fail("it threw the exception: "+e);
    }

}
var id 	  = "preferences_attrreadonly";
var reason  = document.getElementById("reason");
var body    = document.getElementById("body");
var verdict = document.getElementById("verdict");
</script>