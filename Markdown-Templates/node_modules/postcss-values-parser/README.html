<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="postcss-values-parser-build-status">postcss-values-parser <a href="https://travis-ci.org/shellscape/postcss-values-parser"><img src="https://travis-ci.org/shellscape/postcss-values-parser.svg?branch=master" alt="Build Status" /></a></h1>
<p><img align="right" width="95" height="95"
     title="Philosopher’s stone, logo of PostCSS"
     src="http://postcss.github.io/postcss/logo.svg"></p>
<p>A CSS property value parser for use with <a href="https://github.com/postcss/postcss">PostCSS</a>, following the same node, container, and traversal patterns as PostCSS.</p>
<h2 id="section"> </h2>
<p align="center">
<b>:rocket:   Are you ready to tackle ES6 and hone your JavaScript Skills?</b>   :rocket:<br/> Check out these outstanding <a href="https://es6.io/">ES6 courses</a> by <a href="https://github.com/wesbos"><span class="citation" data-cites="wesbos">@wesbos</span></a>
</p>
<hr />
<p>As with PostCSS and postcss-selector-parser, this parser generates an <a href="https://en.wikipedia.org/wiki/Abstract_syntax_tree">Abstract Syntax Tree</a>, (aka “AST”) which allows for ease of traversal and granular inspection of each part of a property’s value.</p>
<h2 id="postcss-values-parser-vs.-postcss-value-parser">postcss-values-parser vs. postcss-value-parser</h2>
<p>Yeah, it’s a tad confusing. The <a href="https://github.com/lesshint/lesshint">Lesshint</a> project needed a parser that would allow detailed inspection of property values to the same degree that PostCSS and <a href="https://github.com/postcss/postcss-selector-parser">postcss-selector-parser</a> provided. This was especailly important for the Lesshint project, as it provides for very granular rules for linting LESS.</p>
<p><a href="https://github.com/TrySound/postcss-value-parser">postcss-value-parser</a> makes a lot of assumption about how values should be parsed and how the resulting AST should be organized. It was also fairly out of sync with the tokenzing and traversal patterns and convenience methods found in PostCSS and postcss-selector-parser.</p>
<p>So we needed an alternative, and drew upon all three projects to put together a value parser that met and exceeded our needs. The improvements include:</p>
<ul>
<li>Written using ES6</li>
<li>Uses the same Gulp toolchain as PostCSS</li>
<li>Doesn’t strip characters; eg. parenthesis</li>
<li>Full AST traversal</li>
<li>AST traversal based on node type</li>
<li>Simple methods to derive strings from the parsed result</li>
<li>Follows PostCSS patterns for whitespace between Nodes</li>
<li>Provides convenience properties for number units, colors, etc.</li>
</ul>
<h2 id="usage">Usage</h2>
<p>Please see the <a href="API.md">API Documentation</a> for full usage information.</p>
<p>As with any NPM module, start with the install:</p>
<pre><code>npm install postcss-values-parser</code></pre>
<p>Using this parser is straightforward and doesn’t require callbacks:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">const</span> parser <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;postcss-values-parser&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="kw">const</span> ast <span class="op">=</span> <span class="at">parser</span>(<span class="st">&#39;#fff&#39;</span>).<span class="at">parse</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb2-3" title="3"></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="kw">let</span> color <span class="op">=</span> ast       <span class="co">// the Root node</span></a>
<a class="sourceLine" id="cb2-5" title="5">              .<span class="at">first</span>  <span class="co">// the Value node</span></a>
<a class="sourceLine" id="cb2-6" title="6">              .<span class="at">first</span><span class="op">;</span> <span class="co">// a Word node, containing the color value.</span></a></code></pre></div>
<h2 id="loose-mode">Loose Mode</h2>
<p>Loose mode was introduced to support adherence to the W3C CSS Specification as well as the ability to parse noncompliant CSS for variants like LESS, SCSS, and CSSNext. If you’re working with a noncompliant or CSS-like variant, then loose mode is for you.</p>
<p>For example, the parser will throw an error by default if <code>calc</code> parameters <a href="https://www.w3.org/TR/css-values/#calc-syntax">don’t adhere to the spec</a>. However, with loose mode enabled, the parse will ignore spec rules and succeed.</p>
<p>In-draft features, or CSS features in modules not yet finalized, often cause parser errors. eg. <code>url(var(--somevar))</code>. Loose mode supports parsing of these features.</p>
<p>Loose Mode is enabled by passing an option of <code>loose: true</code> to the <code>parser</code> method.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">const</span> less <span class="op">=</span> <span class="st">&#39;calc(2+2)&#39;</span><span class="op">;</span> <span class="co">// not valid per spec, but valid in LESS</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="kw">const</span> cssnext <span class="op">=</span> <span class="st">&#39;url(var(--somevar))&#39;</span><span class="op">;</span> <span class="co">// not valid per spec, but in spec draft</span></a>
<a class="sourceLine" id="cb3-3" title="3"></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="kw">const</span> parser <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;postcss-values-parser&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="kw">const</span> ast <span class="op">=</span> <span class="at">parser</span>(less<span class="op">,</span> <span class="op">{</span> <span class="dt">loose</span><span class="op">:</span> <span class="kw">true</span> <span class="op">}</span>).<span class="at">parse</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb3-6" title="6"></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="co">// parse will succeed</span></a></code></pre></div>
<h2 id="acknowledgements">Acknowledgements</h2>
<p>This project was heavily influenced by <a href="https://github.com/postcss/postcss-selector-parser">postcss-selector-parser</a> and utilized many patterns and logical constructs from the project.</p>
<p>Tests and some tokenizing techniques found in <a href="https://github.com/TrySound/postcss-value-parser">postcss-value-parser</a> were used.</p>
<h2 id="contributing">Contributing</h2>
<ul>
<li><code>git fork/clone</code></li>
<li><code>npm i</code></li>
<li>Before PR’ing, make sure <code>npm test</code> still pass. Add test if you’re adding features.</li>
</ul>
<p>When you tweak <a href="API.md">API.md</a>, please run <code>npm run toc</code> before PR’ing.</p>
</body>
</html>
