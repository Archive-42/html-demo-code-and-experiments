<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>readme</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="unifiedlogosite"><a href="https://unifiedjs.com"><img src="https://raw.githubusercontent.com/unifiedjs/unified/93862e5/logo.svg?sanitize=true" alt="unified" /></a></h1>
<p><a href="https://github.com/unifiedjs/unified/actions"><img src="https://github.com/unifiedjs/unified/workflows/main/badge.svg" alt="Build" /></a> <a href="https://codecov.io/github/unifiedjs/unified"><img src="https://img.shields.io/codecov/c/github/unifiedjs/unified.svg" alt="Coverage" /></a> <a href="https://www.npmjs.com/package/unified"><img src="https://img.shields.io/npm/dm/unified.svg" alt="Downloads" /></a> <a href="https://bundlephobia.com/result?p=unified"><img src="https://img.shields.io/bundlephobia/minzip/unified.svg" alt="Size" /></a> <a href="https://opencollective.com/unified"><img src="https://opencollective.com/unified/sponsors/badge.svg" alt="Sponsors" /></a> <a href="https://opencollective.com/unified"><img src="https://opencollective.com/unified/backers/badge.svg" alt="Backers" /></a> <a href="https://github.com/unifiedjs/unified/discussions"><img src="https://img.shields.io/badge/chat-discussions-success.svg" alt="Chat" /></a></p>
<p><strong>unified</strong> is an interface for processing text using syntax trees. It’s what powers <a href="https://github.com/remarkjs/remark"><strong>remark</strong></a> (Markdown), <a href="https://github.com/retextjs/retext"><strong>retext</strong></a> (natural language), and <a href="https://github.com/rehypejs/rehype"><strong>rehype</strong></a> (HTML), and allows for processing between formats.</p>
<h2 id="intro">Intro</h2>
<p><strong>unified</strong> enables new exciting projects like <a href="https://www.gatsbyjs.org">Gatsby</a> to pull in Markdown, <a href="https://mdxjs.com">MDX</a> to embed <a href="https://reactjs.org/docs/jsx-in-depth.html">JSX</a>, and <a href="https://prettier.io">Prettier</a> to format it. It’s used in about 500k projects on GitHub and has about 25m downloads each month on npm: you’re probably using it. Some notable users are <a href="https://nodejs.org">Node.js</a>, <a href="https://vercel.com">Vercel</a>, <a href="https://www.netlify.com">Netlify</a>, <a href="https://github.com">GitHub</a>, <a href="https://www.mozilla.org">Mozilla</a>, <a href="https://wordpress.com">WordPress</a>, <a href="https://www.adobe.com">Adobe</a>, <a href="https://www.facebook.com">Facebook</a>, <a href="https://www.google.com">Google</a>, and many more.</p>
<ul>
<li>To read about what we are up to, follow us <a href="https://twitter.com/unifiedjs">Twitter</a></li>
<li>For a less technical and more practical introduction to unified, visit <a href="https://unifiedjs.com"><code>unifiedjs.com</code></a> and peruse its <a href="https://unifiedjs.com/learn/">Learn</a> section</li>
<li>Browse <a href="https://github.com/unifiedjs/awesome-unified">awesome unified</a> to find out more about the ecosystem</li>
<li>Questions? Get help on <a href="https://github.com/unifiedjs/unified/discussions">Discussions</a>!</li>
<li>Check out <a href="#contribute">Contribute</a> below to find out how to help out, or become a backer or sponsor on <a href="https://opencollective.com/unified">OpenCollective</a></li>
</ul>
<h2 id="sponsors">Sponsors</h2>
<p>Support this effort and give back by sponsoring on <a href="https://opencollective.com/unified">OpenCollective</a>!</p>
<!--lint ignore no-html-->
<table>
<tr valign="middle">
<td width="20%" align="center" colspan="2">
<a href="https://www.gatsbyjs.org">Gatsby</a> 🥇<br><br> <a href="https://www.gatsbyjs.org"><img src="https://avatars1.githubusercontent.com/u/12551863?s=256&v=4" width="128"></a>
</td>
<td width="20%" align="center" colspan="2">
<a href="https://vercel.com">Vercel</a> 🥇<br><br> <a href="https://vercel.com"><img src="https://avatars1.githubusercontent.com/u/14985020?s=256&v=4" width="128"></a>
</td>
<td width="20%" align="center" colspan="2">
<a href="https://www.netlify.com">Netlify</a><br><br> <!--OC has a sharper image--> <a href="https://www.netlify.com"><img src="https://images.opencollective.com/netlify/4087de2/logo/256.png" width="128"></a>
</td>
<td width="10%" align="center">
<a href="https://www.holloway.com">Holloway</a><br><br> <a href="https://www.holloway.com"><img src="https://avatars1.githubusercontent.com/u/35904294?s=128&v=4" width="64"></a>
</td>
<td width="10%" align="center">
<a href="https://themeisle.com">ThemeIsle</a><br><br> <a href="https://themeisle.com"><img src="https://avatars1.githubusercontent.com/u/58979018?s=128&v=4" width="64"></a>
</td>
<td width="10%" align="center">
<a href="https://boosthub.io">Boost Hub</a><br><br> <a href="https://boosthub.io"><img src="https://images.opencollective.com/boosthub/6318083/logo/128.png" width="64"></a>
</td>
<td width="10%" align="center">
<a href="https://expo.io">Expo</a><br><br> <a href="https://expo.io"><img src="https://avatars1.githubusercontent.com/u/12504344?s=128&v=4" width="64"></a>
</td>
</tr>
<tr valign="middle">
<td width="100%" align="center" colspan="10">
<br> <a href="https://opencollective.com/unified"><strong>You?</strong></a> <br><br>
</td>
</tr>
</table>
<h2 id="install">Install</h2>
<p><a href="https://docs.npmjs.com/cli/install">npm</a>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="ex">npm</span> install unified</a></code></pre></div>
<p>This package comes with types. If you’re using TypeScript, make sure to also install <a href="https://www.npmjs.com/package/@types/unist"><code>@types/unist</code></a>.</p>
<h2 id="use">Use</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">var</span> unified <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;unified&#39;</span>)</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="kw">var</span> markdown <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-parse&#39;</span>)</a>
<a class="sourceLine" id="cb2-3" title="3"><span class="kw">var</span> remark2rehype <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-rehype&#39;</span>)</a>
<a class="sourceLine" id="cb2-4" title="4"><span class="kw">var</span> doc <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-document&#39;</span>)</a>
<a class="sourceLine" id="cb2-5" title="5"><span class="kw">var</span> format <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-format&#39;</span>)</a>
<a class="sourceLine" id="cb2-6" title="6"><span class="kw">var</span> html <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-stringify&#39;</span>)</a>
<a class="sourceLine" id="cb2-7" title="7"><span class="kw">var</span> report <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;vfile-reporter&#39;</span>)</a>
<a class="sourceLine" id="cb2-8" title="8"></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="at">unified</span>()</a>
<a class="sourceLine" id="cb2-10" title="10">  .<span class="at">use</span>(markdown)</a>
<a class="sourceLine" id="cb2-11" title="11">  .<span class="at">use</span>(remark2rehype)</a>
<a class="sourceLine" id="cb2-12" title="12">  .<span class="at">use</span>(doc<span class="op">,</span> <span class="op">{</span><span class="dt">title</span><span class="op">:</span> <span class="st">&#39;👋🌍&#39;</span><span class="op">}</span>)</a>
<a class="sourceLine" id="cb2-13" title="13">  .<span class="at">use</span>(format)</a>
<a class="sourceLine" id="cb2-14" title="14">  .<span class="at">use</span>(html)</a>
<a class="sourceLine" id="cb2-15" title="15">  .<span class="at">process</span>(<span class="st">&#39;# Hello world!&#39;</span><span class="op">,</span> <span class="kw">function</span> (err<span class="op">,</span> file) <span class="op">{</span></a>
<a class="sourceLine" id="cb2-16" title="16">    <span class="va">console</span>.<span class="at">error</span>(<span class="at">report</span>(err <span class="op">||</span> file))</a>
<a class="sourceLine" id="cb2-17" title="17">    <span class="va">console</span>.<span class="at">log</span>(<span class="at">String</span>(file))</a>
<a class="sourceLine" id="cb2-18" title="18">  <span class="op">}</span>)</a></code></pre></div>
<p>Yields:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode txt"><code class="sourceCode default"><a class="sourceLine" id="cb3-1" title="1">no issues found</a></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb4-1" title="1"><span class="dt">&lt;!doctype </span>html<span class="dt">&gt;</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="kw">&lt;html</span><span class="ot"> lang=</span><span class="st">&quot;en&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb4-3" title="3">  <span class="kw">&lt;head&gt;</span></a>
<a class="sourceLine" id="cb4-4" title="4">    <span class="kw">&lt;meta</span><span class="ot"> charset=</span><span class="st">&quot;utf-8&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb4-5" title="5">    <span class="kw">&lt;title&gt;</span>👋🌍<span class="kw">&lt;/title&gt;</span></a>
<a class="sourceLine" id="cb4-6" title="6">    <span class="kw">&lt;meta</span><span class="ot"> name=</span><span class="st">&quot;viewport&quot;</span><span class="ot"> content=</span><span class="st">&quot;width=device-width, initial-scale=1&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb4-7" title="7">  <span class="kw">&lt;/head&gt;</span></a>
<a class="sourceLine" id="cb4-8" title="8">  <span class="kw">&lt;body&gt;</span></a>
<a class="sourceLine" id="cb4-9" title="9">    <span class="kw">&lt;h1&gt;</span>Hello world!<span class="kw">&lt;/h1&gt;</span></a>
<a class="sourceLine" id="cb4-10" title="10">  <span class="kw">&lt;/body&gt;</span></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="kw">&lt;/html&gt;</span></a></code></pre></div>
<h2 id="contents">Contents</h2>
<ul>
<li><a href="#description">Description</a></li>
<li><a href="#api">API</a>
<ul>
<li><a href="#processor"><code>processor()</code></a></li>
<li><a href="#processoruseplugin-options"><code>processor.use(plugin[, options])</code></a></li>
<li><a href="#processorparsefile"><code>processor.parse(file)</code></a></li>
<li><a href="#processorstringifynode-file"><code>processor.stringify(node[, file])</code></a></li>
<li><a href="#processorrunnode-file-done"><code>processor.run(node[, file][, done])</code></a></li>
<li><a href="#processorrunsyncnode-file"><code>processor.runSync(node[, file])</code></a></li>
<li><a href="#processorprocessfile-done"><code>processor.process(file[, done])</code></a></li>
<li><a href="#processorprocesssyncfilevalue"><code>processor.processSync(file|value)</code></a></li>
<li><a href="#processordatakey-value"><code>processor.data([key[, value]])</code></a></li>
<li><a href="#processorfreeze"><code>processor.freeze()</code></a></li>
</ul></li>
<li><a href="#plugin"><code>Plugin</code></a>
<ul>
<li><a href="#function-attacheroptions"><code>function attacher([options])</code></a></li>
<li><a href="#function-transformernode-file-next"><code>function transformer(node, file[, next])</code></a></li>
</ul></li>
<li><a href="#preset"><code>Preset</code></a></li>
<li><a href="#contribute">Contribute</a></li>
<li><a href="#acknowledgments">Acknowledgments</a></li>
<li><a href="#license">License</a></li>
</ul>
<h2 id="description">Description</h2>
<p><strong>unified</strong> is an interface for processing text using syntax trees. Syntax trees are a representation of text understandable to programs. Those programs, called <a href="#plugin"><em>plugin</em></a>s, take these trees and inspect and modify them. To get to the syntax tree from text, there is a <a href="#processorparser"><em>parser</em></a>. To get from that back to text, there is a <a href="#processorcompiler"><em>compiler</em></a>. This is the <a href="#processorprocessfile-done"><em>process</em></a> of a <em>processor</em>.</p>
<pre class="ascii"><code>| ........................ process ........................... |
| .......... parse ... | ... run ... | ... stringify ..........|

          +--------+                     +----------+
Input -&gt;- | Parser | -&gt;- Syntax Tree -&gt;- | Compiler | -&gt;- Output
          +--------+          |          +----------+
                              X
                              |
                       +--------------+
                       | Transformers |
                       +--------------+</code></pre>
<h6 id="processors">Processors</h6>
<p>Every <strong>processor</strong> implements another processor. To create a processor, call another processor. The new processor is configured to work the same as its ancestor. But when the descendant processor is configured in the future it does not affect the ancestral processor.</p>
<p>When processors are exposed from a module (for example, <code>unified</code> itself) they should not be configured directly, as that would change their behavior for all module users. Those processors are <a href="#processorfreeze"><em>frozen</em></a> and they should be called to create a new processor before they are used.</p>
<h6 id="syntax-trees">Syntax trees</h6>
<p>The <strong>syntax trees</strong> used in <strong>unified</strong> are <a href="https://github.com/syntax-tree/unist"><strong>unist</strong></a> nodes. A <a href="https://github.com/syntax-tree/unist#node"><strong>node</strong></a> is a plain JavaScript objects with a <code>type</code> field. The semantics of nodes and format of syntax trees is defined by other projects.</p>
<p>There are several <a href="https://github.com/syntax-tree/unist#list-of-utilities"><em>utilities</em></a> for working with nodes.</p>
<ul>
<li><a href="https://github.com/syntax-tree/hast"><strong>hast</strong></a> — HTML</li>
<li><a href="https://github.com/syntax-tree/mdast"><strong>mdast</strong></a> — Markdown</li>
<li><a href="https://github.com/syntax-tree/nlcst"><strong>nlcst</strong></a> — Natural language</li>
<li><a href="https://github.com/syntax-tree/xast"><strong>xast</strong></a> — XML</li>
</ul>
<h6 id="list-of-processors">List of processors</h6>
<p>The following projects process different <a href="#syntax-trees"><em>syntax tree</em></a> formats. They parse text to a syntax tree and compile that back to text. These processors can be used as is, or their parser and compiler can be mixed and matched with <strong>unified</strong> and plugins to process between different syntaxes.</p>
<ul>
<li><a href="https://github.com/rehypejs/rehype"><strong>rehype</strong></a> (<a href="https://github.com/syntax-tree/hast"><em>hast</em></a>) — HTML</li>
<li><a href="https://github.com/remarkjs/remark"><strong>remark</strong></a> (<a href="https://github.com/syntax-tree/mdast"><em>mdast</em></a>) — Markdown</li>
<li><a href="https://github.com/retextjs/retext"><strong>retext</strong></a> (<a href="https://github.com/syntax-tree/nlcst"><em>nlcst</em></a>) — Natural language</li>
</ul>
<h6 id="list-of-plugins">List of plugins</h6>
<p>The below <a href="#plugin"><strong>plugins</strong></a> work with <strong>unified</strong>, on all <a href="#syntax-trees"><em>syntax tree</em></a> formats:</p>
<ul>
<li><a href="https://github.com/unifiedjs/unified-diff"><code>unified-diff</code></a> — Ignore messages for unchanged lines in Travis</li>
<li><a href="https://github.com/unifiedjs/unified-message-control"><code>unified-message-control</code></a> — Enable, disable, and ignore messages</li>
</ul>
<p>See <a href="https://github.com/remarkjs/remark/blob/HEAD/doc/plugins.md#list-of-plugins"><strong>remark</strong></a>, <a href="https://github.com/rehypejs/rehype/blob/HEAD/doc/plugins.md#list-of-plugins"><strong>rehype</strong></a>, and <a href="https://github.com/retextjs/retext/blob/HEAD/doc/plugins.md#list-of-plugins"><strong>retext</strong></a> for their lists of plugins.</p>
<h6 id="file">File</h6>
<p>When processing a document, <strong>metadata</strong> is often gathered about that document. <a href="https://github.com/vfile/vfile"><strong>vfile</strong></a> is a virtual file format that stores data, metadata, and messages about files for <strong>unified</strong> and its plugins.</p>
<p>There are several <a href="https://github.com/vfile/vfile#related-tools"><em>utilities</em></a> for working with these files.</p>
<h6 id="configuration">Configuration</h6>
<p><a href="#processors"><em>Processors</em></a> are configured with <a href="#plugin"><em>plugin</em></a>s or with the <a href="#processordatakey-value"><code>data</code></a> method.</p>
<h6 id="integrations">Integrations</h6>
<p><strong>unified</strong> can integrate with the file system with <a href="https://github.com/unifiedjs/unified-engine"><code>unified-engine</code></a>. CLI apps can be created with <a href="https://github.com/unifiedjs/unified-args"><code>unified-args</code></a>, Gulp plugins with <a href="https://github.com/unifiedjs/unified-engine-gulp"><code>unified-engine-gulp</code></a>, and Atom Linters with <a href="https://github.com/unifiedjs/unified-engine-atom"><code>unified-engine-atom</code></a>.</p>
<p><a href="https://github.com/unifiedjs/unified-stream"><code>unified-stream</code></a> provides a streaming interface.</p>
<h6 id="programming-interface">Programming interface</h6>
<p>The API provided by <strong>unified</strong> allows multiple files to be processed and gives access to <em>metadata</em> (such as lint messages):</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">var</span> unified <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;unified&#39;</span>)</a>
<a class="sourceLine" id="cb6-2" title="2"><span class="kw">var</span> markdown <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-parse&#39;</span>)</a>
<a class="sourceLine" id="cb6-3" title="3"><span class="kw">var</span> styleGuide <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-preset-lint-markdown-style-guide&#39;</span>)</a>
<a class="sourceLine" id="cb6-4" title="4"><span class="kw">var</span> remark2retext <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-retext&#39;</span>)</a>
<a class="sourceLine" id="cb6-5" title="5"><span class="kw">var</span> english <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;retext-english&#39;</span>)</a>
<a class="sourceLine" id="cb6-6" title="6"><span class="kw">var</span> equality <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;retext-equality&#39;</span>)</a>
<a class="sourceLine" id="cb6-7" title="7"><span class="kw">var</span> remark2rehype <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-rehype&#39;</span>)</a>
<a class="sourceLine" id="cb6-8" title="8"><span class="kw">var</span> html <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-stringify&#39;</span>)</a>
<a class="sourceLine" id="cb6-9" title="9"><span class="kw">var</span> report <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;vfile-reporter&#39;</span>)</a>
<a class="sourceLine" id="cb6-10" title="10"></a>
<a class="sourceLine" id="cb6-11" title="11"><span class="at">unified</span>()</a>
<a class="sourceLine" id="cb6-12" title="12">  .<span class="at">use</span>(markdown)</a>
<a class="sourceLine" id="cb6-13" title="13">  .<span class="at">use</span>(styleGuide)</a>
<a class="sourceLine" id="cb6-14" title="14">  .<span class="at">use</span>(remark2retext<span class="op">,</span> <span class="at">unified</span>().<span class="at">use</span>(english).<span class="at">use</span>(equality))</a>
<a class="sourceLine" id="cb6-15" title="15">  .<span class="at">use</span>(remark2rehype)</a>
<a class="sourceLine" id="cb6-16" title="16">  .<span class="at">use</span>(html)</a>
<a class="sourceLine" id="cb6-17" title="17">  .<span class="at">process</span>(<span class="st">&#39;*Emphasis* and _stress_, you guys!&#39;</span><span class="op">,</span> <span class="kw">function</span> (err<span class="op">,</span> file) <span class="op">{</span></a>
<a class="sourceLine" id="cb6-18" title="18">    <span class="va">console</span>.<span class="at">error</span>(<span class="at">report</span>(err <span class="op">||</span> file))</a>
<a class="sourceLine" id="cb6-19" title="19">    <span class="va">console</span>.<span class="at">log</span>(<span class="at">String</span>(file))</a>
<a class="sourceLine" id="cb6-20" title="20">  <span class="op">}</span>)</a></code></pre></div>
<p>Yields:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode txt"><code class="sourceCode default"><a class="sourceLine" id="cb7-1" title="1">  1:16-1:24  warning  Emphasis should use `*` as a marker                                  emphasis-marker  remark-lint</a>
<a class="sourceLine" id="cb7-2" title="2">  1:30-1:34  warning  `guys` may be insensitive, use `people`, `persons`, `folks` instead  gals-men         retext-equality</a>
<a class="sourceLine" id="cb7-3" title="3"></a>
<a class="sourceLine" id="cb7-4" title="4">⚠ 2 warnings</a></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">&lt;p&gt;&lt;em&gt;</span>Emphasis<span class="kw">&lt;/em&gt;</span> and <span class="kw">&lt;em&gt;</span>stress<span class="kw">&lt;/em&gt;</span>, you guys!<span class="kw">&lt;/p&gt;</span></a></code></pre></div>
<h6 id="processing-between-syntaxes">Processing between syntaxes</h6>
<p><a href="#processors"><em>Processors</em></a> can be combined in two modes.</p>
<p><strong>Bridge</strong> mode transforms the <a href="#syntax-trees"><em>syntax tree</em></a> from one format (<em>origin</em>) to another (<em>destination</em>). Another processor runs on the destination tree. Finally, the original processor continues transforming the origin tree.</p>
<p><strong>Mutate</strong> mode also transforms the syntax tree from one format to another. But the original processor continues transforming the destination tree.</p>
<p>In the previous example (“Programming interface”), <code>remark-retext</code> is used in <em>bridge</em> mode: the origin syntax tree is kept after <a href="https://github.com/retextjs/retext"><strong>retext</strong></a> is done; whereas <code>remark-rehype</code> is used in <em>mutate</em> mode: it sets a new syntax tree and discards the origin tree.</p>
<ul>
<li><a href="https://github.com/remarkjs/remark-retext"><code>remark-retext</code></a></li>
<li><a href="https://github.com/remarkjs/remark-rehype"><code>remark-rehype</code></a></li>
<li><a href="https://github.com/rehypejs/rehype-retext"><code>rehype-retext</code></a></li>
<li><a href="https://github.com/rehypejs/rehype-remark"><code>rehype-remark</code></a></li>
</ul>
<h2 id="api">API</h2>
<h3 id="processor"><code>processor()</code></h3>
<p><a href="#processors"><em>Processor</em></a> describing how to <em>process</em> text.</p>
<h6 id="returns">Returns</h6>
<p><code>Function</code> — New <a href="#processorfreeze"><em>unfrozen</em></a> processor that is configured to work the same as its ancestor. When the descendant processor is configured in the future it does not affect the ancestral processor.</p>
<h6 id="example">Example</h6>
<p>The following example shows how a new processor can be created (from the remark processor) and linked to <strong>stdin</strong>(4) and <strong>stdout</strong>(4).</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">var</span> remark <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark&#39;</span>)</a>
<a class="sourceLine" id="cb9-2" title="2"><span class="kw">var</span> concat <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;concat-stream&#39;</span>)</a>
<a class="sourceLine" id="cb9-3" title="3"></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="va">process</span>.<span class="va">stdin</span>.<span class="at">pipe</span>(<span class="at">concat</span>(onconcat))</a>
<a class="sourceLine" id="cb9-5" title="5"></a>
<a class="sourceLine" id="cb9-6" title="6"><span class="kw">function</span> <span class="at">onconcat</span>(buf) <span class="op">{</span></a>
<a class="sourceLine" id="cb9-7" title="7">  <span class="kw">var</span> doc <span class="op">=</span> <span class="at">remark</span>().<span class="at">processSync</span>(buf).<span class="at">toString</span>()</a>
<a class="sourceLine" id="cb9-8" title="8"></a>
<a class="sourceLine" id="cb9-9" title="9">  <span class="va">process</span>.<span class="va">stdout</span>.<span class="at">write</span>(doc)</a>
<a class="sourceLine" id="cb9-10" title="10"><span class="op">}</span></a></code></pre></div>
<h3 id="processor.useplugin-options"><code>processor.use(plugin[, options])</code></h3>
<p><a href="#configuration"><em>Configure</em></a> the processor to use a <a href="#plugin"><em>plugin</em></a> and optionally configure that plugin with options.</p>
<p>If the processor is already using this plugin, the previous plugin configuration is changed based on the options that are passed in. The plugin is not added a second time.</p>
<h6 id="signatures">Signatures</h6>
<ul>
<li><code>processor.use(plugin[, options])</code></li>
<li><code>processor.use(preset)</code></li>
<li><code>processor.use(list)</code></li>
</ul>
<h6 id="parameters">Parameters</h6>
<ul>
<li><code>plugin</code> (<a href="#plugin"><code>Attacher</code></a>)</li>
<li><code>options</code> (<code>*</code>, optional) — Configuration for <code>plugin</code></li>
<li><code>preset</code> (<code>Object</code>) — Object with an optional <code>plugins</code> (set to <code>list</code>), and/or an optional <code>settings</code> object</li>
<li><code>list</code> (<code>Array</code>) — List of plugins, presets, and pairs (<code>plugin</code> and <code>options</code> in an array)</li>
</ul>
<h6 id="returns-1">Returns</h6>
<p><code>processor</code> — The processor that <code>use</code> was called on.</p>
<h6 id="note">Note</h6>
<p><code>use</code> cannot be called on <a href="#processorfreeze"><em>frozen</em></a> processors. Call the processor first to create a new unfrozen processor.</p>
<h6 id="example-1">Example</h6>
<p>There are many ways to pass plugins to <code>.use()</code>. The below example gives an overview.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">var</span> unified <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;unified&#39;</span>)</a>
<a class="sourceLine" id="cb10-2" title="2"></a>
<a class="sourceLine" id="cb10-3" title="3"><span class="at">unified</span>()</a>
<a class="sourceLine" id="cb10-4" title="4">  <span class="co">// Plugin with options:</span></a>
<a class="sourceLine" id="cb10-5" title="5">  .<span class="at">use</span>(pluginA<span class="op">,</span> <span class="op">{</span><span class="dt">x</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">y</span><span class="op">:</span> <span class="kw">true</span><span class="op">}</span>)</a>
<a class="sourceLine" id="cb10-6" title="6">  <span class="co">// Passing the same plugin again merges configuration (to `{x: true, y: false, z: true}`):</span></a>
<a class="sourceLine" id="cb10-7" title="7">  .<span class="at">use</span>(pluginA<span class="op">,</span> <span class="op">{</span><span class="dt">y</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">z</span><span class="op">:</span> <span class="kw">true</span><span class="op">}</span>)</a>
<a class="sourceLine" id="cb10-8" title="8">  <span class="co">// Plugins:</span></a>
<a class="sourceLine" id="cb10-9" title="9">  .<span class="at">use</span>([pluginB<span class="op">,</span> pluginC])</a>
<a class="sourceLine" id="cb10-10" title="10">  <span class="co">// Two plugins, the second with options:</span></a>
<a class="sourceLine" id="cb10-11" title="11">  .<span class="at">use</span>([pluginD<span class="op">,</span> [pluginE<span class="op">,</span> <span class="op">{}</span>]])</a>
<a class="sourceLine" id="cb10-12" title="12">  <span class="co">// Preset with plugins and settings:</span></a>
<a class="sourceLine" id="cb10-13" title="13">  .<span class="at">use</span>(<span class="op">{</span><span class="dt">plugins</span><span class="op">:</span> [pluginF<span class="op">,</span> [pluginG<span class="op">,</span> <span class="op">{}</span>]]<span class="op">,</span> <span class="dt">settings</span><span class="op">:</span> <span class="op">{</span><span class="dt">position</span><span class="op">:</span> <span class="kw">false</span><span class="op">}}</span>)</a>
<a class="sourceLine" id="cb10-14" title="14">  <span class="co">// Settings only:</span></a>
<a class="sourceLine" id="cb10-15" title="15">  .<span class="at">use</span>(<span class="op">{</span><span class="dt">settings</span><span class="op">:</span> <span class="op">{</span><span class="dt">position</span><span class="op">:</span> <span class="kw">false</span><span class="op">}}</span>)</a></code></pre></div>
<h3 id="processor.parsefile"><code>processor.parse(file)</code></h3>
<p>Parse text to a <a href="#syntax-trees"><em>syntax tree</em></a>.</p>
<h6 id="parameters-1">Parameters</h6>
<ul>
<li><code>file</code> (<a href="https://github.com/vfile/vfile"><code>VFile</code></a>) — <a href="#file"><em>File</em></a>, any value accepted by <code>vfile()</code></li>
</ul>
<h6 id="returns-2">Returns</h6>
<p><a href="https://github.com/syntax-tree/unist#node"><code>Node</code></a> — Parsed <a href="#syntax-trees"><em>syntax tree</em></a> representing <code>file</code>.</p>
<h6 id="note-1">Note</h6>
<p><code>parse</code> freezes the processor if not already <a href="#processorfreeze"><em>frozen</em></a>.</p>
<p><code>parse</code> performs the <a href="#description"><em>parse phase</em></a>, not the <em>run phase</em> or other phases.</p>
<h6 id="example-2">Example</h6>
<p>The below example shows how <code>parse</code> can be used to create a syntax tree from a file.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">var</span> unified <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;unified&#39;</span>)</a>
<a class="sourceLine" id="cb11-2" title="2"><span class="kw">var</span> markdown <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-parse&#39;</span>)</a>
<a class="sourceLine" id="cb11-3" title="3"></a>
<a class="sourceLine" id="cb11-4" title="4"><span class="kw">var</span> tree <span class="op">=</span> <span class="at">unified</span>().<span class="at">use</span>(markdown).<span class="at">parse</span>(<span class="st">&#39;# Hello world!&#39;</span>)</a>
<a class="sourceLine" id="cb11-5" title="5"></a>
<a class="sourceLine" id="cb11-6" title="6"><span class="va">console</span>.<span class="at">log</span>(tree)</a></code></pre></div>
<p>Yields:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb12-1" title="1"><span class="op">{</span></a>
<a class="sourceLine" id="cb12-2" title="2">  <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;root&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb12-3" title="3">  <span class="dt">children</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb12-4" title="4">    <span class="op">{</span><span class="dt">type</span><span class="op">:</span> <span class="st">&#39;heading&#39;</span><span class="op">,</span> <span class="dt">depth</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">children</span><span class="op">:</span> [Array]<span class="op">,</span> <span class="dt">position</span><span class="op">:</span> [Position]<span class="op">}</span></a>
<a class="sourceLine" id="cb12-5" title="5">  ]<span class="op">,</span></a>
<a class="sourceLine" id="cb12-6" title="6">  <span class="dt">position</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb12-7" title="7">    <span class="dt">start</span><span class="op">:</span> <span class="op">{</span><span class="dt">line</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">column</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">offset</span><span class="op">:</span> <span class="dv">0</span><span class="op">},</span></a>
<a class="sourceLine" id="cb12-8" title="8">    <span class="dt">end</span><span class="op">:</span> <span class="op">{</span><span class="dt">line</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">column</span><span class="op">:</span> <span class="dv">15</span><span class="op">,</span> <span class="dt">offset</span><span class="op">:</span> <span class="dv">14</span><span class="op">}</span></a>
<a class="sourceLine" id="cb12-9" title="9">  <span class="op">}</span></a>
<a class="sourceLine" id="cb12-10" title="10"><span class="op">}</span></a></code></pre></div>
<h4 id="processor.parser"><code>processor.Parser</code></h4>
<p>A <strong>parser</strong> handles the parsing of text to a <a href="#syntax-trees"><em>syntax tree</em></a>. Used in the <a href="#description"><em>parse phase</em></a> and called with a <code>string</code> and <a href="https://github.com/vfile/vfile"><code>VFile</code></a> representation of the text to parse.</p>
<p><code>Parser</code> can be a function, in which case it must return a <a href="https://github.com/syntax-tree/unist#node"><code>Node</code></a>: the syntax tree representation of the given file.</p>
<p><code>Parser</code> can also be a constructor function (a function with a <code>parse</code> field, or other fields, in its <code>prototype</code>), in which case it’s constructed with <code>new</code>. Instances must have a <code>parse</code> method that is called without arguments and must return a <a href="https://github.com/syntax-tree/unist#node"><code>Node</code></a>.</p>
<h3 id="processor.stringifynode-file"><code>processor.stringify(node[, file])</code></h3>
<p>Compile a <a href="#syntax-trees"><em>syntax tree</em></a>.</p>
<h6 id="parameters-2">Parameters</h6>
<ul>
<li><code>node</code> (<a href="https://github.com/syntax-tree/unist#node"><code>Node</code></a>) — <a href="#syntax-trees"><em>Syntax tree</em></a> to compile</li>
<li><code>file</code> (<a href="https://github.com/vfile/vfile"><code>VFile</code></a>, optional) — <a href="#file"><em>File</em></a>, any value accepted by <code>vfile()</code></li>
</ul>
<h6 id="returns-3">Returns</h6>
<p><code>string</code> or <code>Buffer</code> (see notes) — Textual representation of the <a href="#syntax-trees"><em>syntax tree</em></a></p>
<h6 id="note-2">Note</h6>
<p><code>stringify</code> freezes the processor if not already <a href="#processorfreeze"><em>frozen</em></a>.</p>
<p><code>stringify</code> performs the <a href="#description"><em>stringify phase</em></a>, not the <em>run phase</em> or other phases.</p>
<p>unified typically compiles by serializing: most <a href="#processorcompiler"><em>compiler</em></a>s return <code>string</code> (or <code>Buffer</code>). Some compilers, such as the one configured with <a href="https://github.com/rhysd/rehype-react"><code>rehype-react</code></a>, return other values (in this case, a React tree). If you’re using a compiler doesn’t serialize, expect different result values. When using TypeScript, cast the type on your side.</p>
<h6 id="example-3">Example</h6>
<p>The below example shows how <code>stringify</code> can be used to serialize a syntax tree.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb13-1" title="1"><span class="kw">var</span> unified <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;unified&#39;</span>)</a>
<a class="sourceLine" id="cb13-2" title="2"><span class="kw">var</span> html <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-stringify&#39;</span>)</a>
<a class="sourceLine" id="cb13-3" title="3"><span class="kw">var</span> h <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;hastscript&#39;</span>)</a>
<a class="sourceLine" id="cb13-4" title="4"></a>
<a class="sourceLine" id="cb13-5" title="5"><span class="kw">var</span> tree <span class="op">=</span> <span class="at">h</span>(<span class="st">&#39;h1&#39;</span><span class="op">,</span> <span class="st">&#39;Hello world!&#39;</span>)</a>
<a class="sourceLine" id="cb13-6" title="6"></a>
<a class="sourceLine" id="cb13-7" title="7"><span class="kw">var</span> doc <span class="op">=</span> <span class="at">unified</span>().<span class="at">use</span>(html).<span class="at">stringify</span>(tree)</a>
<a class="sourceLine" id="cb13-8" title="8"></a>
<a class="sourceLine" id="cb13-9" title="9"><span class="va">console</span>.<span class="at">log</span>(doc)</a></code></pre></div>
<p>Yields:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb14-1" title="1"><span class="kw">&lt;h1&gt;</span>Hello world!<span class="kw">&lt;/h1&gt;</span></a></code></pre></div>
<h4 id="processor.compiler"><code>processor.Compiler</code></h4>
<p>A <strong>compiler</strong> handles the compiling of a <a href="#syntax-trees"><em>syntax tree</em></a> to text. Used in the <a href="#description"><em>stringify phase</em></a> and called with a <a href="https://github.com/syntax-tree/unist#node"><code>Node</code></a> and <a href="#file"><code>VFile</code></a> representation of syntax tree to compile.</p>
<p><code>Compiler</code> can be a function, in which case it should return a <code>string</code>: the textual representation of the syntax tree.</p>
<p><code>Compiler</code> can also be a constructor function (a function with a <code>compile</code> field, or other fields, in its <code>prototype</code>), in which case it’s constructed with <code>new</code>. Instances must have a <code>compile</code> method that is called without arguments and should return a <code>string</code>.</p>
<h3 id="processor.runnode-file-done"><code>processor.run(node[, file][, done])</code></h3>
<p>Run <a href="#function-transformernode-file-next"><em>transformers</em></a> on a <a href="#syntax-trees"><em>syntax tree</em></a>.</p>
<h6 id="parameters-3">Parameters</h6>
<ul>
<li><code>node</code> (<a href="https://github.com/syntax-tree/unist#node"><code>Node</code></a>) — <a href="#syntax-trees"><em>Syntax tree</em></a> to run on</li>
<li><code>file</code> (<a href="https://github.com/vfile/vfile"><code>VFile</code></a>, optional) — <a href="#file"><em>File</em></a>, any value accepted by <code>vfile()</code></li>
<li><code>done</code> (<a href="#function-doneerr-node-file"><code>Function</code></a>, optional) — Callback</li>
</ul>
<h6 id="returns-4">Returns</h6>
<p><a href="https://developer.mozilla.org/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> if <code>done</code> is not given. The returned promise is rejected with a fatal error, or resolved with the transformed <a href="#syntax-trees"><em>syntax tree</em></a>.</p>
<h6 id="note-3">Note</h6>
<p><code>run</code> freezes the processor if not already <a href="#processorfreeze"><em>frozen</em></a>.</p>
<p><code>run</code> performs the <a href="#description"><em>run phase</em></a>, not other phases.</p>
<h4 id="function-doneerr-node-file"><code>function done(err[, node, file])</code></h4>
<p>Callback called when <a href="#function-transformernode-file-next"><em>transformers</em></a> are done. Called with either an error or results.</p>
<h6 id="parameters-4">Parameters</h6>
<ul>
<li><code>err</code> (<code>Error</code>, optional) — Fatal error</li>
<li><code>node</code> (<a href="https://github.com/syntax-tree/unist#node"><code>Node</code></a>, optional) — Transformed <a href="#syntax-trees"><em>syntax tree</em></a></li>
<li><code>file</code> (<a href="https://github.com/vfile/vfile"><code>VFile</code></a>, optional) — <a href="#file"><em>File</em></a></li>
</ul>
<h6 id="example-4">Example</h6>
<p>The below example shows how <code>run</code> can be used to transform a syntax tree.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb15-1" title="1"><span class="kw">var</span> unified <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;unified&#39;</span>)</a>
<a class="sourceLine" id="cb15-2" title="2"><span class="kw">var</span> references <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-reference-links&#39;</span>)</a>
<a class="sourceLine" id="cb15-3" title="3"><span class="kw">var</span> u <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;unist-builder&#39;</span>)</a>
<a class="sourceLine" id="cb15-4" title="4"></a>
<a class="sourceLine" id="cb15-5" title="5"><span class="kw">var</span> tree <span class="op">=</span> <span class="at">u</span>(<span class="st">&#39;root&#39;</span><span class="op">,</span> [</a>
<a class="sourceLine" id="cb15-6" title="6">  <span class="at">u</span>(<span class="st">&#39;paragraph&#39;</span><span class="op">,</span> [</a>
<a class="sourceLine" id="cb15-7" title="7">    <span class="at">u</span>(<span class="st">&#39;link&#39;</span><span class="op">,</span> <span class="op">{</span><span class="dt">href</span><span class="op">:</span> <span class="st">&#39;https://example.com&#39;</span><span class="op">},</span> [<span class="at">u</span>(<span class="st">&#39;text&#39;</span><span class="op">,</span> <span class="st">&#39;Example Domain&#39;</span>)])</a>
<a class="sourceLine" id="cb15-8" title="8">  ])</a>
<a class="sourceLine" id="cb15-9" title="9">])</a>
<a class="sourceLine" id="cb15-10" title="10"></a>
<a class="sourceLine" id="cb15-11" title="11"><span class="at">unified</span>()</a>
<a class="sourceLine" id="cb15-12" title="12">  .<span class="at">use</span>(references)</a>
<a class="sourceLine" id="cb15-13" title="13">  .<span class="at">run</span>(tree<span class="op">,</span> <span class="kw">function</span> (err<span class="op">,</span> tree) <span class="op">{</span></a>
<a class="sourceLine" id="cb15-14" title="14">    <span class="cf">if</span> (err) <span class="cf">throw</span> err</a>
<a class="sourceLine" id="cb15-15" title="15">    <span class="va">console</span>.<span class="at">log</span>(tree)</a>
<a class="sourceLine" id="cb15-16" title="16">  <span class="op">}</span>)</a></code></pre></div>
<p>Yields:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb16-1" title="1"><span class="op">{</span></a>
<a class="sourceLine" id="cb16-2" title="2">  <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;root&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb16-3" title="3">  <span class="dt">children</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb16-4" title="4">    <span class="op">{</span><span class="dt">type</span><span class="op">:</span> <span class="st">&#39;paragraph&#39;</span><span class="op">,</span> <span class="dt">children</span><span class="op">:</span> [Array]<span class="op">},</span></a>
<a class="sourceLine" id="cb16-5" title="5">    <span class="op">{</span><span class="dt">type</span><span class="op">:</span> <span class="st">&#39;definition&#39;</span><span class="op">,</span> <span class="dt">identifier</span><span class="op">:</span> <span class="st">&#39;1&#39;</span><span class="op">,</span> <span class="dt">title</span><span class="op">:</span> <span class="kw">undefined</span><span class="op">,</span> <span class="dt">url</span><span class="op">:</span> <span class="kw">undefined</span><span class="op">}</span></a>
<a class="sourceLine" id="cb16-6" title="6">  ]</a>
<a class="sourceLine" id="cb16-7" title="7"><span class="op">}</span></a></code></pre></div>
<h3 id="processor.runsyncnode-file"><code>processor.runSync(node[, file])</code></h3>
<p>Run <a href="#function-transformernode-file-next"><em>transformers</em></a> on a <a href="#syntax-trees"><em>syntax tree</em></a>.</p>
<p>An error is thrown if asynchronous <a href="#plugin"><em>plugin</em></a>s are configured.</p>
<h6 id="parameters-5">Parameters</h6>
<ul>
<li><code>node</code> (<a href="https://github.com/syntax-tree/unist#node"><code>Node</code></a>) — <a href="#syntax-trees"><em>Syntax tree</em></a> to run on</li>
<li><code>file</code> (<a href="https://github.com/vfile/vfile"><code>VFile</code></a>, optional) — <a href="#file"><em>File</em></a>, any value accepted by <code>vfile()</code></li>
</ul>
<h6 id="returns-5">Returns</h6>
<p><a href="https://github.com/syntax-tree/unist#node"><code>Node</code></a> — Transformed <a href="#syntax-trees"><em>syntax tree</em></a>.</p>
<h6 id="note-4">Note</h6>
<p><code>runSync</code> freezes the processor if not already <a href="#processorfreeze"><em>frozen</em></a>.</p>
<p><code>runSync</code> performs the <a href="#description"><em>run phase</em></a>, not other phases.</p>
<h3 id="processor.processfile-done"><code>processor.process(file[, done])</code></h3>
<p><a href="#description"><em>Process</em></a> the given <a href="#file"><em>file</em></a> as configured on the processor.</p>
<h6 id="parameters-6">Parameters</h6>
<ul>
<li><code>file</code> (<a href="https://github.com/vfile/vfile"><code>VFile</code></a>) — <a href="#file"><em>File</em></a>, any value accepted by <code>vfile()</code></li>
<li><code>done</code> (<a href="#function-doneerr-file"><code>Function</code></a>, optional) — Callback</li>
</ul>
<h6 id="returns-6">Returns</h6>
<p><a href="https://developer.mozilla.org/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> if <code>done</code> is not given. The returned promise is rejected with a fatal error, or resolved with the processed <a href="#file"><em>file</em></a>.</p>
<p>The parsed, transformed, and compiled value is exposed on <a href="https://github.com/vfile/vfile#vfilecontents"><code>file.contents</code></a> or <code>file.result</code> (see notes).</p>
<h6 id="note-5">Note</h6>
<p><code>process</code> freezes the processor if not already <a href="#processorfreeze"><em>frozen</em></a>.</p>
<p><code>process</code> performs the <a href="#description"><em>parse</em>, <em>run</em>, and <em>stringify</em> phases</a>.</p>
<p>unified typically compiles by serializing: most <a href="#processorcompiler"><em>compiler</em></a>s return <code>string</code> (or <code>Buffer</code>). Some compilers, such as the one configured with <a href="https://github.com/rhysd/rehype-react"><code>rehype-react</code></a>, return other values (in this case, a React tree). If you’re using a compiler that serializes, the result is available at <code>file.contents</code>. Otherwise, the result is available at <code>file.result</code>.</p>
<h6 id="example-5">Example</h6>
<p>The below example shows how <code>process</code> can be used to process a file, whether transformers are asynchronous or not, with promises.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb17-1" title="1"><span class="kw">var</span> unified <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;unified&#39;</span>)</a>
<a class="sourceLine" id="cb17-2" title="2"><span class="kw">var</span> markdown <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-parse&#39;</span>)</a>
<a class="sourceLine" id="cb17-3" title="3"><span class="kw">var</span> remark2rehype <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-rehype&#39;</span>)</a>
<a class="sourceLine" id="cb17-4" title="4"><span class="kw">var</span> doc <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-document&#39;</span>)</a>
<a class="sourceLine" id="cb17-5" title="5"><span class="kw">var</span> format <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-format&#39;</span>)</a>
<a class="sourceLine" id="cb17-6" title="6"><span class="kw">var</span> html <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-stringify&#39;</span>)</a>
<a class="sourceLine" id="cb17-7" title="7"></a>
<a class="sourceLine" id="cb17-8" title="8"><span class="at">unified</span>()</a>
<a class="sourceLine" id="cb17-9" title="9">  .<span class="at">use</span>(markdown)</a>
<a class="sourceLine" id="cb17-10" title="10">  .<span class="at">use</span>(remark2rehype)</a>
<a class="sourceLine" id="cb17-11" title="11">  .<span class="at">use</span>(doc<span class="op">,</span> <span class="op">{</span><span class="dt">title</span><span class="op">:</span> <span class="st">&#39;👋🌍&#39;</span><span class="op">}</span>)</a>
<a class="sourceLine" id="cb17-12" title="12">  .<span class="at">use</span>(format)</a>
<a class="sourceLine" id="cb17-13" title="13">  .<span class="at">use</span>(html)</a>
<a class="sourceLine" id="cb17-14" title="14">  .<span class="at">process</span>(<span class="st">&#39;# Hello world!&#39;</span>)</a>
<a class="sourceLine" id="cb17-15" title="15">  .<span class="at">then</span>(</a>
<a class="sourceLine" id="cb17-16" title="16">    <span class="kw">function</span> (file) <span class="op">{</span></a>
<a class="sourceLine" id="cb17-17" title="17">      <span class="va">console</span>.<span class="at">log</span>(<span class="at">String</span>(file))</a>
<a class="sourceLine" id="cb17-18" title="18">    <span class="op">},</span></a>
<a class="sourceLine" id="cb17-19" title="19">    <span class="kw">function</span> (err) <span class="op">{</span></a>
<a class="sourceLine" id="cb17-20" title="20">      <span class="va">console</span>.<span class="at">error</span>(<span class="at">String</span>(err))</a>
<a class="sourceLine" id="cb17-21" title="21">    <span class="op">}</span></a>
<a class="sourceLine" id="cb17-22" title="22">  )</a></code></pre></div>
<p>Yields:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb18-1" title="1"><span class="dt">&lt;!doctype </span>html<span class="dt">&gt;</span></a>
<a class="sourceLine" id="cb18-2" title="2"><span class="kw">&lt;html</span><span class="ot"> lang=</span><span class="st">&quot;en&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb18-3" title="3">  <span class="kw">&lt;head&gt;</span></a>
<a class="sourceLine" id="cb18-4" title="4">    <span class="kw">&lt;meta</span><span class="ot"> charset=</span><span class="st">&quot;utf-8&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb18-5" title="5">    <span class="kw">&lt;title&gt;</span>👋🌍<span class="kw">&lt;/title&gt;</span></a>
<a class="sourceLine" id="cb18-6" title="6">    <span class="kw">&lt;meta</span><span class="ot"> name=</span><span class="st">&quot;viewport&quot;</span><span class="ot"> content=</span><span class="st">&quot;width=device-width, initial-scale=1&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb18-7" title="7">  <span class="kw">&lt;/head&gt;</span></a>
<a class="sourceLine" id="cb18-8" title="8">  <span class="kw">&lt;body&gt;</span></a>
<a class="sourceLine" id="cb18-9" title="9">    <span class="kw">&lt;h1&gt;</span>Hello world!<span class="kw">&lt;/h1&gt;</span></a>
<a class="sourceLine" id="cb18-10" title="10">  <span class="kw">&lt;/body&gt;</span></a>
<a class="sourceLine" id="cb18-11" title="11"><span class="kw">&lt;/html&gt;</span></a></code></pre></div>
<h4 id="function-doneerr-file"><code>function done(err, file)</code></h4>
<p>Callback called when the <a href="#description"><em>process</em></a> is done. Called with a fatal error, if any, and a <a href="#file"><em>file</em></a>.</p>
<h6 id="parameters-7">Parameters</h6>
<ul>
<li><code>err</code> (<code>Error</code>, optional) — Fatal error</li>
<li><code>file</code> (<a href="https://github.com/vfile/vfile"><code>VFile</code></a>) — Processed <a href="#file"><em>file</em></a></li>
</ul>
<h6 id="example-6">Example</h6>
<p>The below example shows how <code>process</code> can be used to process a file, whether transformers are asynchronous or not, with a callback.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb19-1" title="1"><span class="kw">var</span> unified <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;unified&#39;</span>)</a>
<a class="sourceLine" id="cb19-2" title="2"><span class="kw">var</span> parse <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-parse&#39;</span>)</a>
<a class="sourceLine" id="cb19-3" title="3"><span class="kw">var</span> stringify <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-stringify&#39;</span>)</a>
<a class="sourceLine" id="cb19-4" title="4"><span class="kw">var</span> github <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-github&#39;</span>)</a>
<a class="sourceLine" id="cb19-5" title="5"><span class="kw">var</span> report <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;vfile-reporter&#39;</span>)</a>
<a class="sourceLine" id="cb19-6" title="6"></a>
<a class="sourceLine" id="cb19-7" title="7"><span class="at">unified</span>()</a>
<a class="sourceLine" id="cb19-8" title="8">  .<span class="at">use</span>(parse)</a>
<a class="sourceLine" id="cb19-9" title="9">  .<span class="at">use</span>(github)</a>
<a class="sourceLine" id="cb19-10" title="10">  .<span class="at">use</span>(stringify)</a>
<a class="sourceLine" id="cb19-11" title="11">  .<span class="at">process</span>(<span class="st">&#39;@wooorm&#39;</span><span class="op">,</span> <span class="kw">function</span> (err<span class="op">,</span> file) <span class="op">{</span></a>
<a class="sourceLine" id="cb19-12" title="12">    <span class="va">console</span>.<span class="at">error</span>(<span class="at">report</span>(err <span class="op">||</span> file))</a>
<a class="sourceLine" id="cb19-13" title="13">    <span class="va">console</span>.<span class="at">log</span>(<span class="at">String</span>(file))</a>
<a class="sourceLine" id="cb19-14" title="14">  <span class="op">}</span>)</a></code></pre></div>
<p>Yields:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode txt"><code class="sourceCode default"><a class="sourceLine" id="cb20-1" title="1">no issues found</a></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb21-1" title="1"><span class="ot">[**@wooorm**](https://github.com/wooorm)</span></a></code></pre></div>
<h3 id="processor.processsyncfilevalue"><code>processor.processSync(file|value)</code></h3>
<p><a href="#description"><em>Process</em></a> the given <a href="#file"><em>file</em></a> as configured on the processor.</p>
<p>An error is thrown if asynchronous <a href="#plugin"><em>plugin</em></a>s are configured.</p>
<h6 id="parameters-8">Parameters</h6>
<ul>
<li><code>file</code> (<a href="https://github.com/vfile/vfile"><code>VFile</code></a>) — <a href="#file"><em>File</em></a>, any value accepted by <code>vfile()</code></li>
</ul>
<h6 id="returns-7">Returns</h6>
<p>(<a href="https://github.com/vfile/vfile"><code>VFile</code></a>) — Processed <a href="#file"><em>file</em></a></p>
<p>The parsed, transformed, and compiled value is exposed on <a href="https://github.com/vfile/vfile#vfilecontents"><code>file.contents</code></a> or <code>file.result</code> (see notes).</p>
<h6 id="note-6">Note</h6>
<p><code>processSync</code> freezes the processor if not already <a href="#processorfreeze"><em>frozen</em></a>.</p>
<p><code>processSync</code> performs the <a href="#description"><em>parse</em>, <em>run</em>, and <em>stringify</em> phases</a>.</p>
<p>unified typically compiles by serializing: most <a href="#processorcompiler"><em>compiler</em></a>s return <code>string</code> (or <code>Buffer</code>). Some compilers, such as the one configured with <a href="https://github.com/rhysd/rehype-react"><code>rehype-react</code></a>, return other values (in this case, a React tree). If you’re using a compiler that serializes, the result is available at <code>file.contents</code>. Otherwise, the result is available at <code>file.result</code>.</p>
<h6 id="example-7">Example</h6>
<p>The below example shows how <code>processSync</code> can be used to process a file, if all transformers are synchronous.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb22-1" title="1"><span class="kw">var</span> unified <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;unified&#39;</span>)</a>
<a class="sourceLine" id="cb22-2" title="2"><span class="kw">var</span> markdown <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-parse&#39;</span>)</a>
<a class="sourceLine" id="cb22-3" title="3"><span class="kw">var</span> remark2rehype <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-rehype&#39;</span>)</a>
<a class="sourceLine" id="cb22-4" title="4"><span class="kw">var</span> doc <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-document&#39;</span>)</a>
<a class="sourceLine" id="cb22-5" title="5"><span class="kw">var</span> format <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-format&#39;</span>)</a>
<a class="sourceLine" id="cb22-6" title="6"><span class="kw">var</span> html <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-stringify&#39;</span>)</a>
<a class="sourceLine" id="cb22-7" title="7"></a>
<a class="sourceLine" id="cb22-8" title="8"><span class="kw">var</span> processor <span class="op">=</span> <span class="at">unified</span>()</a>
<a class="sourceLine" id="cb22-9" title="9">  .<span class="at">use</span>(markdown)</a>
<a class="sourceLine" id="cb22-10" title="10">  .<span class="at">use</span>(remark2rehype)</a>
<a class="sourceLine" id="cb22-11" title="11">  .<span class="at">use</span>(doc<span class="op">,</span> <span class="op">{</span><span class="dt">title</span><span class="op">:</span> <span class="st">&#39;👋🌍&#39;</span><span class="op">}</span>)</a>
<a class="sourceLine" id="cb22-12" title="12">  .<span class="at">use</span>(format)</a>
<a class="sourceLine" id="cb22-13" title="13">  .<span class="at">use</span>(html)</a>
<a class="sourceLine" id="cb22-14" title="14"></a>
<a class="sourceLine" id="cb22-15" title="15"><span class="va">console</span>.<span class="at">log</span>(<span class="va">processor</span>.<span class="at">processSync</span>(<span class="st">&#39;# Hello world!&#39;</span>).<span class="at">toString</span>())</a></code></pre></div>
<p>Yields:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb23-1" title="1"><span class="dt">&lt;!doctype </span>html<span class="dt">&gt;</span></a>
<a class="sourceLine" id="cb23-2" title="2"><span class="kw">&lt;html</span><span class="ot"> lang=</span><span class="st">&quot;en&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb23-3" title="3">  <span class="kw">&lt;head&gt;</span></a>
<a class="sourceLine" id="cb23-4" title="4">    <span class="kw">&lt;meta</span><span class="ot"> charset=</span><span class="st">&quot;utf-8&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb23-5" title="5">    <span class="kw">&lt;title&gt;</span>👋🌍<span class="kw">&lt;/title&gt;</span></a>
<a class="sourceLine" id="cb23-6" title="6">    <span class="kw">&lt;meta</span><span class="ot"> name=</span><span class="st">&quot;viewport&quot;</span><span class="ot"> content=</span><span class="st">&quot;width=device-width, initial-scale=1&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb23-7" title="7">  <span class="kw">&lt;/head&gt;</span></a>
<a class="sourceLine" id="cb23-8" title="8">  <span class="kw">&lt;body&gt;</span></a>
<a class="sourceLine" id="cb23-9" title="9">    <span class="kw">&lt;h1&gt;</span>Hello world!<span class="kw">&lt;/h1&gt;</span></a>
<a class="sourceLine" id="cb23-10" title="10">  <span class="kw">&lt;/body&gt;</span></a>
<a class="sourceLine" id="cb23-11" title="11"><span class="kw">&lt;/html&gt;</span></a></code></pre></div>
<h3 id="processor.datakey-value"><code>processor.data([key[, value]])</code></h3>
<p><a href="#configuration"><em>Configure</em></a> the processor with information available to all <a href="#plugin"><em>plugin</em></a>s. Information is stored in an in-memory key-value store.</p>
<p>Typically, options can be given to a specific plugin, but sometimes it makes sense to have information shared with several plugins. For example, a list of HTML elements that are self-closing, which is needed during all <a href="#description"><em>phases</em></a> of the <em>process</em>.</p>
<h6 id="signatures-1">Signatures</h6>
<ul>
<li><code>processor = processor.data(key, value)</code></li>
<li><code>processor = processor.data(values)</code></li>
<li><code>value = processor.data(key)</code></li>
<li><code>info = processor.data()</code></li>
</ul>
<h6 id="parameters-9">Parameters</h6>
<ul>
<li><code>key</code> (<code>string</code>, optional) — Identifier</li>
<li><code>value</code> (<code>*</code>, optional) — Value to set</li>
<li><code>values</code> (<code>Object</code>, optional) — Values to set</li>
</ul>
<h6 id="returns-8">Returns</h6>
<ul>
<li><code>processor</code> — If setting, the processor that <code>data</code> is called on</li>
<li><code>value</code> (<code>*</code>) — If getting, the value at <code>key</code></li>
<li><code>info</code> (<code>Object</code>) — Without arguments, the key-value store</li>
</ul>
<h6 id="note-7">Note</h6>
<p>Setting information cannot occur on <a href="#processorfreeze"><em>frozen</em></a> processors. Call the processor first to create a new unfrozen processor.</p>
<h6 id="example-8">Example</h6>
<p>The following example show how to get and set information:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb24-1" title="1"><span class="kw">var</span> unified <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;unified&#39;</span>)</a>
<a class="sourceLine" id="cb24-2" title="2"></a>
<a class="sourceLine" id="cb24-3" title="3"><span class="kw">var</span> processor <span class="op">=</span> <span class="at">unified</span>().<span class="at">data</span>(<span class="st">&#39;alpha&#39;</span><span class="op">,</span> <span class="st">&#39;bravo&#39;</span>)</a>
<a class="sourceLine" id="cb24-4" title="4"></a>
<a class="sourceLine" id="cb24-5" title="5"><span class="va">processor</span>.<span class="at">data</span>(<span class="st">&#39;alpha&#39;</span>) <span class="co">// =&gt; &#39;bravo&#39;</span></a>
<a class="sourceLine" id="cb24-6" title="6"></a>
<a class="sourceLine" id="cb24-7" title="7"><span class="va">processor</span>.<span class="at">data</span>() <span class="co">// {alpha: &#39;bravo&#39;}</span></a>
<a class="sourceLine" id="cb24-8" title="8"></a>
<a class="sourceLine" id="cb24-9" title="9"><span class="va">processor</span>.<span class="at">data</span>(<span class="op">{</span><span class="dt">charlie</span><span class="op">:</span> <span class="st">&#39;delta&#39;</span><span class="op">}</span>)</a>
<a class="sourceLine" id="cb24-10" title="10"></a>
<a class="sourceLine" id="cb24-11" title="11"><span class="va">processor</span>.<span class="at">data</span>() <span class="co">// {charlie: &#39;delta&#39;}</span></a></code></pre></div>
<h3 id="processor.freeze"><code>processor.freeze()</code></h3>
<p><strong>Freeze</strong> a processor. <em>Frozen</em> processors are meant to be extended and not to be configured directly.</p>
<p>Once a processor is frozen it cannot be <em>unfrozen</em>. New processors working the same way can be created by calling the processor.</p>
<p>It’s possible to freeze processors explicitly by calling <code>.freeze()</code>. Processors freeze implicitly when <a href="#processorparsefile"><code>.parse()</code></a>, <a href="#processorrunnode-file-done"><code>.run()</code></a>, <a href="#processorrunsyncnode-file"><code>.runSync()</code></a>, <a href="#processorstringifynode-file"><code>.stringify()</code></a>, <a href="#processorprocessfile-done"><code>.process()</code></a>, or <a href="#processorprocesssyncfilevalue"><code>.processSync()</code></a> are called.</p>
<h6 id="returns-9">Returns</h6>
<p><code>processor</code> — The processor that <code>freeze</code> was called on.</p>
<h6 id="example-9">Example</h6>
<p>The following example, <code>index.js</code>, shows how rehype prevents extensions to itself:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb25-1" title="1"><span class="kw">var</span> unified <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;unified&#39;</span>)</a>
<a class="sourceLine" id="cb25-2" title="2"><span class="kw">var</span> parse <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-parse&#39;</span>)</a>
<a class="sourceLine" id="cb25-3" title="3"><span class="kw">var</span> stringify <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-stringify&#39;</span>)</a>
<a class="sourceLine" id="cb25-4" title="4"></a>
<a class="sourceLine" id="cb25-5" title="5"><span class="va">module</span>.<span class="at">exports</span> <span class="op">=</span> <span class="at">unified</span>().<span class="at">use</span>(parse).<span class="at">use</span>(stringify).<span class="at">freeze</span>()</a></code></pre></div>
<p>The below example, <code>a.js</code>, shows how that processor can be used and configured.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb26-1" title="1"><span class="kw">var</span> rehype <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype&#39;</span>)</a>
<a class="sourceLine" id="cb26-2" title="2"><span class="kw">var</span> format <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-format&#39;</span>)</a>
<a class="sourceLine" id="cb26-3" title="3"><span class="co">// …</span></a>
<a class="sourceLine" id="cb26-4" title="4"></a>
<a class="sourceLine" id="cb26-5" title="5"><span class="at">rehype</span>()</a>
<a class="sourceLine" id="cb26-6" title="6">  .<span class="at">use</span>(format)</a>
<a class="sourceLine" id="cb26-7" title="7">  <span class="co">// …</span></a></code></pre></div>
<p>The below example, <code>b.js</code>, shows a similar looking example that operates on the frozen rehype interface because it does not call <code>rehype</code>. If this behavior was allowed it would result in unexpected behavior so an error is thrown. <strong>This is invalid</strong>:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb27-1" title="1"><span class="kw">var</span> rehype <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype&#39;</span>)</a>
<a class="sourceLine" id="cb27-2" title="2"><span class="kw">var</span> format <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-format&#39;</span>)</a>
<a class="sourceLine" id="cb27-3" title="3"><span class="co">// …</span></a>
<a class="sourceLine" id="cb27-4" title="4"></a>
<a class="sourceLine" id="cb27-5" title="5">rehype</a>
<a class="sourceLine" id="cb27-6" title="6">  .<span class="at">use</span>(format)</a>
<a class="sourceLine" id="cb27-7" title="7">  <span class="co">// …</span></a></code></pre></div>
<p>Yields:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode txt"><code class="sourceCode default"><a class="sourceLine" id="cb28-1" title="1">~/node_modules/unified/index.js:440</a>
<a class="sourceLine" id="cb28-2" title="2">    throw new Error(</a>
<a class="sourceLine" id="cb28-3" title="3">    ^</a>
<a class="sourceLine" id="cb28-4" title="4"></a>
<a class="sourceLine" id="cb28-5" title="5">Error: Cannot invoke `use` on a frozen processor.</a>
<a class="sourceLine" id="cb28-6" title="6">Create a new processor first, by invoking it: use `processor()` instead of `processor`.</a>
<a class="sourceLine" id="cb28-7" title="7">    at assertUnfrozen (~/node_modules/unified/index.js:440:11)</a>
<a class="sourceLine" id="cb28-8" title="8">    at Function.use (~/node_modules/unified/index.js:172:5)</a>
<a class="sourceLine" id="cb28-9" title="9">    at Object.&lt;anonymous&gt; (~/b.js:6:4)</a></code></pre></div>
<h2 id="plugin"><code>Plugin</code></h2>
<p><strong>Plugins</strong> <a href="#configuration"><em>configure</em></a> the processors they are applied on in the following ways:</p>
<ul>
<li>They change the processor: such as the <a href="#processorparser"><em>parser</em></a>, the <a href="#processorcompiler"><em>compiler</em></a>, or configuring <a href="#processordatakey-value"><em>data</em></a></li>
<li>They specify how to handle <a href="#syntax-trees"><em>syntax trees</em></a> and <a href="#file"><em>files</em></a></li>
</ul>
<p>Plugins are a concept. They materialize as <a href="#function-attacheroptions"><code>attacher</code></a>s.</p>
<h6 id="example-10">Example</h6>
<p><code>move.js</code>:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb29-1" title="1"><span class="va">module</span>.<span class="at">exports</span> <span class="op">=</span> move</a>
<a class="sourceLine" id="cb29-2" title="2"></a>
<a class="sourceLine" id="cb29-3" title="3"><span class="kw">function</span> <span class="at">move</span>(options) <span class="op">{</span></a>
<a class="sourceLine" id="cb29-4" title="4">  <span class="kw">var</span> expected <span class="op">=</span> (options <span class="op">||</span> <span class="op">{}</span>).<span class="at">extname</span></a>
<a class="sourceLine" id="cb29-5" title="5"></a>
<a class="sourceLine" id="cb29-6" title="6">  <span class="cf">if</span> (<span class="op">!</span>expected) <span class="op">{</span></a>
<a class="sourceLine" id="cb29-7" title="7">    <span class="cf">throw</span> <span class="kw">new</span> <span class="at">Error</span>(<span class="st">&#39;Missing `extname` in options&#39;</span>)</a>
<a class="sourceLine" id="cb29-8" title="8">  <span class="op">}</span></a>
<a class="sourceLine" id="cb29-9" title="9"></a>
<a class="sourceLine" id="cb29-10" title="10">  <span class="cf">return</span> transformer</a>
<a class="sourceLine" id="cb29-11" title="11"></a>
<a class="sourceLine" id="cb29-12" title="12">  <span class="kw">function</span> <span class="at">transformer</span>(tree<span class="op">,</span> file) <span class="op">{</span></a>
<a class="sourceLine" id="cb29-13" title="13">    <span class="cf">if</span> (<span class="va">file</span>.<span class="at">extname</span> <span class="op">&amp;&amp;</span> <span class="va">file</span>.<span class="at">extname</span> <span class="op">!==</span> expected) <span class="op">{</span></a>
<a class="sourceLine" id="cb29-14" title="14">      <span class="va">file</span>.<span class="at">extname</span> <span class="op">=</span> expected</a>
<a class="sourceLine" id="cb29-15" title="15">    <span class="op">}</span></a>
<a class="sourceLine" id="cb29-16" title="16">  <span class="op">}</span></a>
<a class="sourceLine" id="cb29-17" title="17"><span class="op">}</span></a></code></pre></div>
<p><code>index.md</code>:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb30-1" title="1"><span class="fu"># Hello, world!</span></a></code></pre></div>
<p><code>index.js</code>:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb31-1" title="1"><span class="kw">var</span> unified <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;unified&#39;</span>)</a>
<a class="sourceLine" id="cb31-2" title="2"><span class="kw">var</span> parse <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-parse&#39;</span>)</a>
<a class="sourceLine" id="cb31-3" title="3"><span class="kw">var</span> remark2rehype <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark-rehype&#39;</span>)</a>
<a class="sourceLine" id="cb31-4" title="4"><span class="kw">var</span> stringify <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;rehype-stringify&#39;</span>)</a>
<a class="sourceLine" id="cb31-5" title="5"><span class="kw">var</span> vfile <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;to-vfile&#39;</span>)</a>
<a class="sourceLine" id="cb31-6" title="6"><span class="kw">var</span> report <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;vfile-reporter&#39;</span>)</a>
<a class="sourceLine" id="cb31-7" title="7"><span class="kw">var</span> move <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;./move&#39;</span>)</a>
<a class="sourceLine" id="cb31-8" title="8"></a>
<a class="sourceLine" id="cb31-9" title="9"><span class="at">unified</span>()</a>
<a class="sourceLine" id="cb31-10" title="10">  .<span class="at">use</span>(parse)</a>
<a class="sourceLine" id="cb31-11" title="11">  .<span class="at">use</span>(remark2rehype)</a>
<a class="sourceLine" id="cb31-12" title="12">  .<span class="at">use</span>(move<span class="op">,</span> <span class="op">{</span><span class="dt">extname</span><span class="op">:</span> <span class="st">&#39;.html&#39;</span><span class="op">}</span>)</a>
<a class="sourceLine" id="cb31-13" title="13">  .<span class="at">use</span>(stringify)</a>
<a class="sourceLine" id="cb31-14" title="14">  .<span class="at">process</span>(<span class="va">vfile</span>.<span class="at">readSync</span>(<span class="st">&#39;index.md&#39;</span>)<span class="op">,</span> <span class="kw">function</span> (err<span class="op">,</span> file) <span class="op">{</span></a>
<a class="sourceLine" id="cb31-15" title="15">    <span class="va">console</span>.<span class="at">error</span>(<span class="at">report</span>(err <span class="op">||</span> file))</a>
<a class="sourceLine" id="cb31-16" title="16">    <span class="cf">if</span> (file) <span class="op">{</span></a>
<a class="sourceLine" id="cb31-17" title="17">      <span class="va">vfile</span>.<span class="at">writeSync</span>(file) <span class="co">// Written to `index.html`.</span></a>
<a class="sourceLine" id="cb31-18" title="18">    <span class="op">}</span></a>
<a class="sourceLine" id="cb31-19" title="19">  <span class="op">}</span>)</a></code></pre></div>
<p>Yields:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode txt"><code class="sourceCode default"><a class="sourceLine" id="cb32-1" title="1">index.md: no issues found</a></code></pre></div>
<p><code>index.html</code>:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb33-1" title="1"><span class="kw">&lt;h1&gt;</span>Hello, world!<span class="kw">&lt;/h1&gt;</span></a></code></pre></div>
<h3 id="function-attacheroptions"><code>function attacher([options])</code></h3>
<p><strong>Attachers</strong> are materialized <a href="#plugin"><em>plugin</em></a>s. An attacher is a function that can receive options and <a href="#configuration"><em>configures</em></a> the processor.</p>
<p>Attachers change the processor, such as the <a href="#processorparser"><em>parser</em></a>, the <a href="#processorcompiler"><em>compiler</em></a>, configuring <a href="#processordatakey-value"><em>data</em></a>, or by specifying how the <a href="#syntax-trees"><em>syntax tree</em></a> or <a href="#file"><em>file</em></a> are handled.</p>
<h6 id="context">Context</h6>
<p>The context object (<code>this</code>) is set to the processor the attacher is applied on.</p>
<h6 id="parameters-10">Parameters</h6>
<ul>
<li><code>options</code> (<code>*</code>, optional) — Configuration</li>
</ul>
<h6 id="returns-10">Returns</h6>
<p><a href="#function-transformernode-file-next"><code>transformer</code></a> — Optional.</p>
<h6 id="note-8">Note</h6>
<p>Attachers are called when the processor is <a href="#processorfreeze"><em>frozen</em></a>, not when they are applied.</p>
<h3 id="function-transformernode-file-next"><code>function transformer(node, file[, next])</code></h3>
<p><strong>Transformers</strong> handle <a href="#syntax-trees"><em>syntax tree</em></a>s and <a href="#file"><em>file</em></a>s. A transformer is a function that is called each time a syntax tree and file are passed through the <a href="#description"><em>run phase</em></a>. If an error occurs (either because it’s thrown, returned, rejected, or passed to <a href="#function-nexterr-tree-file"><code>next</code></a>), the process stops.</p>
<p>The <em>run phase</em> is handled by <a href="https://github.com/wooorm/trough#function-fninput-next"><code>trough</code></a>, see its documentation for the exact semantics of these functions.</p>
<h6 id="parameters-11">Parameters</h6>
<ul>
<li><code>node</code> (<a href="https://github.com/syntax-tree/unist#node"><code>Node</code></a>) — <a href="#syntax-trees"><em>Syntax tree</em></a> to handle</li>
<li><code>file</code> (<a href="https://github.com/vfile/vfile"><code>VFile</code></a>) — <a href="#file"><em>File</em></a> to handle</li>
<li><code>next</code> (<a href="#function-nexterr-tree-file"><code>Function</code></a>, optional)</li>
</ul>
<h6 id="returns-11">Returns</h6>
<ul>
<li><code>void</code> — If nothing is returned, the next transformer keeps using same tree.</li>
<li><code>Error</code> — Fatal error to stop the process</li>
<li><code>node</code> (<a href="https://github.com/syntax-tree/unist#node"><code>Node</code></a>) — New <a href="#syntax-trees"><em>syntax tree</em></a>. If returned, the next transformer is given this new tree</li>
<li><code>Promise</code> — Returned to perform an asynchronous operation. The promise <strong>must</strong> be resolved (optionally with a <a href="https://github.com/syntax-tree/unist#node"><code>Node</code></a>) or rejected (optionally with an <code>Error</code>)</li>
</ul>
<h4 id="function-nexterr-tree-file"><code>function next(err[, tree[, file]])</code></h4>
<p>If the signature of a <a href="#function-transformernode-file-next"><em>transformer</em></a> includes <code>next</code> (the third argument), the transformer <strong>may</strong> perform asynchronous operations, and <strong>must</strong> call <code>next()</code>.</p>
<h6 id="parameters-12">Parameters</h6>
<ul>
<li><code>err</code> (<code>Error</code>, optional) — Fatal error to stop the process</li>
<li><code>node</code> (<a href="https://github.com/syntax-tree/unist#node"><code>Node</code></a>, optional) — New <a href="#syntax-trees"><em>syntax tree</em></a>. If given, the next transformer is given this new tree</li>
<li><code>file</code> (<a href="https://github.com/vfile/vfile"><code>VFile</code></a>, optional) — New <a href="#file"><em>file</em></a>. If given, the next transformer is given this new file</li>
</ul>
<h2 id="preset"><code>Preset</code></h2>
<p><strong>Presets</strong> are sharable <a href="#configuration"><em>configuration</em></a>. They can contain <a href="#plugin"><em>plugins</em></a> and settings.</p>
<h6 id="example-11">Example</h6>
<p><code>preset.js</code>:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb34-1" title="1"><span class="va">exports</span>.<span class="at">settings</span> <span class="op">=</span> <span class="op">{</span><span class="dt">bullet</span><span class="op">:</span> <span class="st">&#39;*&#39;</span><span class="op">,</span> <span class="dt">emphasis</span><span class="op">:</span> <span class="st">&#39;*&#39;</span><span class="op">,</span> <span class="dt">fences</span><span class="op">:</span> <span class="kw">true</span><span class="op">}</span></a>
<a class="sourceLine" id="cb34-2" title="2"></a>
<a class="sourceLine" id="cb34-3" title="3"><span class="va">exports</span>.<span class="at">plugins</span> <span class="op">=</span> [</a>
<a class="sourceLine" id="cb34-4" title="4">  <span class="at">require</span>(<span class="st">&#39;remark-preset-lint-recommended&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb34-5" title="5">  <span class="at">require</span>(<span class="st">&#39;remark-preset-lint-consistent&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb34-6" title="6">  <span class="at">require</span>(<span class="st">&#39;remark-comment-config&#39;</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb34-7" title="7">  [<span class="at">require</span>(<span class="st">&#39;remark-toc&#39;</span>)<span class="op">,</span> <span class="op">{</span><span class="dt">maxDepth</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span> <span class="dt">tight</span><span class="op">:</span> <span class="kw">true</span><span class="op">}</span>]<span class="op">,</span></a>
<a class="sourceLine" id="cb34-8" title="8">  <span class="at">require</span>(<span class="st">&#39;remark-license&#39;</span>)</a>
<a class="sourceLine" id="cb34-9" title="9">]</a></code></pre></div>
<p><code>readme.md</code>:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb35-1" title="1"><span class="fu"># Hello, world!</span></a>
<a class="sourceLine" id="cb35-2" title="2"></a>
<a class="sourceLine" id="cb35-3" title="3">_Emphasis_ and **importance**.</a>
<a class="sourceLine" id="cb35-4" title="4"></a>
<a class="sourceLine" id="cb35-5" title="5"><span class="fu">## Table of contents</span></a>
<a class="sourceLine" id="cb35-6" title="6"></a>
<a class="sourceLine" id="cb35-7" title="7"><span class="fu">## API</span></a>
<a class="sourceLine" id="cb35-8" title="8"></a>
<a class="sourceLine" id="cb35-9" title="9"><span class="fu">## License</span></a></code></pre></div>
<p><code>index.js</code>:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb36-1" title="1"><span class="kw">var</span> remark <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;remark&#39;</span>)</a>
<a class="sourceLine" id="cb36-2" title="2"><span class="kw">var</span> vfile <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;to-vfile&#39;</span>)</a>
<a class="sourceLine" id="cb36-3" title="3"><span class="kw">var</span> report <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;vfile-reporter&#39;</span>)</a>
<a class="sourceLine" id="cb36-4" title="4"><span class="kw">var</span> preset <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;./preset&#39;</span>)</a>
<a class="sourceLine" id="cb36-5" title="5"></a>
<a class="sourceLine" id="cb36-6" title="6"><span class="at">remark</span>()</a>
<a class="sourceLine" id="cb36-7" title="7">  .<span class="at">use</span>(preset)</a>
<a class="sourceLine" id="cb36-8" title="8">  .<span class="at">process</span>(<span class="va">vfile</span>.<span class="at">readSync</span>(<span class="st">&#39;readme.md&#39;</span>)<span class="op">,</span> <span class="kw">function</span> (err<span class="op">,</span> file) <span class="op">{</span></a>
<a class="sourceLine" id="cb36-9" title="9">    <span class="va">console</span>.<span class="at">error</span>(<span class="at">report</span>(err <span class="op">||</span> file))</a>
<a class="sourceLine" id="cb36-10" title="10"></a>
<a class="sourceLine" id="cb36-11" title="11">    <span class="cf">if</span> (file) <span class="op">{</span></a>
<a class="sourceLine" id="cb36-12" title="12">      <span class="va">vfile</span>.<span class="at">writeSync</span>(file)</a>
<a class="sourceLine" id="cb36-13" title="13">    <span class="op">}</span></a>
<a class="sourceLine" id="cb36-14" title="14">  <span class="op">}</span>)</a></code></pre></div>
<p>Yields:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode txt"><code class="sourceCode default"><a class="sourceLine" id="cb37-1" title="1">readme.md: no issues found</a></code></pre></div>
<p><code>readme.md</code> now contains:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode markdown"><code class="sourceCode markdown"><a class="sourceLine" id="cb38-1" title="1"><span class="fu"># Hello, world!</span></a>
<a class="sourceLine" id="cb38-2" title="2"></a>
<a class="sourceLine" id="cb38-3" title="3">*Emphasis* and **importance**.</a>
<a class="sourceLine" id="cb38-4" title="4"></a>
<a class="sourceLine" id="cb38-5" title="5"><span class="fu">## Table of contents</span></a>
<a class="sourceLine" id="cb38-6" title="6"></a>
<a class="sourceLine" id="cb38-7" title="7">* <span class="fl">  </span><span class="ot">[API](#api)</span></a>
<a class="sourceLine" id="cb38-8" title="8"><span class="fl">*   </span><span class="ot">[License](#license)</span></a>
<a class="sourceLine" id="cb38-9" title="9"></a>
<a class="sourceLine" id="cb38-10" title="10"><span class="fu">## API</span></a>
<a class="sourceLine" id="cb38-11" title="11"></a>
<a class="sourceLine" id="cb38-12" title="12"><span class="fu">## License</span></a>
<a class="sourceLine" id="cb38-13" title="13"></a>
<a class="sourceLine" id="cb38-14" title="14"><span class="ot">[MIT](license)</span> © <span class="ot">[Titus Wormer](https://wooorm.com)</span></a></code></pre></div>
<h2 id="contribute">Contribute</h2>
<p>See <a href="https://github.com/unifiedjs/.github/blob/HEAD/contributing.md"><code>contributing.md</code></a> in <a href="https://github.com/unifiedjs/.github"><code>unifiedjs/.github</code></a> for ways to get started. See <a href="https://github.com/unifiedjs/.github/blob/HEAD/support.md"><code>support.md</code></a> for ways to get help. Ideas for new plugins and tools can be posted in <a href="https://github.com/unifiedjs/ideas"><code>unifiedjs/ideas</code></a>.</p>
<p>A curated list of awesome unified resources can be found in <a href="https://github.com/unifiedjs/awesome-unified"><strong>awesome unified</strong></a>.</p>
<p>This project has a <a href="https://github.com/unifiedjs/.github/blob/HEAD/code-of-conduct.md">code of conduct</a>. By interacting with this repository, organization, or community you agree to abide by its terms.</p>
<h2 id="acknowledgments">Acknowledgments</h2>
<p>Preliminary work for unified was done <a href="https://github.com/retextjs/retext/commit/8fcb1f#diff-168726dbe96b3ce427e7fedce31bb0bc">in 2014</a> for <a href="https://github.com/retextjs/retext"><strong>retext</strong></a> and inspired by <a href="https://github.com/segmentio/ware"><code>ware</code></a>. Further incubation happened in <a href="https://github.com/remarkjs/remark"><strong>remark</strong></a>. The project was finally <a href="https://github.com/remarkjs/remark/commit/9892ec#diff-168726dbe96b3ce427e7fedce31bb0bc">externalised</a> in 2015 and <a href="https://github.com/unifiedjs/unified/commit/2ba1cf">published</a> as <code>unified</code>. The project was authored by <a href="https://github.com/wooorm"><strong><span class="citation" data-cites="wooorm">@wooorm</span></strong></a>.</p>
<p>Although <code>unified</code> since moved its plugin architecture to <a href="https://github.com/wooorm/trough#function-fninput-next"><code>trough</code></a>, thanks to <a href="https://github.com/calvinfo"><strong><span class="citation" data-cites="calvinfo">@calvinfo</span></strong></a>, <a href="https://github.com/ianstormtaylor"><strong><span class="citation" data-cites="ianstormtaylor">@ianstormtaylor</span></strong></a>, and others for their work on <a href="https://github.com/segmentio/ware"><code>ware</code></a>, as it was a huge initial inspiration.</p>
<h2 id="license">License</h2>
<p><a href="license">MIT</a> © <a href="https://wooorm.com">Titus Wormer</a></p>
<!-- Definitions -->
</body>
</html>
