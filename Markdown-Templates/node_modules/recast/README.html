<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="recast-v.-build-status-join-the-chat-at-httpsgitter.imbenjamnrecast-greenkeeper-badge">recast, <em>v</em>. <a href="https://travis-ci.org/benjamn/recast"><img src="https://travis-ci.org/benjamn/recast.svg?branch=master" alt="Build Status" /></a> <a href="https://gitter.im/benjamn/recast?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://badges.gitter.im/Join%20Chat.svg" alt="Join the chat at https://gitter.im/benjamn/recast" /></a> <a href="https://greenkeeper.io/"><img src="https://badges.greenkeeper.io/benjamn/recast.svg" alt="Greenkeeper badge" /></a></h1>
<ol type="1">
<li>to give (a metal object) a different form by melting it down and reshaping it.</li>
<li>to form, fashion, or arrange again.</li>
<li>to remodel or reconstruct (a literary work, document, sentence, etc.).</li>
<li>to supply (a theater or opera work) with a new cast.</li>
</ol>
<h2 id="installation">Installation</h2>
<p>From NPM:</p>
<pre><code>npm install recast</code></pre>
<p>From GitHub:</p>
<pre><code>cd path/to/node_modules
git clone git://github.com/benjamn/recast.git
cd recast
npm install .</code></pre>
<h2 id="import-style">Import style</h2>
<p>Recast is designed to be imported using <strong>named</strong> imports:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="im">import</span> <span class="op">{</span> parse<span class="op">,</span> print <span class="op">}</span> <span class="im">from</span> <span class="st">&quot;recast&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="va">console</span>.<span class="at">log</span>(<span class="at">print</span>(<span class="at">parse</span>(source)).<span class="at">code</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-3" title="3"></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="im">import</span> <span class="op">*</span> <span class="im">as</span> recast <span class="im">from</span> <span class="st">&quot;recast&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="va">console</span>.<span class="at">log</span>(<span class="va">recast</span>.<span class="at">print</span>(<span class="va">recast</span>.<span class="at">parse</span>(source)).<span class="at">code</span>)<span class="op">;</span></a></code></pre></div>
<p>If you’re using CommonJS:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">const</span> <span class="op">{</span> parse<span class="op">,</span> print <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&quot;recast&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="va">console</span>.<span class="at">log</span>(<span class="at">print</span>(<span class="at">parse</span>(source)).<span class="at">code</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-3" title="3"></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="kw">const</span> recast <span class="op">=</span> <span class="at">require</span>(<span class="st">&quot;recast&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="va">console</span>.<span class="at">log</span>(<span class="va">recast</span>.<span class="at">print</span>(<span class="va">recast</span>.<span class="at">parse</span>(source)).<span class="at">code</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="usage">Usage</h2>
<p>Recast exposes two essential interfaces, one for parsing JavaScript code (<code>require("recast").parse</code>) and the other for reprinting modified syntax trees (<code>require("recast").print</code>).</p>
<p>Here’s a simple but non-trivial example of how you might use <code>.parse</code> and <code>.print</code>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="im">import</span> <span class="op">*</span> <span class="im">as</span> recast <span class="im">from</span> <span class="st">&quot;recast&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-2" title="2"></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="co">// Let&#39;s turn this function declaration into a variable declaration.</span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="kw">const</span> code <span class="op">=</span> [</a>
<a class="sourceLine" id="cb5-5" title="5">  <span class="st">&quot;function add(a, b) {&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-6" title="6">  <span class="st">&quot;  return a +&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-7" title="7">  <span class="st">&quot;    // Weird formatting, huh?&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-8" title="8">  <span class="st">&quot;    b;&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb5-9" title="9">  <span class="st">&quot;}&quot;</span></a>
<a class="sourceLine" id="cb5-10" title="10">].<span class="at">join</span>(<span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-11" title="11"></a>
<a class="sourceLine" id="cb5-12" title="12"><span class="co">// Parse the code using an interface similar to require(&quot;esprima&quot;).parse.</span></a>
<a class="sourceLine" id="cb5-13" title="13"><span class="kw">const</span> ast <span class="op">=</span> <span class="va">recast</span>.<span class="at">parse</span>(code)<span class="op">;</span></a></code></pre></div>
<p>Now do <em>whatever</em> you want to <code>ast</code>. Really, anything at all!</p>
<p>See <a href="https://github.com/benjamn/ast-types">ast-types</a> (especially the <a href="https://github.com/benjamn/ast-types/blob/master/def/core.ts">def/core.ts</a>) module for a thorough overview of the <code>ast</code> API.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="co">// Grab a reference to the function declaration we just parsed.</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="kw">const</span> add <span class="op">=</span> <span class="va">ast</span>.<span class="va">program</span>.<span class="at">body</span>[<span class="dv">0</span>]<span class="op">;</span></a>
<a class="sourceLine" id="cb6-3" title="3"></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="co">// Make sure it&#39;s a FunctionDeclaration (optional).</span></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="kw">const</span> n <span class="op">=</span> <span class="va">recast</span>.<span class="va">types</span>.<span class="at">namedTypes</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="va">n</span>.<span class="va">FunctionDeclaration</span>.<span class="at">assert</span>(add)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-7" title="7"></a>
<a class="sourceLine" id="cb6-8" title="8"><span class="co">// If you choose to use recast.builders to construct new AST nodes, all builder</span></a>
<a class="sourceLine" id="cb6-9" title="9"><span class="co">// arguments will be dynamically type-checked against the Mozilla Parser API.</span></a>
<a class="sourceLine" id="cb6-10" title="10"><span class="kw">const</span> b <span class="op">=</span> <span class="va">recast</span>.<span class="va">types</span>.<span class="at">builders</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-11" title="11"></a>
<a class="sourceLine" id="cb6-12" title="12"><span class="co">// This kind of manipulation should seem familiar if you&#39;ve used Esprima or the</span></a>
<a class="sourceLine" id="cb6-13" title="13"><span class="co">// Mozilla Parser API before.</span></a>
<a class="sourceLine" id="cb6-14" title="14"><span class="va">ast</span>.<span class="va">program</span>.<span class="at">body</span>[<span class="dv">0</span>] <span class="op">=</span> <span class="va">b</span>.<span class="at">variableDeclaration</span>(<span class="st">&quot;var&quot;</span><span class="op">,</span> [</a>
<a class="sourceLine" id="cb6-15" title="15">  <span class="va">b</span>.<span class="at">variableDeclarator</span>(<span class="va">add</span>.<span class="at">id</span><span class="op">,</span> <span class="va">b</span>.<span class="at">functionExpression</span>(</a>
<a class="sourceLine" id="cb6-16" title="16">    <span class="kw">null</span><span class="op">,</span> <span class="co">// Anonymize the function expression.</span></a>
<a class="sourceLine" id="cb6-17" title="17">    <span class="va">add</span>.<span class="at">params</span><span class="op">,</span></a>
<a class="sourceLine" id="cb6-18" title="18">    <span class="va">add</span>.<span class="at">body</span></a>
<a class="sourceLine" id="cb6-19" title="19">  ))</a>
<a class="sourceLine" id="cb6-20" title="20">])<span class="op">;</span></a>
<a class="sourceLine" id="cb6-21" title="21"></a>
<a class="sourceLine" id="cb6-22" title="22"><span class="co">// Just for fun, because addition is commutative:</span></a>
<a class="sourceLine" id="cb6-23" title="23"><span class="va">add</span>.<span class="va">params</span>.<span class="at">push</span>(<span class="va">add</span>.<span class="va">params</span>.<span class="at">shift</span>())<span class="op">;</span></a></code></pre></div>
<p>When you finish manipulating the AST, let <code>recast.print</code> work its magic:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">const</span> output <span class="op">=</span> <span class="va">recast</span>.<span class="at">print</span>(ast).<span class="at">code</span><span class="op">;</span></a></code></pre></div>
<p>The <code>output</code> string now looks exactly like this, weird formatting and all:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">var</span> add <span class="op">=</span> <span class="kw">function</span>(b<span class="op">,</span> a) <span class="op">{</span></a>
<a class="sourceLine" id="cb8-2" title="2">  <span class="cf">return</span> a <span class="op">+</span></a>
<a class="sourceLine" id="cb8-3" title="3">    <span class="co">// Weird formatting, huh?</span></a>
<a class="sourceLine" id="cb8-4" title="4">    b<span class="op">;</span></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="op">}</span></a></code></pre></div>
<p>The magic of Recast is that it reprints only those parts of the syntax tree that you modify. In other words, the following identity is guaranteed:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="va">recast</span>.<span class="at">print</span>(<span class="va">recast</span>.<span class="at">parse</span>(source)).<span class="at">code</span> <span class="op">===</span> source</a></code></pre></div>
<p>Whenever Recast cannot reprint a modified node using the original source code, it falls back to using a generic pretty printer. So the worst that can happen is that your changes trigger some harmless reformatting of your code.</p>
<p>If you really don’t care about preserving the original formatting, you can access the pretty printer directly:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">var</span> output <span class="op">=</span> <span class="va">recast</span>.<span class="at">prettyPrint</span>(ast<span class="op">,</span> <span class="op">{</span> <span class="dt">tabWidth</span><span class="op">:</span> <span class="dv">2</span> <span class="op">}</span>).<span class="at">code</span><span class="op">;</span></a></code></pre></div>
<p>And here’s the exact <code>output</code>:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">var</span> add <span class="op">=</span> <span class="kw">function</span>(b<span class="op">,</span> a) <span class="op">{</span></a>
<a class="sourceLine" id="cb11-2" title="2">  <span class="cf">return</span> a <span class="op">+</span> b<span class="op">;</span></a>
<a class="sourceLine" id="cb11-3" title="3"><span class="op">}</span></a></code></pre></div>
<p>Note that the weird formatting was discarded, yet the behavior and abstract structure of the code remain the same.</p>
<h2 id="using-a-different-parser">Using a different parser</h2>
<p>By default, Recast uses the <a href="https://www.npmjs.com/package/esprima">Esprima JavaScript parser</a> when you call <code>recast.parse(code)</code>. While Esprima supports almost all modern ECMAScript syntax, you may want to use a different parser to enable TypeScript or Flow syntax, or just because you want to match other compilation tools you might be using.</p>
<p>In order to get any benefits from Recast’s conservative pretty-printing, <strong>it is very important that you continue to call <code>recast.parse</code></strong> (rather than parsing the AST yourself using a different parser), and simply instruct <code>recast.parse</code> to use a different parser:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">const</span> acornAst <span class="op">=</span> <span class="va">recast</span>.<span class="at">parse</span>(source<span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb12-2" title="2">  <span class="dt">parser</span><span class="op">:</span> <span class="at">require</span>(<span class="st">&quot;acorn&quot;</span>)</a>
<a class="sourceLine" id="cb12-3" title="3"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>Why is this so important? When you call <code>recast.parse</code>, it makes a shadow copy of the AST before returning it to you, giving every copied AST node a reference back to the original through a special <code>.original</code> property. This information is what enables <code>recast.print</code> to detect where the AST has been modified, so that it can preserve formatting for parts of the AST that were not modified.</p>
<p>Any <code>parser</code> object that supports a <code>parser.parse(source)</code> method will work here; however, if your parser requires additional options, you can always implement your own <code>parse</code> method that invokes your parser with custom options:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb13-1" title="1"><span class="kw">const</span> acornAst <span class="op">=</span> <span class="va">recast</span>.<span class="at">parse</span>(source<span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb13-2" title="2">  <span class="dt">parser</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb13-3" title="3">    <span class="at">parse</span>(source) <span class="op">{</span></a>
<a class="sourceLine" id="cb13-4" title="4">      <span class="cf">return</span> <span class="at">require</span>(<span class="st">&quot;acorn&quot;</span>).<span class="at">parse</span>(source<span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb13-5" title="5">        <span class="co">// additional options</span></a>
<a class="sourceLine" id="cb13-6" title="6">      <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb13-7" title="7">    <span class="op">}</span></a>
<a class="sourceLine" id="cb13-8" title="8">  <span class="op">}</span></a>
<a class="sourceLine" id="cb13-9" title="9"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>To take some of the guesswork out of configuring common parsers, Recast provides <a href="https://github.com/benjamn/recast/tree/master/parsers">several preconfigured parsers</a>, so you can parse TypeScript (for example) without worrying about the configuration details:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb14-1" title="1"><span class="kw">const</span> tsAst <span class="op">=</span> <span class="va">recast</span>.<span class="at">parse</span>(source<span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb14-2" title="2">  <span class="dt">parser</span><span class="op">:</span> <span class="at">require</span>(<span class="st">&quot;recast/parsers/typescript&quot;</span>)</a>
<a class="sourceLine" id="cb14-3" title="3"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p><strong>Note:</strong> Some of these parsers import npm packages that Recast does not directly depend upon, so please be aware you may have to run <code>npm install babylon@next</code> to use the <code>typescript</code>, <code>flow</code>, or <code>babylon</code> parsers, or <code>npm install acorn</code> to use the <code>acorn</code> parser. Only Esprima is installed by default when Recast is installed.</p>
<h2 id="source-maps">Source maps</h2>
<p>One of the coolest consequences of tracking and reusing original source code during reprinting is that it’s pretty easy to generate a high-resolution mapping between the original code and the generated code—completely automatically!</p>
<p>With every <code>slice</code>, <code>join</code>, and re-<code>indent</code>-ation, the reprinting process maintains exact knowledge of which character sequences are original, and where in the original source they came from.</p>
<p>All you have to think about is how to manipulate the syntax tree, and Recast will give you a <a href="https://github.com/mozilla/source-map">source map</a> in exchange for specifying the names of your source file(s) and the desired name of the map:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb15-1" title="1"><span class="kw">var</span> result <span class="op">=</span> <span class="va">recast</span>.<span class="at">print</span>(<span class="at">transform</span>(<span class="va">recast</span>.<span class="at">parse</span>(source<span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb15-2" title="2">  <span class="dt">sourceFileName</span><span class="op">:</span> <span class="st">&quot;source.js&quot;</span></a>
<a class="sourceLine" id="cb15-3" title="3"><span class="op">}</span>))<span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb15-4" title="4">  <span class="dt">sourceMapName</span><span class="op">:</span> <span class="st">&quot;map.json&quot;</span></a>
<a class="sourceLine" id="cb15-5" title="5"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-6" title="6">    </a>
<a class="sourceLine" id="cb15-7" title="7"><span class="va">console</span>.<span class="at">log</span>(<span class="va">result</span>.<span class="at">code</span>)<span class="op">;</span> <span class="co">// Resulting string of code.</span></a>
<a class="sourceLine" id="cb15-8" title="8"><span class="va">console</span>.<span class="at">log</span>(<span class="va">result</span>.<span class="at">map</span>)<span class="op">;</span> <span class="co">// JSON source map.</span></a>
<a class="sourceLine" id="cb15-9" title="9"></a>
<a class="sourceLine" id="cb15-10" title="10"><span class="kw">var</span> SourceMapConsumer <span class="op">=</span> <span class="at">require</span>(<span class="st">&quot;source-map&quot;</span>).<span class="at">SourceMapConsumer</span><span class="op">;</span></a>
<a class="sourceLine" id="cb15-11" title="11"><span class="kw">var</span> smc <span class="op">=</span> <span class="kw">new</span> <span class="at">SourceMapConsumer</span>(<span class="va">result</span>.<span class="at">map</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-12" title="12"><span class="va">console</span>.<span class="at">log</span>(<span class="va">smc</span>.<span class="at">originalPositionFor</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb15-13" title="13">  <span class="dt">line</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span></a>
<a class="sourceLine" id="cb15-14" title="14">  <span class="dt">column</span><span class="op">:</span> <span class="dv">15</span></a>
<a class="sourceLine" id="cb15-15" title="15"><span class="op">}</span>))<span class="op">;</span> <span class="co">// { source: &#39;source.js&#39;,</span></a>
<a class="sourceLine" id="cb15-16" title="16">     <span class="co">//   line: 2,</span></a>
<a class="sourceLine" id="cb15-17" title="17">     <span class="co">//   column: 10,</span></a>
<a class="sourceLine" id="cb15-18" title="18">     <span class="co">//   name: null }</span></a></code></pre></div>
<p>Note that you are free to mix and match syntax trees parsed from different source files, and the resulting source map will automatically keep track of the separate file origins for you.</p>
<p>Note also that the source maps generated by Recast are character-by-character maps, so meaningful identifier names are not recorded at this time. This approach leads to higher-resolution debugging in modern browsers, at the expense of somewhat larger map sizes. Striking the perfect balance here is an area for future exploration, but such improvements will not require any breaking changes to the interface demonstrated above.</p>
<h2 id="options">Options</h2>
<p>All Recast API functions take second parameter with configuration options, documented in <a href="https://github.com/benjamn/recast/blob/master/lib/options.ts">options.ts</a></p>
<h2 id="motivation">Motivation</h2>
<p>The more code you have, the harder it becomes to make big, sweeping changes quickly and confidently. Even if you trust yourself not to make too many mistakes, and no matter how proficient you are with your text editor, changing tens of thousands of lines of code takes precious, non-refundable time.</p>
<p>Is there a better way? Not always! When a task requires you to alter the semantics of many different pieces of code in subtly different ways, your brain inevitably becomes the bottleneck, and there is little hope of completely automating the process. Your best bet is to plan carefully, buckle down, and get it right the first time. Love it or loathe it, that’s the way programming goes sometimes.</p>
<p>What I hope to eliminate are the brain-wasting tasks, the tasks that are bottlenecked by keystrokes, the tasks that can be expressed as operations on the <em>syntactic structure</em> of your code. Specifically, my goal is to make it possible for you to run your code through a parser, manipulate the abstract syntax tree directly, subject only to the constraints of your imagination, and then automatically translate those modifications back into source code, without upsetting the formatting of unmodified code.</p>
<p>And here’s the best part: when you’re done running a Recast script, if you’re not completely satisfied with the results, blow them away with <code>git reset --hard</code>, tweak the script, and just run it again. Change your mind as many times as you like. Instead of typing yourself into a nasty case of <a href="http://en.wikipedia.org/wiki/Repetitive_strain_injury">RSI</a>, gaze upon your new wells of free time and ask yourself: what next?</p>
</body>
</html>
