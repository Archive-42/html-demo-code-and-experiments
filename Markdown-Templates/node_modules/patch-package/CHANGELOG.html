<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>CHANGELOG</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<h1 id="changelog">Changelog</h1>
<h2 id="section">6.4.7</h2>
<ul>
<li>Use npm i ‚Äìforce when creating patches</li>
</ul>
<h2 id="section-1">6.4.6</h2>
<ul>
<li>Update find-yarn-workspace-root (contribution from <span class="citation" data-cites="sarimarton">@sarimarton</span> in #282)</li>
<li>Fix rare npm crash when creating patches (contribution from <span class="citation" data-cites="kf6kjg">@kf6kjg</span> in #271)</li>
</ul>
<h2 id="section-2">6.4.5</h2>
<ul>
<li>Increase max pipe buffer size when creating patch. (contribution from <span class="citation" data-cites="nomi9995">@nomi9995</span> in #287)</li>
</ul>
<h2 id="section-3">6.4.4</h2>
<ul>
<li>Refine ‚Äìcreate-issue template</li>
</ul>
<h2 id="section-4">6.4.3</h2>
<ul>
<li>Ensure real path is used when copying package contents. Potentially adds pnpm support (contribution from <span class="citation" data-cites="milahu">@milahu</span> in #252)</li>
</ul>
<h2 id="section-5">6.4.2</h2>
<ul>
<li>Add package version to ‚Äìcreate-issue template</li>
</ul>
<h2 id="section-6">6.4.1</h2>
<ul>
<li>Add backlink to patch-package repo to collect public usage of ‚Äìcreate-issue</li>
</ul>
<h2 id="section-7">6.4.0</h2>
<ul>
<li>Add ‚Äìcreate-issue option</li>
</ul>
<h2 id="section-8">6.3.1</h2>
<ul>
<li>Fix another createPatch bug involving .git folder hygiene (contribution from <span class="citation" data-cites="gomain">@gomain</span> in #258)</li>
</ul>
<h2 id="section-9">6.3.0</h2>
<ul>
<li>Add ‚Äìerror-on-fail cli option</li>
<li>Collate errors and warnings to avoid exiting early (with help from <span class="citation" data-cites="akwodkiewicz">@akwodkiewicz</span> in #217)</li>
<li>Fix .dev.patch suffix bug (with help from <span class="citation" data-cites="pdcastro">@pdcastro</span> in #224)</li>
<li>Support build metadata in package.json version strings (with help from <span class="citation" data-cites="snowystinger">@snowystinger</span> in #213)</li>
<li>Change ‚Äòno patch files found‚Äô message from red to blue (contribution from <span class="citation" data-cites="dmhalejr">@dmhalejr</span> in #211)</li>
<li>Fix environment variable propogation for spawned tasks (contribution from <span class="citation" data-cites="chpio">@chpio</span> in #223)</li>
<li>Add ‚Äìpatch-dir option to readme (contribution from <span class="citation" data-cites="mikehardy">@mikehardy</span> in #225)</li>
<li>Fix createPatch bug involving .git folder hygiene (contribution from <span class="citation" data-cites="haroenv">@haroenv</span> in #231)</li>
</ul>
<h2 id="section-10">6.2.2</h2>
<ul>
<li>Take config from .yarnrc when making patches (contribution from <span class="citation" data-cites="NMinhNguyen">@NMinhNguyen</span> in #222)</li>
</ul>
<h2 id="section-11">6.2.1</h2>
<ul>
<li>Avoid infinite loop when invoked without package.json</li>
<li>Fall back to version in package-lock (contribution from <span class="citation" data-cites="bschlenk">@bschlenk</span> in #206)</li>
<li>Add tips about Docker and CI to README (contribution from <span class="citation" data-cites="harriha">@harriha</span> in #208)</li>
<li>Remove update notifier (contribution from <span class="citation" data-cites="christianbundy">@christianbundy</span> in #196)</li>
<li>Add github actions checks (contribution from <span class="citation" data-cites="asadm">@asadm</span> in #186 and <span class="citation" data-cites="DanielRuf">@DanielRuf</span> in #188, #187)</li>
<li>Fix url in README (contribution from <span class="citation" data-cites="DanielRuf">@DanielRuf</span> in #184)</li>
<li>Upgrade node in CI to 12 (contribution from <span class="citation" data-cites="DanielRuf">@DanielRuf</span> in #183)</li>
</ul>
<h2 id="section-12">6.2.0</h2>
<ul>
<li>Add support for dev-only patches (#159 again)</li>
</ul>
<h2 id="section-13">6.1.4</h2>
<ul>
<li>Use ‚Äìignore-scripts when making patches if it fails without (#151)</li>
</ul>
<h2 id="section-14">6.1.3</h2>
<ul>
<li>Fail when patches are found for uninstalled packages (#159)</li>
<li>Support private registries declared in .npmrc (Contribution from <span class="citation" data-cites="cherniavskii">@cherniavskii</span> in #152)</li>
</ul>
<h2 id="section-15">6.1.2</h2>
<ul>
<li>Explicitly handle failure edge case where symlinks are modified/created (#118)</li>
</ul>
<h2 id="section-16">6.1.1</h2>
<ul>
<li>Fix npm edge case of package installed from url (#134)</li>
</ul>
<h2 id="section-17">6.1.0</h2>
<ul>
<li>Add support for yarn workspaces</li>
<li>Degrade ‚Äòfile mode change not required‚Äô error to warning</li>
</ul>
<h2 id="section-18">6.0.7</h2>
<ul>
<li>Don‚Äôt try to detect package manager on patch application (#133)</li>
</ul>
<h2 id="section-19">6.0.6</h2>
<ul>
<li>Better error messages for patch parse failures (#131)</li>
</ul>
<h2 id="section-20">6.0.5</h2>
<ul>
<li>Use lockfiles to get package resolutions.</li>
</ul>
<h2 id="section-21">6.0.4</h2>
<ul>
<li>Fix patch parsing issue affecting windows (#124)</li>
</ul>
<h2 id="section-22">6.0.3</h2>
<ul>
<li>Allow relative file paths for ‚Äìpatch-dir (Contribution from <span class="citation" data-cites="lots0logs">@lots0logs</span> in #119)</li>
<li>Fix version string handling (Contribution from <span class="citation" data-cites="teppeis">@teppeis</span> in #122)</li>
<li>Add support for custom resolutions field in app‚Äôs package.json (#125)</li>
<li>Fix property access bug (#123)</li>
<li>Move <span class="citation" data-cites="types/is-ci">@types/is-ci</span> from dependencies to devDependencies (#121)</li>
</ul>
<h2 id="section-23">6.0.2</h2>
<ul>
<li>Revert failure exit code when no patches are found.</li>
</ul>
<h2 id="section-24">6.0.1</h2>
<ul>
<li>Document ‚Äìpatch-dir option in readme</li>
</ul>
<h2 id="section-25">6.0.0</h2>
<h3 id="highlights">Highlights!</h3>
<ul>
<li>No longer dependent on Git to apply patches</li>
<li>Patch files are created much much much faster üèÉüèΩ‚Äç‚ôÄÔ∏èüí®</li>
<li>Fixed lots of small bugs</li>
<li>Explicit support for nested packages</li>
</ul>
<p>For full details see the prerelease notes.</p>
<h2 id="section-26">6.0.0-18</h2>
<ul>
<li>Allow fuzzy patch hunk application.</li>
<li>Minor UI tweaks</li>
<li>Ignore global git config to prevent issues like #109 &amp; #115</li>
<li>Add ‚Äìignore-engines to yarn invocation</li>
</ul>
<h2 id="section-27">6.0.0-17</h2>
<ul>
<li>Fix the removal of old patch files when creating new ones.</li>
</ul>
<h2 id="section-28">6.0.0-16</h2>
<ul>
<li>Fail postinstall only on CI to prevent weird upgrade issues locally (see #86)</li>
<li>Fail if no patches are present</li>
</ul>
<h2 id="section-29">6.0.0-15</h2>
<ul>
<li>Handle mode changes</li>
<li>Backwards-compatible patch file parsing</li>
</ul>
<h2 id="section-30">6.0.0-14</h2>
<ul>
<li>Handle renaming files properly</li>
</ul>
<h2 id="section-31">6.0.0-13</h2>
<ul>
<li>Handle large diffs by not calling .toString on stdout buffer</li>
<li>Git usage fixes</li>
</ul>
<h2 id="section-32">6.0.0-12</h2>
<ul>
<li>Support explicit nested package patching</li>
<li>Improve performance of patch creation</li>
</ul>
<h2 id="section-33">6.0.0-11</h2>
<ul>
<li>Handle crlf line breaks in patch parser (Contribution from <span class="citation" data-cites="NMinhNguyen">@NMinhNguyen</span>)</li>
</ul>
<h2 id="section-34">6.0.0-10</h2>
<ul>
<li>Add ‚Äìpatches-dir option (Contribution from <span class="citation" data-cites="davidpett">@davidpett</span>)</li>
</ul>
<h2 id="section-35">6.0.0-9</h2>
<ul>
<li>Fix patch application bug when creating new files (Contribution from
<ol class="example" type="1">
<li></li>
</ol></li>
</ul>
<h2 id="section-36">6.0.0-8</h2>
<ul>
<li>Improve diffing speed (Contribution from <span class="citation" data-cites="KevinVlaanderen">@KevinVlaanderen</span>)</li>
</ul>
<h2 id="section-37">6.0.0-7</h2>
<ul>
<li>Use ‚Äìno-ext-diff option when generating diffs (Contribution from <span class="citation" data-cites="janv">@janv</span>)</li>
</ul>
<h2 id="section-38">6.0.0-6</h2>
<ul>
<li>Make include/exclude regexes applied relative to the package root. Fixes #54</li>
</ul>
<h2 id="section-39">6.0.0-5</h2>
<ul>
<li>Fix preventing scripts from running when making patch file</li>
</ul>
<h2 id="section-40">6.0.0-4</h2>
<ul>
<li>Don‚Äôt delete package.json during patch creation</li>
</ul>
<h2 id="section-41">6.0.0-3</h2>
<ul>
<li>Bugfixes for patch application</li>
<li>Prevent scripts from running when making patch file</li>
</ul>
<h2 id="section-42">6.0.0-2</h2>
<ul>
<li>Bugfixes for patch application</li>
</ul>
<h2 id="section-43">6.0.0-1</h2>
<ul>
<li>Bugfixes for patch application</li>
</ul>
<h2 id="section-44">6.0.0-0</h2>
<ul>
<li>Reimplement most of patch application in TypeScript</li>
</ul>
<h2 id="section-45">5.1.1</h2>
<ul>
<li>Fix idempotency regression. See #39</li>
</ul>
<h2 id="section-46">5.1.0</h2>
<ul>
<li>Add <code>--reverse</code> option for patch application. See #37</li>
</ul>
<h2 id="section-47">5.0.0</h2>
<ul>
<li>Remove yarn patching code</li>
<li>Recommend postinstall-prepare in README for yarn compatibility</li>
</ul>
<h2 id="section-48">4.0.0</h2>
<ul>
<li>Ignore all package.json files by default</li>
<li>Exit with appropriate error when git is not available</li>
</ul>
<h2 id="section-49">3.6.1</h2>
<ul>
<li>Fix bug where patch-package was complaining about failing when it had, in fact, succeeded. See #31</li>
</ul>
<h2 id="section-50">3.6.0</h2>
<ul>
<li>Remove git headers from patch files to prevent git from thinking files are part of the index</li>
</ul>
<h2 id="section-51">3.5.3</h2>
<ul>
<li>Change the way patch files are re-written when the project root dir is not the same as the git root dir.</li>
<li>Remove redundant windows warning about whitespace</li>
</ul>
<h2 id="section-52">3.5.2</h2>
<ul>
<li>Update README</li>
</ul>
<h2 id="section-53">3.5.1</h2>
<ul>
<li>Ignore end-of-line whitespace when creating and applying patch files</li>
</ul>
<h2 id="section-54">3.5.0</h2>
<ul>
<li>Add support for filtering particular paths</li>
</ul>
<h2 id="section-55">3.4.6</h2>
<ul>
<li>Ensure use of unix-style paths everywhere</li>
</ul>
<h2 id="section-56">3.4.5</h2>
<ul>
<li>Fix description of a hunk in error message</li>
</ul>
<h2 id="section-57">3.4.4</h2>
<ul>
<li>Don‚Äôt use <code>git apply</code> with <code>--unsafe-paths</code> since it is useless.</li>
</ul>
<h2 id="section-58">3.4.3</h2>
<ul>
<li>Fix typo in error message</li>
</ul>
<h2 id="section-59">3.4.2</h2>
<ul>
<li>Revert previous fix and suggest editing .gitattributes as an alternative</li>
</ul>
<h2 id="section-60">3.4.1</h2>
<ul>
<li>Fix CRLF handling on Windows</li>
</ul>
<h2 id="section-61">3.4.0</h2>
<ul>
<li>Add npm shrinkwrap support</li>
</ul>
<h2 id="section-62">3.3.6</h2>
<ul>
<li>Use posix paths and line separators even on windows, for git‚Äôs sake.</li>
</ul>
<h2 id="section-63">3.3.5</h2>
<ul>
<li>Resolve paths in patch files for situations where the git root is not the same as the app root.</li>
</ul>
<h2 id="section-64">3.3.4</h2>
<ul>
<li>Pass ‚Äìunsafe-paths option to <code>git apply</code> to let it work on arbitrary file paths (i.e.¬†files which are not in a git repo or files which are outside of the working directory)</li>
</ul>
<h2 id="section-65">3.3.3</h2>
<ul>
<li>Fix bug introduced in 3.3.2</li>
<li>Add progress reporting during patch making</li>
</ul>
<h2 id="section-66">3.3.2</h2>
<p>Windows fixes:</p>
<ul>
<li>Use <code>cross-spawn</code> for spawning child processes</li>
<li>Use <code>git apply</code> for applying patches, rather than <code>patch</code></li>
</ul>
<p>Contribution by <span class="citation" data-cites="ashmind">[@ashmind]</span>(https://github.com/ashmind)</p>
<h2 id="section-67">3.3.1</h2>
<ul>
<li>Use <code>fs-extra</code> to copy files instead of the <code>cp</code> shell command, which doesn‚Äôt work on Windows</li>
</ul>
<h2 id="section-68">3.3.0</h2>
<ul>
<li>Use <code>+</code> instead of <code>:</code> in patch file names because <code>:</code> is illegal on Windows.</li>
</ul>
<h2 id="section-69">3.2.1</h2>
<ul>
<li>Make update-notifier message show local install</li>
</ul>
<h2 id="section-70">3.2.0</h2>
<ul>
<li>Add update-notifier to notify users of patch-package updates</li>
</ul>
<h2 id="section-71">3.1.0</h2>
<ul>
<li>Add support for scoped packages</li>
</ul>
<h2 id="section-72">3.0.0</h2>
<ul>
<li>Add support for npm5</li>
<li>Make yarn patching a cli option, off by default</li>
</ul>
<h2 id="section-73">2.1.1</h2>
<p>Improve error messages</p>
<h2 id="section-74">2.1.0</h2>
<p>Reduce yarn error to a warning</p>
<h2 id="section-75">2.0.0</h2>
<ul>
<li>Require yarn as a peer dependency</li>
<li>Remove support for NPM</li>
</ul>
<p>Moving fast and breaking things. It turns out yarn doesn‚Äôt run the prepare hook after removing a package, so we use patch-package to patch a local version of yarn. I‚Äôm not proud of this. Probably wouldn‚Äôt have released this in the first place if I had known that yarn didn‚Äôt have all the right hooks. Oh well. Now I have a reason to contribute to Yarn I guess.</p>
<h2 id="section-76">1.2.1</h2>
<ul>
<li>Fix patch creation logic around nested node_modules</li>
</ul>
<h2 id="section-77">1.2.0</h2>
<ul>
<li>Enable picking up changes in nested node_modules folders.</li>
<li>Enable adding new files, not just patching existing files.</li>
</ul>
<h2 id="section-78">1.1.1</h2>
<ul>
<li>Fix bug that made exit code 1 regardless of success or failure.</li>
</ul>
<h2 id="section-79">1.1.0</h2>
<ul>
<li>Make applying patches work</li>
<li>Add nice colorful log messages.</li>
</ul>
<h2 id="section-80">1.0.0</h2>
<p>Initial broken release</p>
</body>
</html>
