vfile-message
=============

[![Build](https://img.shields.io/travis/vfile/vfile-message.svg)](https://travis-ci.org/vfile/vfile-message) [![Coverage](https://img.shields.io/codecov/c/github/vfile/vfile-message.svg)](https://codecov.io/github/vfile/vfile-message) [![Downloads](https://img.shields.io/npm/dm/vfile-message.svg)](https://www.npmjs.com/package/vfile-message) [![Size](https://img.shields.io/bundlephobia/minzip/vfile-message.svg)](https://bundlephobia.com/result?p=vfile-message) [![Sponsors](https://opencollective.com/unified/sponsors/badge.svg)](https://opencollective.com/unified) [![Backers](https://opencollective.com/unified/backers/badge.svg)](https://opencollective.com/unified) [![Chat](https://img.shields.io/badge/chat-spectrum-7b16ff.svg)](https://spectrum.chat/unified/vfile)

Create [vfile](https://github.com/vfile/vfile) messages.

Install
-------

[npm](https://docs.npmjs.com/cli/install):

    npm install vfile-message

Use
---

    var VMessage = require('vfile-message')

    var message = new VMessage(
      '`braavo` is misspelt; did you mean `bravo`?',
      {line: 1, column: 8},
      'spell:typo'
    )

    console.log(message)

Yields:

    { [1:8: `braavo` is misspelt; did you mean `bravo`?]
      reason: '`braavo` is misspelt; did you mean `bravo`?',
      fatal: null,
      line: 1,
      column: 8,
      location:
       { start: { line: 1, column: 8 },
         end: { line: null, column: null } },
      source: 'spell',
      ruleId: 'typo' }

API
---

### `VMessage(reason[, position][, origin])`

Constructor of a message for `reason` at `position` from `origin`. When an error is passed in as `reason`, copies the stack.

##### Parameters

###### `reason`

Reason for message (`string` or `Error`). Uses the stack and message of the error if given.

###### `position`

Place at which the message occurred in a file ([`Node`](https://github.com/syntax-tree/unist#node), [`Position`](https://github.com/syntax-tree/unist#position), or [`Point`](https://github.com/syntax-tree/unist#point), optional).

###### `origin`

Place in code the message originates from (`string`, optional).

Can either be the [`ruleId`](#ruleid) (`'rule'`), or a string with both a [`source`](#source) and a [`ruleId`](#ruleid) delimited with a colon (`'source:rule'`).

##### Extends

[`Error`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error).

##### Returns

An instance of itself.

##### Properties

###### `reason`

Reason for message (`string`).

###### `fatal`

If `true`, marks associated file as no longer processable (`boolean?`). If `false`, necessitates a (potential) change. The value can also be `null` or `undefined`.

###### `line`

Starting line of error (`number?`).

###### `column`

Starting column of error (`number?`).

###### `location`

Full range information, when available ([`Position`](https://github.com/syntax-tree/unist#position)). Has `start` and `end` properties, both set to an object with `line` and `column`, set to `number?`.

###### `source`

Namespace of warning (`string?`).

###### `ruleId`

Category of message (`string?`).

###### `stack`

Stack of message (`string?`).

##### Custom properties

It’s OK to store custom data directly on the `VMessage`, some of those are handled by [utilities](https://github.com/vfile/vfile#utilities).

###### `file`

You may add a `file` property with a path of a file (used throughout the [**VFile**](https://github.com/vfile/vfile) ecosystem).

###### `note`

You may add a `note` property with a long form description of the message (supported by [`vfile-reporter`](https://github.com/vfile/vfile-reporter)).

###### `url`

You may add a `url` property with a link to documentation for the message.

Contribute
----------

See [`contributing.md`](https://github.com/vfile/.github/blob/master/contributing.md) in [`vfile/.github`](https://github.com/vfile/.github) for ways to get started. See [`support.md`](https://github.com/vfile/.github/blob/master/support.md) for ways to get help.

This project has a [code of conduct](https://github.com/vfile/.github/blob/master/code-of-conduct.md). By interacting with this repository, organization, or community you agree to abide by its terms.

License
-------

[MIT](license) © [Titus Wormer](https://wooorm.com)
