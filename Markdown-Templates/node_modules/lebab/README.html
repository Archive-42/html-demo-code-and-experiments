<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<p><a href="https://travis-ci.org/lebab/lebab"><img src="https://img.shields.io/travis/lebab/lebab.svg" alt="Build Status" /></a> <a href="https://codecov.io/github/lebab/lebab"><img src="https://img.shields.io/codecov/c/github/lebab/lebab/master.svg" alt="Coverage Status" /></a> <a href="https://libraries.io/npm/lebab"><img src="https://img.shields.io/librariesio/github/lebab/lebab.svg" alt="Dependencies" /></a> <a href="https://mohebifar.mit-license.org"><img src="https://img.shields.io/:license-mit-brightgreen.svg" alt="License" /></a> <a href="https://www.npmjs.com/package/lebab"><img src="https://img.shields.io/npm/v/lebab.svg" alt="Version" /></a></p>
<h1 id="lebab">Lebab</h1>
<figure>
<img src="https://raw.githubusercontent.com/mohebifar/lebab-logo/master/logo.png" alt="Lebab" /><figcaption>Lebab</figcaption>
</figure>
<p><strong>Lebab</strong> transpiles your ES5 code to ES6/ES7. It does exactly the opposite of what <a href="https://babeljs.io/">Babel</a> does. If you want to understand what Lebab exactly does, <strong><a href="https://uniibu.github.io/lebab-ce/">try the live demo</a>.</strong></p>
<h2 id="install">Install</h2>
<p>Install it using npm:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1">$ <span class="ex">npm</span> install -g lebab</a></code></pre></div>
<p>Full build:</p>
<ul>
<li><a href="https://wzrd.in/standalone/lebab@latest">latest Browserified version of Lebab</a></li>
<li><a href="https://umdfied.herokuapp.com/umdfied/lebab/latest">the same, using cdn.rawgit</a></li>
</ul>
<h2 id="usage">Usage</h2>
<p>Convert your old-fashioned code using the <code>lebab</code> cli tool, enabling a specific transformation:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1">$ <span class="ex">lebab</span> es5.js -o es6.js --transform let</a></code></pre></div>
<p>Or transform an entire directory of files in-place:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" title="1"><span class="co"># .js files only</span></a>
<a class="sourceLine" id="cb3-2" title="2">$ <span class="ex">lebab</span> --replace src/js/ --transform arrow</a>
<a class="sourceLine" id="cb3-3" title="3"><span class="co"># For other file extensions, use explicit globbing</span></a>
<a class="sourceLine" id="cb3-4" title="4">$ <span class="ex">lebab</span> --replace <span class="st">&#39;src/js/**/*.jsx&#39;</span> --transform arrow</a></code></pre></div>
<p>For all the possible values for <code>--transform</code> option see the detailed docs below or use <code>--help</code> from command line.</p>
<h2 id="features-and-known-limitations">Features and known limitations</h2>
<p>The recommended way of using Lebab is to apply one transform at a time, read what exactly the transform does and what are its limitations, apply it for your code and inspect the diff carefully.</p>
<h3 id="safe-transforms">Safe transforms</h3>
<p>These transforms can be applied with relatively high confidence. They use pretty straight-forward and strict rules for changing the code. The resulting code should be almost 100% equivalent of the original code.</p>
<ul>
<li>[x] <strong>arrow</strong> - callbacks to arrow functions
<ul>
<li>[x] Converts bound functions like <code>function(){}.bind(this)</code></li>
<li>[x] not applied to unbound functions that use <code>this</code></li>
<li>[x] not applied to functions that use <code>arguments</code></li>
<li>[x] not applied to object properties (use <code>obj-method</code> transform)</li>
<li>[ ] does not remove <code>that = this</code> assignments</li>
</ul></li>
<li>[x] <strong>arrow-return</strong> - drop return statements in arrow functions
<ul>
<li>[x] converts immediate return <code>{ return x; }</code> to <code>=&gt; x</code></li>
<li>[x] applies to arrow functions and nested arrow functions</li>
<li>[ ] LIMITATION only applies to arrow functions (run the <code>arrow</code> transform first)</li>
</ul></li>
<li>[x] <strong>for-of</strong> - for loop to for-of loop
<ul>
<li>[x] uses name <code>item</code> for loop variable when loop body begins with <code>var item = array[i];</code></li>
<li>[ ] <a href="https://github.com/lebab/lebab/issues/166">does not work when no such alias defined at the start of loop body</a></li>
<li>[ ] LIMITATION requires let/const variables (run the <code>let</code> transform first)</li>
</ul></li>
<li>[x] <strong>for-each</strong> - for loop to <code>Array.forEach()</code>
<ul>
<li>[x] uses name <code>item</code> for forEach parameter when loop body begins with <code>var item = array[i];</code></li>
<li>[ ] <a href="https://github.com/lebab/lebab/issues/166">does not work when no such alias defined at the start of loop body</a></li>
<li>[x] adds index parameter when loop body makes use of the index variable.</li>
<li>[ ] LIMITATION requires let/const variables (run the <code>let</code> transform first)</li>
</ul></li>
<li>[x] <strong>arg-rest</strong> - use of arguments to function(â€¦args)
<ul>
<li>[x] does not perform the transform when <code>args</code> variable already exists</li>
<li>[ ] always names the rest-parameter to <code>args</code></li>
<li>[ ] LIMITATION <a href="https://github.com/lebab/lebab/issues/191">does not transform functions with formal parameters</a></li>
<li>[ ] LIMITATION <a href="https://github.com/lebab/lebab/issues/191">does not remove uses of <code>Array.slice.call(arguments)</code></a></li>
</ul></li>
<li>[x] <strong>arg-spread</strong> - use of apply() to spread operator
<ul>
<li>[x] recognizes <code>obj.method.apply(obj, args)</code></li>
<li>[x] recognizes <code>func.apply(undefined, args)</code></li>
</ul></li>
<li>[x] <strong>obj-method</strong> - function values in object to methods
<ul>
<li>[ ] LIMITATION <a href="https://github.com/lebab/lebab/issues/127">does not convert named function expressions</a></li>
<li>[ ] does not convert arrow-functions</li>
</ul></li>
<li>[x] <strong>obj-shorthand</strong> - <code>{foo: foo}</code> to <code>{foo}</code>
<ul>
<li>[x] ignores numeric and <code>NaN</code> properties</li>
<li>[ ] does not convert string properties</li>
</ul></li>
<li>[x] <strong>no-strict</strong> - removal of <code>"use strict"</code> directives
<ul>
<li>[x] does not touch stuff like <code>x = "use strict";</code></li>
</ul></li>
<li>[x] <strong>exponent</strong> - <code>Math.pow()</code> to <code>**</code> operator (<strong>ES7</strong>)
<ul>
<li>[x] Full support for all new syntax from ES7</li>
</ul></li>
<li>[x] <strong>multi-var</strong> - single <code>var x,y;</code> declaration to multiple <code>var x; var y;</code> (<strong>refactor</strong>)
<ul>
<li>[x] Not related to any new syntax feature</li>
<li>[x] EXPERIMENT <a href="https://github.com/lebab/lebab/issues/158">to see if Lebab could be a more generic refactoring helper</a></li>
</ul></li>
</ul>
<h3 id="unsafe-transforms">Unsafe transforms</h3>
<p>These transforms should be applied with caution. They either use heuristics which canâ€™t guarantee that the resulting code is equivalent of the original code, or they have significant bugs which can result in breaking your code.</p>
<ul>
<li>[x] <strong>let</strong> - <code>var</code> to <code>let</code>/<code>const</code>
<ul>
<li>[x] never modified variables are converted to <code>const</code></li>
<li>[x] properly recognizes block-scoping</li>
<li>[x] splits single var declaration to multiple <code>let</code>/<code>const</code> declarations if needed</li>
<li>[x] recognizes vars defined/assigned using destructuring</li>
<li>[x] vars that conflict with block-scoping are not converted</li>
<li>[x] repeated declarations of the same var are not converted</li>
<li>[x] existing <code>let</code>/<code>const</code> are not converted</li>
<li>[ ] BUG <a href="https://github.com/lebab/lebab/issues/131">fails with repeated variable definitions that use destructuring</a></li>
<li>[ ] BUG <a href="https://github.com/lebab/lebab/issues/145">fails with closure over a loop variable</a></li>
<li>[ ] BUG <a href="https://github.com/lebab/lebab/issues/168">fails when function closes over variable declared after function is called</a></li>
</ul></li>
<li>[x] <strong>class</strong> - function/prototypes to classes
<ul>
<li>[x] recognizes <code>Foo.prototype.method = function(){ ... };</code></li>
<li>[x] recognizes <code>Foo.prototype = { ...methods... };</code></li>
<li>[x] recognizes static methods like <code>Foo.method = function(){ ... };</code></li>
<li>[x] recognizes getters/setters defined with <code>Object.defineProperty()</code></li>
<li>[x] recognizes inheritance with <code>Child.prototype = new Parent()</code></li>
<li>[x] recognizes inheritance with <code>util.inherits(Child, Parent);</code></li>
<li>[x] converts superclass constructor calls to <code>super()</code></li>
<li>[x] converts superclass method calls to <code>super.method()</code></li>
<li>[ ] LIMITATION <a href="https://github.com/lebab/lebab/issues/186">does not require super() call in subclass constructor</a></li>
<li>[ ] LIMITATION <a href="https://github.com/lebab/lebab/issues/186">does not enforce super() call position in subclass constructor</a></li>
<li>[ ] LIMITATION <a href="https://github.com/lebab/lebab/issues/113">does not support namespaced classes</a></li>
</ul></li>
<li>[x] <strong>commonjs</strong> - CommonJS module definition to ES6 modules
<ul>
<li>[x] converts <code>var foo = require("foo")</code> to <code>import foo from "foo"</code></li>
<li>[x] converts <code>var bar = require("foo").bar</code> to <code>import {bar} from "foo"</code></li>
<li>[x] converts <code>var {bar} = require("foo")</code> to <code>import {bar} from "foo"</code></li>
<li>[x] converts <code>module.exports = &lt;anything&gt;</code> to <code>export default &lt;anything&gt;</code></li>
<li>[x] converts <code>exports.foo = function(){}</code> to <code>export function foo(){}</code></li>
<li>[x] converts <code>exports.Foo = class {}</code> to <code>export class Foo {}</code></li>
<li>[x] converts <code>exports.foo = 123</code> to <code>export var foo = 123</code></li>
<li>[x] converts <code>exports.foo = bar</code> to <code>export {bar as foo}</code></li>
<li>[ ] LIMITATION does not check if named export conflicts with existing variable names</li>
<li>[ ] LIMITATION Ignores imports/exports inside nested blocks/functions</li>
<li>[ ] LIMITATION only handles <code>require()</code> calls in <code>var</code> declarations</li>
<li>[ ] LIMITATION does not ensure that imported variable is treated as <code>const</code></li>
<li>[ ] LIMITATION <a href="https://github.com/lebab/lebab/issues/215">does not ensure named exports are imported with correct ES6 syntax</a></li>
</ul></li>
<li>[x] <strong>template</strong> - string concatenation to template strings
<ul>
<li>[x] converts variables and arbitrary expressions to <code>${...}</code></li>
<li>[ ] BUG <a href="https://github.com/lebab/lebab/issues/88">removes indentation of multi-line strings</a></li>
<li>[ ] LIMITATION <a href="https://github.com/lebab/lebab/issues/107">ignores difference between <code>.toString()</code> and <code>.valueOf()</code></a></li>
</ul></li>
<li>[x] <strong>default-param</strong> - default parameters instead of <code>a = a || 2</code>
<ul>
<li>[x] recognizes <code>a = a || 2</code></li>
<li>[x] recognizes <code>a = a ? a : 2</code></li>
<li>[x] recognizes <code>a = a === undefined ? 2 : a</code></li>
<li>[x] recognizes <code>a = typeof a === 'undefined' ? 2 : a</code></li>
<li>[ ] LIMITATION <a href="https://github.com/lebab/lebab/issues/125">transforming <code>a = a || 2</code> does not produce strictly equivalent code</a></li>
</ul></li>
<li>[x] <strong>destruct-param</strong> - use destructuring for objects in function parameters
<ul>
<li>[x] converts <code>(obj) =&gt; obj.a + obj.b</code> to <code>({a, b}) =&gt; a + b</code></li>
<li>[x] does not transform when conflicts with existing variables</li>
<li>[x] does not transform when object properties are modified</li>
<li>[ ] LIMITATION Only objects with maximum of 4 properties are transformed</li>
<li>[ ] BUG <a href="https://github.com/lebab/lebab/issues/200">Can conflict with variables introduced by the transform itself</a></li>
</ul></li>
<li>[x] <strong>includes</strong> - <code>array.indexOf(foo) !== -1</code> to <code>array.includes(foo)</code> (<strong>ES7</strong>)
<ul>
<li>[x] works for both strings and arrays</li>
<li>[x] converts <code>!== -1</code> to <code>array.includes(foo)</code></li>
<li>[x] converts <code>=== -1</code> to <code>!array.includes(foo)</code></li>
<li>[x] recognizes all kinds of comparisons <code>&gt;= 0</code>, <code>&gt; -1</code>, etc</li>
<li>[x] recognizes both <code>indexOf() != -1</code> and <code>-1 != indexOf()</code></li>
<li>[ ] LIMITATION does not detect that indexOf() is called on an actual Array or String.</li>
</ul></li>
</ul>
<h2 id="programming-api">Programming API</h2>
<p>Simply import and call the <code>transform()</code> function:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="im">import</span> <span class="op">{</span>transform<span class="op">}</span> <span class="im">from</span> <span class="st">&#39;lebab&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="kw">const</span> <span class="op">{</span>code<span class="op">,</span> warnings<span class="op">}</span> <span class="op">=</span> <span class="at">transform</span>(</a>
<a class="sourceLine" id="cb4-3" title="3">  <span class="st">&#39;var f = function(a) { return a; };&#39;</span><span class="op">,</span> <span class="co">// code to transform</span></a>
<a class="sourceLine" id="cb4-4" title="4">  [<span class="st">&#39;let&#39;</span><span class="op">,</span> <span class="st">&#39;arrow&#39;</span><span class="op">,</span> <span class="st">&#39;arrow-return&#39;</span>] <span class="co">// transforms to apply</span></a>
<a class="sourceLine" id="cb4-5" title="5">)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="va">console</span>.<span class="at">log</span>(code)<span class="op">;</span> <span class="co">// -&gt; &quot;const f = a =&gt; a;&quot;</span></a></code></pre></div>
<p>The warnings will be an array of objects like:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1">[</a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="op">{</span><span class="dt">line</span><span class="op">:</span> <span class="dv">12</span><span class="op">,</span> <span class="dt">msg</span><span class="op">:</span> <span class="st">&#39;Unable to transform var&#39;</span><span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;let&#39;</span><span class="op">},</span></a>
<a class="sourceLine" id="cb5-3" title="3">  <span class="op">{</span><span class="dt">line</span><span class="op">:</span> <span class="dv">45</span><span class="op">,</span> <span class="dt">msg</span><span class="op">:</span> <span class="st">&#39;Can not use arguments in arrow function&#39;</span><span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;arrow&#39;</span><span class="op">},</span></a>
<a class="sourceLine" id="cb5-4" title="4">]</a></code></pre></div>
<p>Most of the time there wonâ€™t be any warnings and the array will be empty.</p>
<h2 id="editor-plugins">Editor plugins</h2>
<p>Alternatively one can use Lebab through plugins in the following editors:</p>
<ul>
<li>Atom: <a href="https://github.com/ga2mer/atom-lebab">atom-lebab</a></li>
<li>Sublime: <a href="https://github.com/inkless/lebab-sublime">lebab-sublime</a> or <a href="https://packagecontrol.io/packages/Lebab%20ES6%20Transform">Lebab ES6 Transform</a></li>
<li>VSCode: <a href="https://marketplace.visualstudio.com/items?itemName=mrmlnc.vscode-lebab">vscode-lebab</a></li>
</ul>
<h2 id="whats-next">Whatâ€™s next?</h2>
<p>Which feature should Lebab implement next? Let us know by <a href="https://github.com/mohebifar/lebab/issues">creating an issue</a> or voicing your opinion in existing one.</p>
<p>Want to contribute? <a href="http://nene.github.io/2016/04/02/matches-ast">Read how Lebab looks for patterns in syntax trees.</a></p>
</body>
</html>
