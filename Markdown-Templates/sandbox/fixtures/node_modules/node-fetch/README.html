<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="node-fetch">node-fetch</h1>
<p><a href="https://www.npmjs.com/package/node-fetch"><img src="https://flat.badgen.net/npm/v/node-fetch" alt="npm version" /></a> <a href="https://travis-ci.org/bitinn/node-fetch"><img src="https://flat.badgen.net/travis/bitinn/node-fetch" alt="build status" /></a> <a href="https://codecov.io/gh/bitinn/node-fetch"><img src="https://flat.badgen.net/codecov/c/github/bitinn/node-fetch/master" alt="coverage status" /></a> <a href="https://packagephobia.now.sh/result?p=node-fetch"><img src="https://flat.badgen.net/packagephobia/install/node-fetch" alt="install size" /></a></p>
<p>A light-weight module that brings <code>window.fetch</code> to Node.js</p>
<p>(We are looking for <a href="https://github.com/bitinn/node-fetch/issues/567">v2 maintainers and collaborators</a>)</p>
<!-- TOC -->
<ul>
<li><a href="#motivation">Motivation</a></li>
<li><a href="#features">Features</a></li>
<li><a href="#difference-from-client-side-fetch">Difference from client-side fetch</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#loading-and-configuring-the-module">Loading and configuring the module</a></li>
<li><a href="#common-usage">Common Usage</a>
<ul>
<li><a href="#plain-text-or-html">Plain text or HTML</a></li>
<li><a href="#json">JSON</a></li>
<li><a href="#simple-post">Simple Post</a></li>
<li><a href="#post-with-json">Post with JSON</a></li>
<li><a href="#post-with-form-parameters">Post with form parameters</a></li>
<li><a href="#handling-exceptions">Handling exceptions</a></li>
<li><a href="#handling-client-and-server-errors">Handling client and server errors</a></li>
</ul></li>
<li><a href="#advanced-usage">Advanced Usage</a>
<ul>
<li><a href="#streams">Streams</a></li>
<li><a href="#buffer">Buffer</a></li>
<li><a href="#accessing-headers-and-other-meta-data">Accessing Headers and other Meta data</a></li>
<li><a href="#extract-set-cookie-header">Extract Set-Cookie Header</a></li>
<li><a href="#post-data-using-a-file-stream">Post data using a file stream</a></li>
<li><a href="#post-with-form-data-detect-multipart">Post with form-data (detect multipart)</a></li>
<li><a href="#request-cancellation-with-abortsignal">Request cancellation with AbortSignal</a></li>
</ul></li>
<li><a href="#api">API</a>
<ul>
<li><a href="#fetchurl-options">fetch(url[, options])</a></li>
<li><a href="#options">Options</a></li>
<li><a href="#class-request">Class: Request</a></li>
<li><a href="#class-response">Class: Response</a></li>
<li><a href="#class-headers">Class: Headers</a></li>
<li><a href="#interface-body">Interface: Body</a></li>
<li><a href="#class-fetcherror">Class: FetchError</a></li>
</ul></li>
<li><a href="#license">License</a></li>
<li><a href="#acknowledgement">Acknowledgement</a></li>
</ul>
<!-- /TOC -->
<h2 id="motivation">Motivation</h2>
<p>Instead of implementing <code>XMLHttpRequest</code> in Node.js to run browser-specific <a href="https://github.com/github/fetch">Fetch polyfill</a>, why not go from native <code>http</code> to <code>fetch</code> API directly? Hence <code>node-fetch</code>, minimal code for a <code>window.fetch</code> compatible API on Node.js runtime.</p>
<p>See Matt Andrews’ <a href="https://github.com/matthew-andrews/isomorphic-fetch">isomorphic-fetch</a> or Leonardo Quixada’s <a href="https://github.com/lquixada/cross-fetch">cross-fetch</a> for isomorphic usage (exports <code>node-fetch</code> for server-side, <code>whatwg-fetch</code> for client-side).</p>
<h2 id="features">Features</h2>
<ul>
<li>Stay consistent with <code>window.fetch</code> API.</li>
<li>Make conscious trade-off when following <a href="https://fetch.spec.whatwg.org/">WHATWG fetch spec</a> and <a href="https://streams.spec.whatwg.org/">stream spec</a> implementation details, document known differences.</li>
<li>Use native promise, but allow substituting it with [insert your favorite promise library].</li>
<li>Use native Node streams for body, on both request and response.</li>
<li>Decode content encoding (gzip/deflate) properly, and convert string output (such as <code>res.text()</code> and <code>res.json()</code>) to UTF-8 automatically.</li>
<li>Useful extensions such as timeout, redirect limit, response size limit, <a href="ERROR-HANDLING.md">explicit errors</a> for troubleshooting.</li>
</ul>
<h2 id="difference-from-client-side-fetch">Difference from client-side fetch</h2>
<ul>
<li>See <a href="LIMITS.md">Known Differences</a> for details.</li>
<li>If you happen to use a missing feature that <code>window.fetch</code> offers, feel free to open an issue.</li>
<li>Pull requests are welcomed too!</li>
</ul>
<h2 id="installation">Installation</h2>
<p>Current stable release (<code>2.x</code>)</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1">$ <span class="ex">npm</span> install node-fetch --save</a></code></pre></div>
<h2 id="loading-and-configuring-the-module">Loading and configuring the module</h2>
<p>We suggest you load the module via <code>require</code>, pending the stabalizing of es modules in node:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">const</span> fetch <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;node-fetch&#39;</span>)<span class="op">;</span></a></code></pre></div>
<p>If you are using a Promise library other than native, set it through fetch.Promise:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">const</span> Bluebird <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;bluebird&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-2" title="2"></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="va">fetch</span>.<span class="at">Promise</span> <span class="op">=</span> Bluebird<span class="op">;</span></a></code></pre></div>
<h2 id="common-usage">Common Usage</h2>
<p>NOTE: The documentation below is up-to-date with <code>2.x</code> releases, <a href="https://github.com/bitinn/node-fetch/blob/1.x/README.md">see <code>1.x</code> readme</a>, <a href="https://github.com/bitinn/node-fetch/blob/1.x/CHANGELOG.md">changelog</a> and <a href="UPGRADE-GUIDE.md">2.x upgrade guide</a> for the differences.</p>
<h4 id="plain-text-or-html">Plain text or HTML</h4>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="at">fetch</span>(<span class="st">&#39;https://github.com/&#39;</span>)</a>
<a class="sourceLine" id="cb4-2" title="2">    .<span class="at">then</span>(res <span class="kw">=&gt;</span> <span class="va">res</span>.<span class="at">text</span>())</a>
<a class="sourceLine" id="cb4-3" title="3">    .<span class="at">then</span>(body <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">log</span>(body))<span class="op">;</span></a></code></pre></div>
<h4 id="json">JSON</h4>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="at">fetch</span>(<span class="st">&#39;https://api.github.com/users/github&#39;</span>)</a>
<a class="sourceLine" id="cb5-3" title="3">    .<span class="at">then</span>(res <span class="kw">=&gt;</span> <span class="va">res</span>.<span class="at">json</span>())</a>
<a class="sourceLine" id="cb5-4" title="4">    .<span class="at">then</span>(json <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">log</span>(json))<span class="op">;</span></a></code></pre></div>
<h4 id="simple-post">Simple Post</h4>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="at">fetch</span>(<span class="st">&#39;https://httpbin.org/post&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">method</span><span class="op">:</span> <span class="st">&#39;POST&#39;</span><span class="op">,</span> <span class="dt">body</span><span class="op">:</span> <span class="st">&#39;a=1&#39;</span> <span class="op">}</span>)</a>
<a class="sourceLine" id="cb6-2" title="2">    .<span class="at">then</span>(res <span class="kw">=&gt;</span> <span class="va">res</span>.<span class="at">json</span>()) <span class="co">// expecting a json response</span></a>
<a class="sourceLine" id="cb6-3" title="3">    .<span class="at">then</span>(json <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">log</span>(json))<span class="op">;</span></a></code></pre></div>
<h4 id="post-with-json">Post with JSON</h4>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">const</span> body <span class="op">=</span> <span class="op">{</span> <span class="dt">a</span><span class="op">:</span> <span class="dv">1</span> <span class="op">};</span></a>
<a class="sourceLine" id="cb7-2" title="2"></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="at">fetch</span>(<span class="st">&#39;https://httpbin.org/post&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb7-4" title="4">        <span class="dt">method</span><span class="op">:</span> <span class="st">&#39;post&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb7-5" title="5">        <span class="dt">body</span><span class="op">:</span>    <span class="va">JSON</span>.<span class="at">stringify</span>(body)<span class="op">,</span></a>
<a class="sourceLine" id="cb7-6" title="6">        <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span> <span class="st">&#39;Content-Type&#39;</span><span class="op">:</span> <span class="st">&#39;application/json&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb7-7" title="7">    <span class="op">}</span>)</a>
<a class="sourceLine" id="cb7-8" title="8">    .<span class="at">then</span>(res <span class="kw">=&gt;</span> <span class="va">res</span>.<span class="at">json</span>())</a>
<a class="sourceLine" id="cb7-9" title="9">    .<span class="at">then</span>(json <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">log</span>(json))<span class="op">;</span></a></code></pre></div>
<h4 id="post-with-form-parameters">Post with form parameters</h4>
<p><code>URLSearchParams</code> is available in Node.js as of v7.5.0. See <a href="https://nodejs.org/api/url.html#url_class_urlsearchparams">official documentation</a> for more usage methods.</p>
<p>NOTE: The <code>Content-Type</code> header is only set automatically to <code>x-www-form-urlencoded</code> when an instance of <code>URLSearchParams</code> is given as such:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">const</span> <span class="op">{</span> URLSearchParams <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;url&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-2" title="2"></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="kw">const</span> params <span class="op">=</span> <span class="kw">new</span> <span class="at">URLSearchParams</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb8-4" title="4"><span class="va">params</span>.<span class="at">append</span>(<span class="st">&#39;a&#39;</span><span class="op">,</span> <span class="dv">1</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-5" title="5"></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="at">fetch</span>(<span class="st">&#39;https://httpbin.org/post&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">method</span><span class="op">:</span> <span class="st">&#39;POST&#39;</span><span class="op">,</span> <span class="dt">body</span><span class="op">:</span> params <span class="op">}</span>)</a>
<a class="sourceLine" id="cb8-7" title="7">    .<span class="at">then</span>(res <span class="kw">=&gt;</span> <span class="va">res</span>.<span class="at">json</span>())</a>
<a class="sourceLine" id="cb8-8" title="8">    .<span class="at">then</span>(json <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">log</span>(json))<span class="op">;</span></a></code></pre></div>
<h4 id="handling-exceptions">Handling exceptions</h4>
<p>NOTE: 3xx-5xx responses are <em>NOT</em> exceptions, and should be handled in <code>then()</code>, see the next section.</p>
<p>Adding a catch to the fetch promise chain will catch <em>all</em> exceptions, such as errors originating from node core libraries, like network errors, and operational errors which are instances of FetchError. See the <a href="ERROR-HANDLING.md">error handling document</a> for more details.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="at">fetch</span>(<span class="st">&#39;https://domain.invalid/&#39;</span>)</a>
<a class="sourceLine" id="cb9-2" title="2">    .<span class="at">catch</span>(err <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">error</span>(err))<span class="op">;</span></a></code></pre></div>
<h4 id="handling-client-and-server-errors">Handling client and server errors</h4>
<p>It is common to create a helper function to check that the response contains no client (4xx) or server (5xx) error responses:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">function</span> <span class="at">checkStatus</span>(res) <span class="op">{</span></a>
<a class="sourceLine" id="cb10-2" title="2">    <span class="cf">if</span> (<span class="va">res</span>.<span class="at">ok</span>) <span class="op">{</span> <span class="co">// res.status &gt;= 200 &amp;&amp; res.status &lt; 300</span></a>
<a class="sourceLine" id="cb10-3" title="3">        <span class="cf">return</span> res<span class="op">;</span></a>
<a class="sourceLine" id="cb10-4" title="4">    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb10-5" title="5">        <span class="cf">throw</span> <span class="at">MyCustomError</span>(<span class="va">res</span>.<span class="at">statusText</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb10-6" title="6">    <span class="op">}</span></a>
<a class="sourceLine" id="cb10-7" title="7"><span class="op">}</span></a>
<a class="sourceLine" id="cb10-8" title="8"></a>
<a class="sourceLine" id="cb10-9" title="9"><span class="at">fetch</span>(<span class="st">&#39;https://httpbin.org/status/400&#39;</span>)</a>
<a class="sourceLine" id="cb10-10" title="10">    .<span class="at">then</span>(checkStatus)</a>
<a class="sourceLine" id="cb10-11" title="11">    .<span class="at">then</span>(res <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;will not get here...&#39;</span>))</a></code></pre></div>
<h2 id="advanced-usage">Advanced Usage</h2>
<h4 id="streams">Streams</h4>
<p>The “Node.js way” is to use streams when possible:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1"><span class="at">fetch</span>(<span class="st">&#39;https://assets-cdn.github.com/images/modules/logos_page/Octocat.png&#39;</span>)</a>
<a class="sourceLine" id="cb11-2" title="2">    .<span class="at">then</span>(res <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-3" title="3">        <span class="kw">const</span> dest <span class="op">=</span> <span class="va">fs</span>.<span class="at">createWriteStream</span>(<span class="st">&#39;./octocat.png&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-4" title="4">        <span class="va">res</span>.<span class="va">body</span>.<span class="at">pipe</span>(dest)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-5" title="5">    <span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h4 id="buffer">Buffer</h4>
<p>If you prefer to cache binary data in full, use buffer(). (NOTE: buffer() is a <code>node-fetch</code> only API)</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">const</span> fileType <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;file-type&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-2" title="2"></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="at">fetch</span>(<span class="st">&#39;https://assets-cdn.github.com/images/modules/logos_page/Octocat.png&#39;</span>)</a>
<a class="sourceLine" id="cb12-4" title="4">    .<span class="at">then</span>(res <span class="kw">=&gt;</span> <span class="va">res</span>.<span class="at">buffer</span>())</a>
<a class="sourceLine" id="cb12-5" title="5">    .<span class="at">then</span>(buffer <span class="kw">=&gt;</span> <span class="at">fileType</span>(buffer))</a>
<a class="sourceLine" id="cb12-6" title="6">    .<span class="at">then</span>(type <span class="kw">=&gt;</span> <span class="op">{</span> <span class="co">/* ... */</span> <span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h4 id="accessing-headers-and-other-meta-data">Accessing Headers and other Meta data</h4>
<div class="sourceCode" id="cb13"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb13-1" title="1"><span class="at">fetch</span>(<span class="st">&#39;https://github.com/&#39;</span>)</a>
<a class="sourceLine" id="cb13-2" title="2">    .<span class="at">then</span>(res <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb13-3" title="3">        <span class="va">console</span>.<span class="at">log</span>(<span class="va">res</span>.<span class="at">ok</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb13-4" title="4">        <span class="va">console</span>.<span class="at">log</span>(<span class="va">res</span>.<span class="at">status</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb13-5" title="5">        <span class="va">console</span>.<span class="at">log</span>(<span class="va">res</span>.<span class="at">statusText</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb13-6" title="6">        <span class="va">console</span>.<span class="at">log</span>(<span class="va">res</span>.<span class="va">headers</span>.<span class="at">raw</span>())<span class="op">;</span></a>
<a class="sourceLine" id="cb13-7" title="7">        <span class="va">console</span>.<span class="at">log</span>(<span class="va">res</span>.<span class="va">headers</span>.<span class="at">get</span>(<span class="st">&#39;content-type&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb13-8" title="8">    <span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h4 id="extract-set-cookie-header">Extract Set-Cookie Header</h4>
<p>Unlike browsers, you can access raw <code>Set-Cookie</code> headers manually using <code>Headers.raw()</code>, this is a <code>node-fetch</code> only API.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb14-1" title="1"><span class="at">fetch</span>(url).<span class="at">then</span>(res <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb14-2" title="2">    <span class="co">// returns an array of values, instead of a string of comma-separated values</span></a>
<a class="sourceLine" id="cb14-3" title="3">    <span class="va">console</span>.<span class="at">log</span>(<span class="va">res</span>.<span class="va">headers</span>.<span class="at">raw</span>()[<span class="st">&#39;set-cookie&#39;</span>])<span class="op">;</span></a>
<a class="sourceLine" id="cb14-4" title="4"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h4 id="post-data-using-a-file-stream">Post data using a file stream</h4>
<div class="sourceCode" id="cb15"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb15-1" title="1"><span class="kw">const</span> <span class="op">{</span> createReadStream <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;fs&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-2" title="2"></a>
<a class="sourceLine" id="cb15-3" title="3"><span class="kw">const</span> stream <span class="op">=</span> <span class="at">createReadStream</span>(<span class="st">&#39;input.txt&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-4" title="4"></a>
<a class="sourceLine" id="cb15-5" title="5"><span class="at">fetch</span>(<span class="st">&#39;https://httpbin.org/post&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">method</span><span class="op">:</span> <span class="st">&#39;POST&#39;</span><span class="op">,</span> <span class="dt">body</span><span class="op">:</span> stream <span class="op">}</span>)</a>
<a class="sourceLine" id="cb15-6" title="6">    .<span class="at">then</span>(res <span class="kw">=&gt;</span> <span class="va">res</span>.<span class="at">json</span>())</a>
<a class="sourceLine" id="cb15-7" title="7">    .<span class="at">then</span>(json <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">log</span>(json))<span class="op">;</span></a></code></pre></div>
<h4 id="post-with-form-data-detect-multipart">Post with form-data (detect multipart)</h4>
<div class="sourceCode" id="cb16"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb16-1" title="1"><span class="kw">const</span> FormData <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;form-data&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb16-2" title="2"></a>
<a class="sourceLine" id="cb16-3" title="3"><span class="kw">const</span> form <span class="op">=</span> <span class="kw">new</span> <span class="at">FormData</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb16-4" title="4"><span class="va">form</span>.<span class="at">append</span>(<span class="st">&#39;a&#39;</span><span class="op">,</span> <span class="dv">1</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb16-5" title="5"></a>
<a class="sourceLine" id="cb16-6" title="6"><span class="at">fetch</span>(<span class="st">&#39;https://httpbin.org/post&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">method</span><span class="op">:</span> <span class="st">&#39;POST&#39;</span><span class="op">,</span> <span class="dt">body</span><span class="op">:</span> form <span class="op">}</span>)</a>
<a class="sourceLine" id="cb16-7" title="7">    .<span class="at">then</span>(res <span class="kw">=&gt;</span> <span class="va">res</span>.<span class="at">json</span>())</a>
<a class="sourceLine" id="cb16-8" title="8">    .<span class="at">then</span>(json <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">log</span>(json))<span class="op">;</span></a>
<a class="sourceLine" id="cb16-9" title="9"></a>
<a class="sourceLine" id="cb16-10" title="10"><span class="co">// OR, using custom headers</span></a>
<a class="sourceLine" id="cb16-11" title="11"><span class="co">// </span><span class="al">NOTE</span><span class="co">: getHeaders() is non-standard API</span></a>
<a class="sourceLine" id="cb16-12" title="12"></a>
<a class="sourceLine" id="cb16-13" title="13"><span class="kw">const</span> form <span class="op">=</span> <span class="kw">new</span> <span class="at">FormData</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb16-14" title="14"><span class="va">form</span>.<span class="at">append</span>(<span class="st">&#39;a&#39;</span><span class="op">,</span> <span class="dv">1</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb16-15" title="15"></a>
<a class="sourceLine" id="cb16-16" title="16"><span class="kw">const</span> options <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb16-17" title="17">    <span class="dt">method</span><span class="op">:</span> <span class="st">&#39;POST&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb16-18" title="18">    <span class="dt">body</span><span class="op">:</span> form<span class="op">,</span></a>
<a class="sourceLine" id="cb16-19" title="19">    <span class="dt">headers</span><span class="op">:</span> <span class="va">form</span>.<span class="at">getHeaders</span>()</a>
<a class="sourceLine" id="cb16-20" title="20"><span class="op">}</span></a>
<a class="sourceLine" id="cb16-21" title="21"></a>
<a class="sourceLine" id="cb16-22" title="22"><span class="at">fetch</span>(<span class="st">&#39;https://httpbin.org/post&#39;</span><span class="op">,</span> options)</a>
<a class="sourceLine" id="cb16-23" title="23">    .<span class="at">then</span>(res <span class="kw">=&gt;</span> <span class="va">res</span>.<span class="at">json</span>())</a>
<a class="sourceLine" id="cb16-24" title="24">    .<span class="at">then</span>(json <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">log</span>(json))<span class="op">;</span></a></code></pre></div>
<h4 id="request-cancellation-with-abortsignal">Request cancellation with AbortSignal</h4>
<blockquote>
<p>NOTE: You may only cancel streamed requests on Node &gt;= v8.0.0</p>
</blockquote>
<p>You may cancel requests with <code>AbortController</code>. A suggested implementation is <a href="https://www.npmjs.com/package/abort-controller"><code>abort-controller</code></a>.</p>
<p>An example of timing out a request after 150ms could be achieved as follows:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb17-1" title="1"><span class="im">import</span> AbortController <span class="im">from</span> <span class="st">&#39;abort-controller&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb17-2" title="2"></a>
<a class="sourceLine" id="cb17-3" title="3"><span class="kw">const</span> controller <span class="op">=</span> <span class="kw">new</span> <span class="at">AbortController</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb17-4" title="4"><span class="kw">const</span> timeout <span class="op">=</span> <span class="at">setTimeout</span>(</a>
<a class="sourceLine" id="cb17-5" title="5">  () <span class="kw">=&gt;</span> <span class="op">{</span> <span class="va">controller</span>.<span class="at">abort</span>()<span class="op">;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb17-6" title="6">  <span class="dv">150</span><span class="op">,</span></a>
<a class="sourceLine" id="cb17-7" title="7">)<span class="op">;</span></a>
<a class="sourceLine" id="cb17-8" title="8"></a>
<a class="sourceLine" id="cb17-9" title="9"><span class="at">fetch</span>(url<span class="op">,</span> <span class="op">{</span> <span class="dt">signal</span><span class="op">:</span> <span class="va">controller</span>.<span class="at">signal</span> <span class="op">}</span>)</a>
<a class="sourceLine" id="cb17-10" title="10">  .<span class="at">then</span>(res <span class="kw">=&gt;</span> <span class="va">res</span>.<span class="at">json</span>())</a>
<a class="sourceLine" id="cb17-11" title="11">  .<span class="at">then</span>(</a>
<a class="sourceLine" id="cb17-12" title="12">    data <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb17-13" title="13">      <span class="at">useData</span>(data)</a>
<a class="sourceLine" id="cb17-14" title="14">    <span class="op">},</span></a>
<a class="sourceLine" id="cb17-15" title="15">    err <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb17-16" title="16">      <span class="cf">if</span> (<span class="va">err</span>.<span class="at">name</span> <span class="op">===</span> <span class="st">&#39;AbortError&#39;</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb17-17" title="17">        <span class="co">// request was aborted</span></a>
<a class="sourceLine" id="cb17-18" title="18">      <span class="op">}</span></a>
<a class="sourceLine" id="cb17-19" title="19">    <span class="op">},</span></a>
<a class="sourceLine" id="cb17-20" title="20">  )</a>
<a class="sourceLine" id="cb17-21" title="21">  .<span class="at">finally</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb17-22" title="22">    <span class="at">clearTimeout</span>(timeout)<span class="op">;</span></a>
<a class="sourceLine" id="cb17-23" title="23">  <span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>See <a href="https://github.com/bitinn/node-fetch/blob/master/test/test.js">test cases</a> for more examples.</p>
<h2 id="api">API</h2>
<h3 id="fetchurl-options">fetch(url[, options])</h3>
<ul>
<li><code>url</code> A string representing the URL for fetching</li>
<li><code>options</code> <a href="#fetch-options">Options</a> for the HTTP(S) request</li>
<li>Returns: <code>Promise&lt;<a href="#class-response">Response</a>&gt;</code></li>
</ul>
<p>Perform an HTTP(S) fetch.</p>
<p><code>url</code> should be an absolute url, such as <code>https://example.com/</code>. A path-relative URL (<code>/file/under/root</code>) or protocol-relative URL (<code>//can-be-http-or-https.com/</code>) will result in a rejected promise.</p>
<p><a id="fetch-options"></a> ### Options</p>
<p>The default values are shown after each option key.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb18-1" title="1"><span class="op">{</span></a>
<a class="sourceLine" id="cb18-2" title="2">    <span class="co">// These properties are part of the Fetch Standard</span></a>
<a class="sourceLine" id="cb18-3" title="3">    <span class="dt">method</span><span class="op">:</span> <span class="st">&#39;GET&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb18-4" title="4">    <span class="dt">headers</span><span class="op">:</span> <span class="op">{},</span>        <span class="co">// request headers. format is the identical to that accepted by the Headers constructor (see below)</span></a>
<a class="sourceLine" id="cb18-5" title="5">    <span class="dt">body</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span>         <span class="co">// request body. can be null, a string, a Buffer, a Blob, or a Node.js Readable stream</span></a>
<a class="sourceLine" id="cb18-6" title="6">    <span class="dt">redirect</span><span class="op">:</span> <span class="st">&#39;follow&#39;</span><span class="op">,</span> <span class="co">// set to `manual` to extract redirect headers, `error` to reject redirect</span></a>
<a class="sourceLine" id="cb18-7" title="7">    <span class="dt">signal</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span>       <span class="co">// pass an instance of AbortSignal to optionally abort requests</span></a>
<a class="sourceLine" id="cb18-8" title="8"></a>
<a class="sourceLine" id="cb18-9" title="9">    <span class="co">// The following properties are node-fetch extensions</span></a>
<a class="sourceLine" id="cb18-10" title="10">    <span class="dt">follow</span><span class="op">:</span> <span class="dv">20</span><span class="op">,</span>         <span class="co">// maximum redirect count. 0 to not follow redirect</span></a>
<a class="sourceLine" id="cb18-11" title="11">    <span class="dt">timeout</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span>         <span class="co">// req/res timeout in ms, it resets on redirect. 0 to disable (OS limit applies). Signal is recommended instead.</span></a>
<a class="sourceLine" id="cb18-12" title="12">    <span class="dt">compress</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span>     <span class="co">// support gzip/deflate content encoding. false to disable</span></a>
<a class="sourceLine" id="cb18-13" title="13">    <span class="dt">size</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span>            <span class="co">// maximum response body size in bytes. 0 to disable</span></a>
<a class="sourceLine" id="cb18-14" title="14">    <span class="dt">agent</span><span class="op">:</span> <span class="kw">null</span>         <span class="co">// http(s).Agent instance or function that returns an instance (see below)</span></a>
<a class="sourceLine" id="cb18-15" title="15"><span class="op">}</span></a></code></pre></div>
<h5 id="default-headers">Default Headers</h5>
<p>If no values are set, the following request headers will be sent automatically:</p>
<table>
<thead>
<tr class="header">
<th>Header</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>Accept-Encoding</code></td>
<td><code>gzip,deflate</code> <em>(when <code>options.compress === true</code>)</em></td>
</tr>
<tr class="even">
<td><code>Accept</code></td>
<td><code>*/*</code></td>
</tr>
<tr class="odd">
<td><code>Connection</code></td>
<td><code>close</code> <em>(when no <code>options.agent</code> is present)</em></td>
</tr>
<tr class="even">
<td><code>Content-Length</code></td>
<td><em>(automatically calculated, if possible)</em></td>
</tr>
<tr class="odd">
<td><code>Transfer-Encoding</code></td>
<td><code>chunked</code> <em>(when <code>req.body</code> is a stream)</em></td>
</tr>
<tr class="even">
<td><code>User-Agent</code></td>
<td><code>node-fetch/1.0 (+https://github.com/bitinn/node-fetch)</code></td>
</tr>
</tbody>
</table>
<p>Note: when <code>body</code> is a <code>Stream</code>, <code>Content-Length</code> is not set automatically.</p>
<h5 id="custom-agent">Custom Agent</h5>
<p>The <code>agent</code> option allows you to specify networking related options that’s out of the scope of Fetch. Including and not limit to:</p>
<ul>
<li>Support self-signed certificate</li>
<li>Use only IPv4 or IPv6</li>
<li>Custom DNS Lookup</li>
</ul>
<p>See <a href="https://nodejs.org/api/http.html#http_new_agent_options"><code>http.Agent</code></a> for more information.</p>
<p>In addition, <code>agent</code> option accepts a function that returns http(s).Agent instance given current <a href="https://nodejs.org/api/url.html">URL</a>, this is useful during a redirection chain across HTTP and HTTPS protocol.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb19-1" title="1"><span class="kw">const</span> httpAgent <span class="op">=</span> <span class="kw">new</span> <span class="va">http</span>.<span class="at">Agent</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb19-2" title="2">    <span class="dt">keepAlive</span><span class="op">:</span> <span class="kw">true</span></a>
<a class="sourceLine" id="cb19-3" title="3"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb19-4" title="4"><span class="kw">const</span> httpsAgent <span class="op">=</span> <span class="kw">new</span> <span class="va">https</span>.<span class="at">Agent</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb19-5" title="5">    <span class="dt">keepAlive</span><span class="op">:</span> <span class="kw">true</span></a>
<a class="sourceLine" id="cb19-6" title="6"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb19-7" title="7"></a>
<a class="sourceLine" id="cb19-8" title="8"><span class="kw">const</span> options <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb19-9" title="9">    <span class="dt">agent</span><span class="op">:</span> <span class="kw">function</span> (_parsedURL) <span class="op">{</span></a>
<a class="sourceLine" id="cb19-10" title="10">        <span class="cf">if</span> (<span class="va">_parsedURL</span>.<span class="at">protocol</span> <span class="op">==</span> <span class="st">&#39;http:&#39;</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb19-11" title="11">            <span class="cf">return</span> httpAgent<span class="op">;</span></a>
<a class="sourceLine" id="cb19-12" title="12">        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb19-13" title="13">            <span class="cf">return</span> httpsAgent<span class="op">;</span></a>
<a class="sourceLine" id="cb19-14" title="14">        <span class="op">}</span></a>
<a class="sourceLine" id="cb19-15" title="15">    <span class="op">}</span></a>
<a class="sourceLine" id="cb19-16" title="16"><span class="op">}</span></a></code></pre></div>
<p><a id="class-request"></a> ### Class: Request</p>
<p>An HTTP(S) request containing information about URL, method, headers, and the body. This class implements the <a href="#iface-body">Body</a> interface.</p>
<p>Due to the nature of Node.js, the following properties are not implemented at this moment:</p>
<ul>
<li><code>type</code></li>
<li><code>destination</code></li>
<li><code>referrer</code></li>
<li><code>referrerPolicy</code></li>
<li><code>mode</code></li>
<li><code>credentials</code></li>
<li><code>cache</code></li>
<li><code>integrity</code></li>
<li><code>keepalive</code></li>
</ul>
<p>The following node-fetch extension properties are provided:</p>
<ul>
<li><code>follow</code></li>
<li><code>compress</code></li>
<li><code>counter</code></li>
<li><code>agent</code></li>
</ul>
<p>See <a href="#fetch-options">options</a> for exact meaning of these extensions.</p>
<h4 id="new-requestinput-options">new Request(input[, options])</h4>
<p><small><em>(spec-compliant)</em></small></p>
<ul>
<li><code>input</code> A string representing a URL, or another <code>Request</code> (which will be cloned)</li>
<li><code>options</code> [Options][#fetch-options] for the HTTP(S) request</li>
</ul>
<p>Constructs a new <code>Request</code> object. The constructor is identical to that in the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request/Request">browser</a>.</p>
<p>In most cases, directly <code>fetch(url, options)</code> is simpler than creating a <code>Request</code> object.</p>
<p><a id="class-response"></a> ### Class: Response</p>
<p>An HTTP(S) response. This class implements the <a href="#iface-body">Body</a> interface.</p>
<p>The following properties are not implemented in node-fetch at this moment:</p>
<ul>
<li><code>Response.error()</code></li>
<li><code>Response.redirect()</code></li>
<li><code>type</code></li>
<li><code>trailer</code></li>
</ul>
<h4 id="new-responsebody-options">new Response([body[, options]])</h4>
<p><small><em>(spec-compliant)</em></small></p>
<ul>
<li><code>body</code> A string or <a href="https://nodejs.org/api/stream.html#stream_readable_streams">Readable stream</a></li>
<li><code>options</code> A <a href="https://fetch.spec.whatwg.org/#responseinit"><code>ResponseInit</code></a> options dictionary</li>
</ul>
<p>Constructs a new <code>Response</code> object. The constructor is identical to that in the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response/Response">browser</a>.</p>
<p>Because Node.js does not implement service workers (for which this class was designed), one rarely has to construct a <code>Response</code> directly.</p>
<h4 id="response.ok">response.ok</h4>
<p><small><em>(spec-compliant)</em></small></p>
<p>Convenience property representing if the request ended normally. Will evaluate to true if the response status was greater than or equal to 200 but smaller than 300.</p>
<h4 id="response.redirected">response.redirected</h4>
<p><small><em>(spec-compliant)</em></small></p>
<p>Convenience property representing if the request has been redirected at least once. Will evaluate to true if the internal redirect counter is greater than 0.</p>
<p><a id="class-headers"></a> ### Class: Headers</p>
<p>This class allows manipulating and iterating over a set of HTTP headers. All methods specified in the <a href="https://fetch.spec.whatwg.org/">Fetch Standard</a> are implemented.</p>
<h4 id="new-headersinit">new Headers([init])</h4>
<p><small><em>(spec-compliant)</em></small></p>
<ul>
<li><code>init</code> Optional argument to pre-fill the <code>Headers</code> object</li>
</ul>
<p>Construct a new <code>Headers</code> object. <code>init</code> can be either <code>null</code>, a <code>Headers</code> object, an key-value map object, or any iterable object.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb20-1" title="1"><span class="co">// Example adapted from https://fetch.spec.whatwg.org/#example-headers-class</span></a>
<a class="sourceLine" id="cb20-2" title="2"></a>
<a class="sourceLine" id="cb20-3" title="3"><span class="kw">const</span> meta <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb20-4" title="4">  <span class="st">&#39;Content-Type&#39;</span><span class="op">:</span> <span class="st">&#39;text/xml&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb20-5" title="5">  <span class="st">&#39;Breaking-Bad&#39;</span><span class="op">:</span> <span class="st">&#39;&lt;3&#39;</span></a>
<a class="sourceLine" id="cb20-6" title="6"><span class="op">};</span></a>
<a class="sourceLine" id="cb20-7" title="7"><span class="kw">const</span> headers <span class="op">=</span> <span class="kw">new</span> <span class="at">Headers</span>(meta)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-8" title="8"></a>
<a class="sourceLine" id="cb20-9" title="9"><span class="co">// The above is equivalent to</span></a>
<a class="sourceLine" id="cb20-10" title="10"><span class="kw">const</span> meta <span class="op">=</span> [</a>
<a class="sourceLine" id="cb20-11" title="11">  [ <span class="st">&#39;Content-Type&#39;</span><span class="op">,</span> <span class="st">&#39;text/xml&#39;</span> ]<span class="op">,</span></a>
<a class="sourceLine" id="cb20-12" title="12">  [ <span class="st">&#39;Breaking-Bad&#39;</span><span class="op">,</span> <span class="st">&#39;&lt;3&#39;</span> ]</a>
<a class="sourceLine" id="cb20-13" title="13">]<span class="op">;</span></a>
<a class="sourceLine" id="cb20-14" title="14"><span class="kw">const</span> headers <span class="op">=</span> <span class="kw">new</span> <span class="at">Headers</span>(meta)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-15" title="15"></a>
<a class="sourceLine" id="cb20-16" title="16"><span class="co">// You can in fact use any iterable objects, like a Map or even another Headers</span></a>
<a class="sourceLine" id="cb20-17" title="17"><span class="kw">const</span> meta <span class="op">=</span> <span class="kw">new</span> <span class="at">Map</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb20-18" title="18"><span class="va">meta</span>.<span class="at">set</span>(<span class="st">&#39;Content-Type&#39;</span><span class="op">,</span> <span class="st">&#39;text/xml&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-19" title="19"><span class="va">meta</span>.<span class="at">set</span>(<span class="st">&#39;Breaking-Bad&#39;</span><span class="op">,</span> <span class="st">&#39;&lt;3&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-20" title="20"><span class="kw">const</span> headers <span class="op">=</span> <span class="kw">new</span> <span class="at">Headers</span>(meta)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-21" title="21"><span class="kw">const</span> copyOfHeaders <span class="op">=</span> <span class="kw">new</span> <span class="at">Headers</span>(headers)<span class="op">;</span></a></code></pre></div>
<p><a id="iface-body"></a> ### Interface: Body</p>
<p><code>Body</code> is an abstract interface with methods that are applicable to both <code>Request</code> and <code>Response</code> classes.</p>
<p>The following methods are not yet implemented in node-fetch at this moment:</p>
<ul>
<li><code>formData()</code></li>
</ul>
<h4 id="body.body">body.body</h4>
<p><small><em>(deviation from spec)</em></small></p>
<ul>
<li>Node.js <a href="https://nodejs.org/api/stream.html#stream_readable_streams"><code>Readable</code> stream</a></li>
</ul>
<p>The data encapsulated in the <code>Body</code> object. Note that while the <a href="https://fetch.spec.whatwg.org/">Fetch Standard</a> requires the property to always be a WHATWG <code>ReadableStream</code>, in node-fetch it is a Node.js <a href="https://nodejs.org/api/stream.html#stream_readable_streams"><code>Readable</code> stream</a>.</p>
<h4 id="body.bodyused">body.bodyUsed</h4>
<p><small><em>(spec-compliant)</em></small></p>
<ul>
<li><code>Boolean</code></li>
</ul>
<p>A boolean property for if this body has been consumed. Per spec, a consumed body cannot be used again.</p>
<h4 id="body.arraybuffer">body.arrayBuffer()</h4>
<h4 id="body.blob">body.blob()</h4>
<h4 id="body.json">body.json()</h4>
<h4 id="body.text">body.text()</h4>
<p><small><em>(spec-compliant)</em></small></p>
<ul>
<li>Returns: <code>Promise</code></li>
</ul>
<p>Consume the body and return a promise that will resolve to one of these formats.</p>
<h4 id="body.buffer">body.buffer()</h4>
<p><small><em>(node-fetch extension)</em></small></p>
<ul>
<li>Returns: <code>Promise&lt;Buffer&gt;</code></li>
</ul>
<p>Consume the body and return a promise that will resolve to a Buffer.</p>
<h4 id="body.textconverted">body.textConverted()</h4>
<p><small><em>(node-fetch extension)</em></small></p>
<ul>
<li>Returns: <code>Promise&lt;String&gt;</code></li>
</ul>
<p>Identical to <code>body.text()</code>, except instead of always converting to UTF-8, encoding sniffing will be performed and text converted to UTF-8, if possible.</p>
<p>(This API requires an optional dependency on npm package <a href="https://www.npmjs.com/package/encoding">encoding</a>, which you need to install manually. <code>webpack</code> users may see <a href="https://github.com/bitinn/node-fetch/issues/412#issuecomment-379007792">a warning message</a> due to this optional dependency.)</p>
<p><a id="class-fetcherror"></a> ### Class: FetchError</p>
<p><small><em>(node-fetch extension)</em></small></p>
<p>An operational error in the fetching process. See <a href="https://github.com/bitinn/node-fetch/blob/master/ERROR-HANDLING.md">ERROR-HANDLING.md</a> for more info.</p>
<p><a id="class-aborterror"></a> ### Class: AbortError</p>
<p><small><em>(node-fetch extension)</em></small></p>
<p>An Error thrown when the request is aborted in response to an <code>AbortSignal</code>’s <code>abort</code> event. It has a <code>name</code> property of <code>AbortError</code>. See <a href="https://github.com/bitinn/node-fetch/blob/master/ERROR-HANDLING.md">ERROR-HANDLING.MD</a> for more info.</p>
<h2 id="acknowledgement">Acknowledgement</h2>
<p>Thanks to <a href="https://github.com/github/fetch">github/fetch</a> for providing a solid implementation reference.</p>
<p><code>node-fetch</code> v1 was maintained by <span class="citation" data-cites="bitinn">[@bitinn]</span>(https://github.com/bitinn); v2 was maintained by <span class="citation" data-cites="TimothyGu">[@TimothyGu]</span>(https://github.com/timothygu), <span class="citation" data-cites="bitinn">[@bitinn]</span>(https://github.com/bitinn) and <span class="citation" data-cites="jimmywarting">[@jimmywarting]</span>(https://github.com/jimmywarting); v2 readme is written by <span class="citation" data-cites="jkantr">[@jkantr]</span>(https://github.com/jkantr).</p>
<h2 id="license">License</h2>
<p>MIT</p>
</body>
</html>
