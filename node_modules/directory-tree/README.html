<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<p><a href="https://api.travis-ci.com/mihneadb/node-directory-tree.svg?branch=master"><img src="https://api.travis-ci.com/mihneadb/node-directory-tree.svg?branch=master" alt="Build Status" /></a></p>
<h1 id="directory-tree">directory-tree</h1>
<p>Creates a JavaScript object representing a directory tree.</p>
<h2 id="install">Install</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1">$ <span class="ex">npm</span> install directory-tree</a></code></pre></div>
<h2 id="usage">Usage</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">const</span> dirTree <span class="op">=</span> <span class="at">require</span>(<span class="st">&quot;directory-tree&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="kw">const</span> tree <span class="op">=</span> <span class="at">dirTree</span>(<span class="st">&quot;/some/path&quot;</span>)<span class="op">;</span></a></code></pre></div>
<p>And you can also filter by an extensions regex: This is useful for including only certain types of files.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">const</span> dirTree <span class="op">=</span> <span class="at">require</span>(<span class="st">&quot;directory-tree&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="kw">const</span> filteredTree <span class="op">=</span> <span class="at">dirTree</span>(<span class="st">&quot;/some/path&quot;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">extensions</span><span class="op">:</span> <span class="ss">/</span><span class="sc">\.</span><span class="ss">txt/</span> <span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>Example for filtering multiple extensions with Regex.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">const</span> dirTree <span class="op">=</span> <span class="at">require</span>(<span class="st">&quot;directory-tree&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="kw">const</span> filteredTree <span class="op">=</span> <span class="at">dirTree</span>(<span class="st">&quot;/some/path&quot;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-3" title="3">  <span class="dt">extensions</span><span class="op">:</span> <span class="ss">/</span><span class="sc">\.(</span><span class="ss">md</span><span class="sc">|</span><span class="ss">js</span><span class="sc">|</span><span class="ss">html</span><span class="sc">|</span><span class="ss">java</span><span class="sc">|</span><span class="ss">py</span><span class="sc">|</span><span class="ss">rb</span><span class="sc">)$</span><span class="ss">/</span></a>
<a class="sourceLine" id="cb4-4" title="4">})<span class="op">;</span></a></code></pre></div>
<p>You can also exclude paths from the tree using a regex:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">const</span> dirTree <span class="op">=</span> <span class="at">require</span>(<span class="st">&quot;directory-tree&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="kw">const</span> filteredTree <span class="op">=</span> <span class="at">dirTree</span>(<span class="st">&quot;/some/path&quot;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">exclude</span><span class="op">:</span> <span class="ss">/some_path_to_exclude/</span> <span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>You can also specify which additional attributes you would like to be included about each file/directory:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">const</span> dirTree <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;directory-tree&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="kw">const</span> filteredTree <span class="op">=</span> <span class="at">dirTree</span>(<span class="st">&#39;/some/path&#39;</span><span class="op">,</span> <span class="op">{</span><span class="dt">attributes</span><span class="op">:</span>[<span class="st">&#39;mode&#39;</span><span class="op">,</span> <span class="st">&#39;mtime&#39;</span>]<span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>The default attributes are <code>[name, path]</code> for Files and <code>[name, path, children]</code> for Directories</p>
<p>A callback function can be executed with each file that matches the extensions provided:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">const</span> PATH <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;path&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="kw">const</span> dirTree <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;directory-tree&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-3" title="3"></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="kw">const</span> tree <span class="op">=</span> <span class="at">dirTree</span>(<span class="st">&#39;./test/test_data&#39;</span><span class="op">,</span> <span class="op">{</span><span class="dt">extensions</span><span class="op">:</span><span class="ss">/</span><span class="sc">\.</span><span class="ss">txt</span><span class="sc">$</span><span class="ss">/</span><span class="op">},</span> (item<span class="op">,</span> PATH<span class="op">,</span> stats) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb7-5" title="5">  <span class="va">console</span>.<span class="at">log</span>(item)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>The callback function takes the directory item (has path, name, size, and extension) and an instance of <a href="https://nodejs.org/api/path.html">node path</a> and an instance of <a href="https://nodejs.org/api/fs.html#fs_class_fs_stats">node FS.stats</a>.</p>
<p>You can also pass a callback function for directories:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">const</span> PATH <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;path&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="kw">const</span> dirTree <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;directory-tree&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-3" title="3"></a>
<a class="sourceLine" id="cb8-4" title="4"><span class="kw">const</span> tree <span class="op">=</span> <span class="at">dirTree</span>(<span class="st">&#39;./test/test_data&#39;</span><span class="op">,</span> <span class="op">{</span><span class="dt">extensions</span><span class="op">:</span><span class="ss">/</span><span class="sc">\.</span><span class="ss">txt</span><span class="sc">$</span><span class="ss">/</span><span class="op">},</span> <span class="kw">null</span><span class="op">,</span> (item<span class="op">,</span> PATH<span class="op">,</span> stats) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-5" title="5">  <span class="va">console</span>.<span class="at">log</span>(item)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="options">Options</h2>
<p><code>exclude</code> : <code>RegExp|RegExp[]</code> - A RegExp or an array of RegExp to test for exclusion of directories.</p>
<p><code>extensions</code> : <code>RegExp</code> - A RegExp to test for exclusion of files with the matching extension.</p>
<p><code>attributes</code> : <code>string[]</code> - Array of <a href="https://nodejs.org/api/fs.html#fs_class_fs_stats">FS.stats</a> attributes.</p>
<p><code>normalizePath</code> : <code>Boolean</code> - If true, windows style paths will be normalized to unix style pathes (/ instead of \).</p>
<h2 id="result">Result</h2>
<p>Given a directory structured like this:</p>
<pre><code>photos
├── summer
│   └── june
│       └── windsurf.jpg
└── winter
    └── january
        ├── ski.png
        └── snowboard.jpg</code></pre>
<p><code>directory-tree</code> with <code>attributes: ["size", "type", "extension"]</code> will return this JS object:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb10-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb10-2" title="2">  <span class="dt">&quot;path&quot;</span><span class="fu">:</span> <span class="st">&quot;photos&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-3" title="3">  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;photos&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-4" title="4">  <span class="dt">&quot;size&quot;</span><span class="fu">:</span> <span class="dv">600</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-5" title="5">  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;directory&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-6" title="6">  <span class="dt">&quot;children&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb10-7" title="7">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb10-8" title="8">      <span class="dt">&quot;path&quot;</span><span class="fu">:</span> <span class="st">&quot;photos/summer&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-9" title="9">      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;summer&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-10" title="10">      <span class="dt">&quot;size&quot;</span><span class="fu">:</span> <span class="dv">400</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-11" title="11">      <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;directory&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-12" title="12">      <span class="dt">&quot;children&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb10-13" title="13">        <span class="fu">{</span></a>
<a class="sourceLine" id="cb10-14" title="14">          <span class="dt">&quot;path&quot;</span><span class="fu">:</span> <span class="st">&quot;photos/summer/june&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-15" title="15">          <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;june&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-16" title="16">          <span class="dt">&quot;size&quot;</span><span class="fu">:</span> <span class="dv">400</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-17" title="17">          <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;directory&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-18" title="18">          <span class="dt">&quot;children&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb10-19" title="19">            <span class="fu">{</span></a>
<a class="sourceLine" id="cb10-20" title="20">              <span class="dt">&quot;path&quot;</span><span class="fu">:</span> <span class="st">&quot;photos/summer/june/windsurf.jpg&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-21" title="21">              <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;windsurf.jpg&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-22" title="22">              <span class="dt">&quot;size&quot;</span><span class="fu">:</span> <span class="dv">400</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-23" title="23">              <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;file&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-24" title="24">              <span class="dt">&quot;extension&quot;</span><span class="fu">:</span> <span class="st">&quot;.jpg&quot;</span></a>
<a class="sourceLine" id="cb10-25" title="25">            <span class="fu">}</span></a>
<a class="sourceLine" id="cb10-26" title="26">          <span class="ot">]</span></a>
<a class="sourceLine" id="cb10-27" title="27">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb10-28" title="28">      <span class="ot">]</span></a>
<a class="sourceLine" id="cb10-29" title="29">    <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb10-30" title="30">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb10-31" title="31">      <span class="dt">&quot;path&quot;</span><span class="fu">:</span> <span class="st">&quot;photos/winter&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-32" title="32">      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;winter&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-33" title="33">      <span class="dt">&quot;size&quot;</span><span class="fu">:</span> <span class="dv">200</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-34" title="34">      <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;directory&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-35" title="35">      <span class="dt">&quot;children&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb10-36" title="36">        <span class="fu">{</span></a>
<a class="sourceLine" id="cb10-37" title="37">          <span class="dt">&quot;path&quot;</span><span class="fu">:</span> <span class="st">&quot;photos/winter/january&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-38" title="38">          <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;january&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-39" title="39">          <span class="dt">&quot;size&quot;</span><span class="fu">:</span> <span class="dv">200</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-40" title="40">          <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;directory&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-41" title="41">          <span class="dt">&quot;children&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb10-42" title="42">            <span class="fu">{</span></a>
<a class="sourceLine" id="cb10-43" title="43">              <span class="dt">&quot;path&quot;</span><span class="fu">:</span> <span class="st">&quot;photos/winter/january/ski.png&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-44" title="44">              <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;ski.png&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-45" title="45">              <span class="dt">&quot;size&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-46" title="46">              <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;file&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-47" title="47">              <span class="dt">&quot;extension&quot;</span><span class="fu">:</span> <span class="st">&quot;.png&quot;</span></a>
<a class="sourceLine" id="cb10-48" title="48">            <span class="fu">}</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb10-49" title="49">            <span class="fu">{</span></a>
<a class="sourceLine" id="cb10-50" title="50">              <span class="dt">&quot;path&quot;</span><span class="fu">:</span> <span class="st">&quot;photos/winter/january/snowboard.jpg&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-51" title="51">              <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;snowboard.jpg&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-52" title="52">              <span class="dt">&quot;size&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-53" title="53">              <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;file&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb10-54" title="54">              <span class="dt">&quot;extension&quot;</span><span class="fu">:</span> <span class="st">&quot;.jpg&quot;</span></a>
<a class="sourceLine" id="cb10-55" title="55">            <span class="fu">}</span></a>
<a class="sourceLine" id="cb10-56" title="56">          <span class="ot">]</span></a>
<a class="sourceLine" id="cb10-57" title="57">        <span class="fu">}</span></a>
<a class="sourceLine" id="cb10-58" title="58">      <span class="ot">]</span></a>
<a class="sourceLine" id="cb10-59" title="59">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb10-60" title="60">  <span class="ot">]</span></a>
<a class="sourceLine" id="cb10-61" title="61"><span class="fu">}</span></a></code></pre></div>
<h2 id="note">Note</h2>
<p>Device, FIFO and socket files are ignored.</p>
<p>Files to which the user does not have permissions are included in the directory tree, however, directories to which the user does not have permissions, along with all of its contained files, are completely ignored.</p>
<h2 id="dev">Dev</h2>
<p>To run tests go the package root in your CLI and run,</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb11-1" title="1">$ <span class="ex">npm</span> test</a></code></pre></div>
<p>Make sure you have the dev dependencies installed (e.g. <code>npm install .</code>)</p>
<h2 id="node-version">Node version</h2>
<p>This project requires at least Node v4.2. Check out version <code>0.1.1</code> if you need support for older versions of Node.</p>
</body>
</html>
