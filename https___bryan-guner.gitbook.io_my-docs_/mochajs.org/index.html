<!DOCTYPE html><html lang=en data-version=v7.1.0-264-g28b48247><!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Mocha - the fun, simple, flexible JavaScript test framework</title><link rel=stylesheet href=https://mochajs.org/static/bundle-1.cedded3869.css><link rel=icon href=https://mochajs.org/static/favicon.copy.f17f048f84.ico><!--[if lt IE 9]><script src=static/html5shiv.min.60cc5dd89d.js async></script><![endif]--><!-- Matomo -->
<script type="text/javascript">
  var _paq = _paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://mochajs.matomo.cloud/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', '1']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Code --></head><body><header id=_header><h1><a href=https://mochajs.org/ ><img id=mocha-logo loading=eager src=data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20192%20191.99999%22%20width%3D%22192%22%20height%3D%22192%22%3E%3Cpath%20d%3D%22M169.47386%20143.90113l-68.70282%2039.69498c-2.958045%201.71756-6.584028%201.71756-9.542066%200L22.52614%20143.90113c-2.958038-1.71757-4.77103-4.86645-4.77103-8.20617V56.305021c0-3.435142%201.812992-6.488601%204.77103-8.206172L91.228974%208.403878c2.958038-1.717571%206.584021-1.717571%209.542056%200l68.70282%2039.694971c2.95804%201.717571%204.77104%204.866451%204.77104%208.206172v79.389939c-.0954%203.33972-1.90842%206.4886-4.77104%208.20617z%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%238d6748%22%20fill-rule%3D%22evenodd%22%2F%3E%3Cpath%20d%3D%22M95.904583%2022.049024c.954207%200%201.812992.286262%202.671781.763365l59.351606%2034.255996c1.62216.954206%202.67177%202.767198%202.67177%204.67561v68.511985c0%201.90842-1.04962%203.72141-2.67177%204.67562l-59.351606%2034.25599c-.858789.47711-1.717574.76336-2.671781.76336-.954206%200-1.908412-.28625-2.671777-.76336L33.881192%20134.9316c-1.62215-.95421-2.671778-2.7672-2.671778-4.67562V61.743995c0-1.908412%201.049628-3.721404%202.671778-4.67561l59.351614-34.255996c.858785-.477103%201.812992-.763365%202.671777-.763365m0-2.862618c-1.431309%200-2.862618.381683-4.103085%201.145048L32.449883%2054.58745c-2.576357%201.431309-4.103086%204.198506-4.103086%207.061124v68.511996c0%202.95803%201.526729%205.62981%204.103086%207.06112l59.351615%2034.25599c1.240467.76337%202.671776%201.14506%204.103085%201.14506%201.431309%200%202.862617-.38169%204.103097-1.14506l59.35159-34.25599c2.57636-1.43131%204.10309-4.1985%204.10309-7.06112V61.648574c0-2.958038-1.52673-5.629815-4.10309-7.061124l-59.35159-34.255996c-1.24048-.763365-2.671788-1.145048-4.103097-1.145048z%22%20fill%3D%22%23fff%22%2F%3E%3Cpath%20d%3D%22M104.3493%2061.648574c0-.477103-.381682-.954206-.954206-.954206H85.456021c-.477103%200-.954206.381682-.954206.954206%200%203.2443.477103%2014.40851%205.248133%2019.847485.190841.190841.381683.286262.667944.286262h8.01533c.286263%200%20.477104-.09542.667945-.286262%204.77103-5.343554%205.248133-16.507764%205.248133-19.847485zm-7.061124%2017.36655H91.65836c-.286262%200-.477103-.095421-.667944-.286263-3.2443-3.816824-3.625983-11.450472-3.721403-14.122249%200-.477103.381682-.954206.954206-.954206h12.595519c.477103%200%20.954206.381683.954206.954206%200%202.671777-.477103%2010.210005-3.721403%2014.12225-.286262.19084-.477103.286261-.763365.286261zM96.23855%2058.785956s3.43514-2.003833%201.335888-5.629816c-1.240468-1.908412-1.812992-3.530562-1.335889-4.198506-1.240468%201.52673-3.339721%203.14888-1.049627%206.584021.763365.858786%201.145048%202.671777%201.049627%203.2443zM92.421725%2059.072217s2.290094-1.335888.858785-3.816824c-.858785-1.240467-1.240467-2.385515-.858785-2.767197-.858785%201.049627-2.194674%202.099253-.667944%204.484768.477103.477103.667944%201.717571.667944%202.099253z%22%20fill%3D%22%23fff%22%2F%3E%3Cpath%20d%3D%22M100.246214%2070.141007c-.381682%202.576357-1.145047%205.534395-2.767197%207.442807-.190841.190841-.381682.286262-.572524.286262h-4.77103c-.190841%200-.477103-.09542-.572523-.286262-1.145048-1.431309-1.908412-3.33972-2.385515-5.343553%200%200%205.534394.763364%208.683274-.381683%202.290095-.858785%202.385515-1.71757%202.385515-1.71757z%22%20fill%3D%22%23fff%22%2F%3E%3Cg%20fill%3D%22%23fff%22%3E%3Cpath%20d%3D%22M37.554879%2085.599145h3.530562l5.820657%208.969536%205.820657-8.969536h3.530562v19.08412h-3.339721V91.03812l-6.011498%208.969537h-.09542L40.8946%2091.13354v13.645146h-3.339721V85.599145zM73.528446%20104.969527c-1.43131%200-2.767198-.286262-4.007665-.763365-1.240468-.477103-2.290095-1.240468-3.14888-2.099253-.858786-.858785-1.52673-1.908412-2.003833-3.14888-.477103-1.145047-.763365-2.480936-.763365-3.816824v-.09542c0-1.335889.286262-2.576357.763365-3.816825.477103-1.145047%201.145047-2.194674%202.099253-3.14888.858786-.858785%201.908412-1.62215%203.14888-2.099253%201.240468-.572523%202.576356-.763365%204.007665-.763365%201.43131%200%202.767198.286262%204.007666.763365%201.240468.477103%202.290094%201.240468%203.14888%202.099253.858785.858786%201.52673%201.908412%202.003832%203.14888.477103%201.145048.763365%202.480936.763365%203.816824v.095421c0%201.335888-.286262%202.576356-.763365%203.816824-.477103%201.145047-1.145047%202.194674-2.099253%203.14888-.858785.858785-1.908412%201.62215-3.14888%202.099253-1.240468.572524-2.576356.763365-4.007665.763365zm0-3.05346c.954206%200%201.812991-.19084%202.576356-.572523.763365-.381682%201.43131-.858785%202.003833-1.431309.572523-.572524.954206-1.335888%201.335888-2.099253.286262-.858786.477103-1.717571.477103-2.576356v-.095421c0-.954206-.190841-1.812991-.477103-2.671777-.286262-.858785-.763365-1.52673-1.335888-2.194674-.572524-.572523-1.240468-1.049626-2.003833-1.431309-.763365-.381682-1.62215-.572523-2.576356-.572523-.954206%200-1.812992.19084-2.576356.572523-.763365.381683-1.43131.858786-2.003833%201.43131-.572524.572523-.954206%201.335888-1.335888%202.099253-.286262.858785-.477104%201.71757-.477104%202.576356v.09542c0%20.954206.190842%201.812992.477104%202.671777.286261.858786.763364%201.52673%201.335888%202.194674.572524.572524%201.240468%201.049627%202.003833%201.43131.763364.381682%201.71757.572523%202.576356.572523zM99.67369%20104.969527c-1.431308%200-2.671776-.286262-3.816823-.763365-1.145048-.477103-2.194674-1.240468-3.05346-2.099253-.858785-.858785-1.52673-1.908412-2.003832-3.14888-.477103-1.240468-.763365-2.480936-.763365-3.816824v-.09542c0-1.335889.286262-2.671777.763365-3.816825.477103-1.145047%201.145047-2.194674%202.003832-3.14888.858786-.858785%201.908412-1.62215%203.14888-2.099253%201.240468-.477103%202.480936-.763365%204.007666-.763365.858785%200%201.62215.095421%202.385515.190842.763364.19084%201.335888.381682%202.003832.572523.572524.286262%201.145047.572524%201.62215.954206.477104.381683.954207.763365%201.43131%201.240468l-2.194674%202.480936c-.763365-.667945-1.52673-1.240468-2.385515-1.717571-.858786-.477103-1.812992-.667944-2.958039-.667944-.954206%200-1.71757.19084-2.480936.572523-.763364.381683-1.431309.858786-2.003832%201.43131-.572524.572523-.954206%201.335888-1.335889%202.099253-.286262.858785-.477103%201.71757-.477103%202.576356v.09542c0%20.954206.190841%201.812992.477103%202.671777.286262.858786.763365%201.52673%201.335889%202.194674.572523.572524%201.240468%201.145047%202.003832%201.43131.763365.28626%201.62215.572523%202.480936.572523%201.145047%200%202.194674-.190841%202.958039-.667944.763364-.477103%201.62215-1.049627%202.480935-1.812992l2.194674%202.194674c-.477103.572524-.954206.954206-1.52673%201.431309-.572523.477103-1.145047.763365-1.71757%201.049627-.572524.286261-1.335889.572523-2.003833.667944-.858785.190841-1.71757.190841-2.576356.190841zM114.177622%2085.599145h3.339721v7.91991h9.160378v-7.91991h3.339721v19.08412h-3.33972v-8.01533h-9.160379v8.01533h-3.33972v-19.08412zM144.807636%2085.503724h3.053459l8.397013%2019.179541h-3.530563l-1.908412-4.580189h-8.969536l-2.003833%204.58019h-3.435141l8.397013-19.179542zm4.77103%2011.641314l-3.2443-7.633649-3.244301%207.633649h6.4886z%22%2F%3E%3C%2Fg%3E%3Cpath%20fill%3D%22%23fff%22%20d%3D%22M35.169365%20110.69476h121.66127v1.049627H35.169365zM156.83062%2074.816618h-51.71797c0%20.381682-.0954.667943-.0954%201.049626h51.81338v-1.049626zM35.169364%2074.816618v1.049626h48.759928c0-.381683-.09542-.667944-.09542-1.049626H35.169365z%22%2F%3E%3C%2Fsvg%3E alt="Mocha logo"></a></h1><p id=tag><em>simple</em>, <em>flexible</em>, <em>fun</em></p></header><main id=content><p>Mocha is a feature-rich JavaScript test framework running on <a href=https://nodejs.org/ >Node.js</a> and in the browser, making asynchronous testing <em>simple</em> and <em>fun</em>. Mocha tests run serially, allowing for flexible and accurate reporting, while mapping uncaught exceptions to the correct test cases. Hosted on <a href=https://github.com/mochajs/mocha>GitHub</a>.</p><nav class=badges><a href=https://gitter.im/mochajs/mocha><img src=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5OSIgaGVpZ2h0PSIyMCI+PGxpbmVhckdyYWRpZW50IGlkPSJiIiB4Mj0iMCIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2JiYiIgc3RvcC1vcGFjaXR5PSIuMSIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1vcGFjaXR5PSIuMSIvPjwvbGluZWFyR3JhZGllbnQ+PG1hc2sgaWQ9ImEiPjxyZWN0IHdpZHRoPSI5OSIgaGVpZ2h0PSIyMCIgcng9IjMiIGZpbGw9IiNmZmYiLz48L21hc2s+PGcgbWFzaz0idXJsKCNhKSI+PHBhdGggZmlsbD0iIzU1NSIgZD0iTTAgMGg0MHYyMEgweiIvPjxwYXRoIGZpbGw9IiM0NkJDOTkiIGQ9Ik00MCAwaDU5djIwSDQweiIvPjxwYXRoIGZpbGw9InVybCgjYikiIGQ9Ik0wIDBoOTl2MjBIMHoiLz48L2c+PGcgZmlsbD0iI2ZmZiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkRlamFWdSBTYW5zLFZlcmRhbmEsR2VuZXZhLHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiPjx0ZXh0IHg9IjIwIiB5PSIxNSIgZmlsbD0iIzAxMDEwMSIgZmlsbC1vcGFjaXR5PSIuMyI+Z2l0dGVyPC90ZXh0Pjx0ZXh0IHg9IjIwIiB5PSIxNCI+Z2l0dGVyPC90ZXh0Pjx0ZXh0IHg9IjY4LjUiIHk9IjE1IiBmaWxsPSIjMDEwMTAxIiBmaWxsLW9wYWNpdHk9Ii4zIj5qb2luIGNoYXQ8L3RleHQ+PHRleHQgeD0iNjguNSIgeT0iMTQiPmpvaW4gY2hhdDwvdGV4dD48L2c+PC9zdmc+ height=18 alt=Gitter></a><a href=#sponsors><img src=https://opencollective.com/mochajs/tiers/sponsors/badge.svg height=18 alt="OpenCollective sponsors"></a><a href=#backers><img src=https://opencollective.com/mochajs/tiers/backers/badge.svg height=18 alt="OpenCollective backers"></a></nav><h2 id=sponsors><a class=direct-link href=#sponsors>#</a> Sponsors</h2><p>Use Mocha at Work? Ask your manager or marketing team if they’d help <a href=https://opencollective.com/mochajs#support>support</a> our project. Your company’s logo will also be displayed on <a href=http://npmjs.com/package/mocha>npmjs.com</a> and our <a href=https://github.com/mochajs/mocha#sponsors>GitHub repository</a>.</p><ul class=image-list id=sponsors><li><a href=https://localizejs.com/ target=_blank rel=noopener><div class=sponsor title=Localize style="width:304px;background-position:0 0"></div></a></li></ul><h2 id=backers><a class=direct-link href=#backers>#</a> Backers</h2><p>Find Mocha helpful? Become a <a href=https://opencollective.com/mochajs#support>backer</a> and support Mocha with a monthly donation.</p><ul class="image-list faded-images" id=backers><li><a href=https://www.principal.com/about-us target=_blank rel=noopener><div class="backer backer-1" title="Principal Financial Group" style="background-position:-10px 0"></div></a></li><li><a href=https://www.codefirst.co.uk/ target=_blank rel=noopener><div class="backer backer-2" title=CodeFirst style="background-position:-52px 0"></div></a></li><li><a href=https://securitygladiators.com/ target=_blank rel=noopener><div class="backer backer-3" title="Security Gladiators" style="background-position:-142px 0"></div></a></li><li><a href=https://yannick.cr/ target=_blank rel=noopener><div class="backer backer-4" title="Yannick Croissant" style="background-position:-184px 0"></div></a></li><li><a href=https://www.firesticktricks.com/ target=_blank rel=noopener><div class="backer backer-5" title="Fire Stick Tricks" style="background-position:-226px 0"></div></a></li><li><a href=https://www.firestickhow.com/ target=_blank rel=noopener><div class="backer backer-6" title="Fire Stick How" style="background-position:-268px 0"></div></a></li><li><a href=https://www.coinnewsspan.com/ target=_blank rel=noopener><div class="backer backer-7" title=CoinNewsSpan style="background-position:-425px 0"></div></a></li><li><div class="backer backer-8" title="Geoff Dutton" style="background-position:-467px 0"></div></li><li><a href=https://thirdiron.com/ target=_blank rel=noopener><div class="backer backer-9" title="Third Iron" style="background-position:-509px 0"></div></a></li><li><a href=https://penguincreek.com/ target=_blank rel=noopener><div class="backer backer-10" title="Damon Overboe" style="background-position:-550px 0"></div></a></li><li><a href=https://top5hosting.co.uk/ target=_blank rel=noopener><div class="backer backer-11" title=Top5hosting style="background-position:-592px 0"></div></a></li><li><a href=https://matterapp.com/ target=_blank rel=noopener><div class="backer backer-12" title=Matter style="background-position:-634px 0"></div></a></li><li><a href=https://github.com/daprahamian target=_blank rel=noopener><div class="backer backer-13" title="Dan Aprahamian" style="background-position:-676px 0"></div></a></li><li><div class="backer backer-14" title="David Passarelli" style="background-position:-718px 0"></div></li><li><a href=https://topvet.net/ target=_blank rel=noopener><div class="backer backer-15" title=TopVet style="background-position:-760px 0"></div></a></li><li><a href=https://francois.hodierne.net/ target=_blank rel=noopener><div class="backer backer-16" title="François Hodierne" style="background-position:-802px 0"></div></a></li><li><a href=https://klamp.in/ target=_blank rel=noopener><div class="backer backer-17" title="Kevin Lamping" style="background-position:-844px 0"></div></a></li><li><a href=https://medikoo.com/ target=_blank rel=noopener><div class="backer backer-18" title="Mariusz Nowak" style="background-position:-886px 0"></div></a></li><li><a href=https://mattwelke.com/ target=_blank rel=noopener><div class="backer backer-19" title="Matt Welke" style="background-position:-928px 0"></div></a></li><li><a href=https://www.gavinmogan.com/ target=_blank rel=noopener><div class="backer backer-20" title="Gavin Mogan" style="background-position:-970px 0"></div></a></li><li><a href=https://solverfox.dev/ target=_blank rel=noopener><div class="backer backer-21" title="Sebastian Silbermann" style="background-position:-1012px 0"></div></a></li><li><a href=https://www.quora.com/profile/Alexandre-Morgaut target=_blank rel=noopener><div class="backer backer-22" title="Alexandre Morgaut" style="background-position:-1054px 0"></div></a></li><li><a href=https://twitter.com/sheridanvk target=_blank rel=noopener><div class="backer backer-23" title="Sheridan Kates" style="background-position:-1096px 0"></div></a></li><li><a href=https://howtohosting.guide/ target=_blank rel=noopener><div class="backer backer-24" title=HowToHostingGuide style="background-position:-1138px 0"></div></a></li><li><a href=https://6figr.com/ target=_blank rel=noopener><div class="backer backer-25" title=6figr.com style="background-position:-1180px 0"></div></a></li><li><a href=https://uppsats.eu/ target=_blank rel=noopener><div class="backer backer-26" title=Uppsats style="background-position:-1222px 0"></div></a></li><li><a href=https://sensorstechforum.com/ target=_blank rel=noopener><div class="backer backer-27" title=SensorsTechForum style="background-position:-1274px 0"></div></a></li><li><a href=https://www.scrapingbee.com/ target=_blank rel=noopener><div class="backer backer-28" title=ScrapingBee style="background-position:-1316px 0"></div></a></li><li><a href=https://github.com/metabolize target=_blank rel=noopener><div class="backer backer-29" title=Metabolize style="background-position:-1404px 0"></div></a></li><li><a href=https://www.lambdatest.com/ target=_blank rel=noopener><div class="backer backer-30" title="LambdaTest Inc" style="background-position:-1444px 0"></div></a></li><li><a href=https://www.findswiftcodes.com/ target=_blank rel=noopener><div class="backer backer-31" title="Find Swift Codes" style="background-position:-1486px 0"></div></a></li><li><a href=https://badassjs.com/ target=_blank rel=noopener><div class="backer backer-32" title=devongovett style="background-position:-1528px 0"></div></a></li><li><a href=https://www.vpsserver.com/ target=_blank rel=noopener><div class="backer backer-33" title="VPS Server" style="background-position:-1570px 0"></div></a></li><li><a href=https://www.hrank.com/ target=_blank rel=noopener><div class="backer backer-34" title=HRANK.com style="background-position:-1612px 0"></div></a></li><li><a href=https://www.scrapingdog.com/ target=_blank rel=noopener><div class="backer backer-35" title=Scrapingdog style="background-position:-1654px 0"></div></a></li><li><a href=https://studyclerk.com/research-paper-writing target=_blank rel=noopener><div class="backer backer-36" title=StudyClerk style="background-position:-1696px 0"></div></a></li><li><a href=https://gamblizard.com/deposit-bonuses/deposit-10-pound/ target=_blank rel=noopener><div class="backer backer-37" title=Gamblizard style="background-position:-1738px 0"></div></a></li><li><a href=https://proxycrawl.com/ target=_blank rel=noopener><div class="backer backer-38" title=ProxyCrawl style="background-position:-1780px 0"></div></a></li><li><a href=https://qiwu.ai/ target=_blank rel=noopener><div class="backer backer-39" title=Qiwu.ai style="background-position:-1875px 0"></div></a></li><li><a href=https://moneyarcher.com/de/ target=_blank rel=noopener><div class="backer backer-40" title=MoneyArcher style="background-position:-1954px 0"></div></a></li><li><a href=https://wptheme.fr/theme-wordpress-divi/ target=_blank rel=noopener><div class="backer backer-41" title="Theme Divi" style="background-position:-1998px 0"></div></a></li><li><a href=https://windowsvps.host/ target=_blank rel=noopener><div class="backer backer-42" title="Windows VPS" style="background-position:-2040px 0"></div></a></li><li><a href=https://en.vpnwelt.com/ target=_blank rel=noopener><div class="backer backer-43" title=EN_VPNwelt style="background-position:-2078px 0"></div></a></li><li><a href=https://www.mamafacts.com/ target=_blank rel=noopener><div class="backer backer-44" title=Mamafacts style="background-position:-2120px 0"></div></a></li><li><a href=https://crosswordking.com/ target=_blank rel=noopener><div class="backer backer-45" title="Crossword King" style="background-position:-2156px 0"></div></a></li><li><a href=https://www.screenrecorderreview.com/ target=_blank rel=noopener><div class="backer backer-46" title="Best Screen Recorder" style="background-position:-2198px 0"></div></a></li><li><a href=https://catspurfection.com/ target=_blank rel=noopener><div class="backer backer-47" title=CatsPurFection style="background-position:-2240px 0"></div></a></li><li><a href=https://tripwire.com/ target=_blank rel=noopener><div class="backer backer-48" title="Tripwire, Inc." style="background-position:-2282px 0"></div></a></li><li><a href=https://vibrationsplatte-experten.com/ target=_blank rel=noopener><div class="backer backer-49" title="Vibrationsplatte Experten" style="background-position:-2366px 0"></div></a></li><li><a href=https://www.dpcoupon.com/ target=_blank rel=noopener><div class="backer backer-50" title=dpcoupon style="background-position:-2408px 0"></div></a></li><li><a href=https://apnews.com/article/business-furniture-and-home-furnishings-manufacturing-corporate-news-household-product-manufacturing-industrial-products-and-services-2177fc8237a457d51e6bc72bb76bb2f1 target=_blank rel=noopener><div class="backer backer-51" title=reviews style="background-position:-2473px 0"></div></a></li><li><a href=https://adaptjs.org/ target=_blank rel=noopener><div class="backer backer-52" title=Adapt.js style="background-position:-2547px 0"></div></a></li><li><a href=https://www.reachdigital.nl/ target=_blank rel=noopener><div class="backer backer-53" title="Reach Digital" style="background-position:-2589px 0"></div></a></li><li><a href=https://www.vpntopp.no/hva-er-vpn/ target=_blank rel=noopener><div class="backer backer-54" title="VPN Norge" style="background-position:-2631px 0"></div></a></li><li><a href=https://www.bystored.com/ target=_blank rel=noopener><div class="backer backer-55" title="STORED Enterprises Limited" style="background-position:-2670px 0"></div></a></li><li><a href=https://balsa.com/ target=_blank rel=noopener><div class="backer backer-56" title=Balsa style="background-position:-2712px 0"></div></a></li><li><a href=https://clouddevs.com/ target=_blank rel=noopener><div class="backer backer-57" title=CloudDevs style="background-position:-2754px 0"></div></a></li><li><a href=https://www.softwaredevelopment.co.uk/ target=_blank rel=noopener><div class="backer backer-58" title="Software Development UK" style="background-position:-2796px 0"></div></a></li><li><a href=https://steelbro.com.ua/vorota-kiev.html target=_blank rel=noopener><div class="backer backer-59" title=Steelbro style="background-position:-2838px 0"></div></a></li><li><a href=https://infatica.io/ target=_blank rel=noopener><div class="backer backer-60" title=Infatica style="background-position:-2880px 0"></div></a></li><li><a href=https://www.seng.nu/bedste-kontinentalsenge/ target=_blank rel=noopener><div class="backer backer-61" title="Rolf Hansen" style="background-position:-2922px 0"></div></a></li><li><a href=https://www.wp-kotisivut.com/ target=_blank rel=noopener><div class="backer backer-62" title="WordPress kotisivut" style="background-position:-2964px 0"></div></a></li><li><a href=https://www.realtimecommunicationsworld.com/ target=_blank rel=noopener><div class="backer backer-63" title="Real Time Communications World" style="background-position:-3006px 0"></div></a></li><li><a href=https://www.vendsoft.com/ target=_blank rel=noopener><div class="backer backer-64" title=VendSoft style="background-position:-3048px 0"></div></a></li><li><a href=https://seattletreeservicepros.com/ target=_blank rel=noopener><div class="backer backer-65" title="Seattle Tree Service" style="background-position:-3090px 0"></div></a></li><li><a href=https://pillarwm.com/ target=_blank rel=noopener><div class="backer backer-66" title=PillarWm style="background-position:-3132px 0"></div></a></li><li><a href=https://www.maxfreebets.co.uk/ target=_blank rel=noopener><div class="backer backer-67" title="Max Free Bets" style="background-position:-3179px 0"></div></a></li><li><a href=https://windesol.fi/ target=_blank rel=noopener><div class="backer backer-68" title="Windesol Sähkön Kilpailutus" style="background-position:-3221px 0"></div></a></li><li><a href=https://netinnopeustesti.com/ target=_blank rel=noopener><div class="backer backer-69" title="Netin nopeustesti" style="background-position:-3263px 0"></div></a></li><li><a href=https://www.reviewxl.com/ target=_blank rel=noopener><div class="backer backer-70" title=Reviewxl style="background-position:-3305px 0"></div></a></li><li><a href=https://messaged.com/ target=_blank rel=noopener><div class="backer backer-71" title=Messaged style="background-position:-3354px 0"></div></a></li><li><a href=https://blackjack77australia.com/ target=_blank rel=noopener><div class="backer backer-72" title=Blackjack77Australia style="background-position:-3396px 0"></div></a></li><li><a href=https://www.coupons4printing.com/ target=_blank rel=noopener><div class="backer backer-73" title=Coupons4Printing style="background-position:-3458px 0"></div></a></li><li><a href=https://renkaatsopivasti.fi/ target=_blank rel=noopener><div class="backer backer-74" title=Renkaatsopivasti style="background-position:-3500px 0"></div></a></li><li><a href=https://veepn.com/ target=_blank rel=noopener><div class="backer backer-75" title="VeePN VPN" style="background-position:-3542px 0"></div></a></li><li><a href=https://aapeli.net/ target=_blank rel=noopener><div class="backer backer-76" title=Aapeli style="background-position:-3584px 0"></div></a></li><li><a href=https://vpntesting.com/ target=_blank rel=noopener><div class="backer backer-77" title="VPN Test" style="background-position:-3626px 0"></div></a></li><li><a href=https://www.coupons4save.com/ target=_blank rel=noopener><div class="backer backer-78" title="Coupon Codes" style="background-position:-3668px 0"></div></a></li><li><a href=https://tommiaaltonen.fi/ target=_blank rel=noopener><div class="backer backer-79" title="Tommi Aaltonen" style="background-position:-3739px 0"></div></a></li><li><a href=https://www.booklearnpass.co.uk/ target=_blank rel=noopener><div class="backer backer-80" title="Book Learn Pass" style="background-position:-3782px 0"></div></a></li><li><a href=https://www.webhostingsecretrevealed.net/ target=_blank rel=noopener><div class="backer backer-81" title="Web Hosting Secret Revealed (WHSR)" style="background-position:-3824px 0"></div></a></li><li><a href=https://mingda.net/ target=_blank rel=noopener><div class="backer backer-82" title="Cui Mingda" style="background-position:-3866px 0"></div></a></li><li><a href=https://mobilemall.pk/ target=_blank rel=noopener><div class="backer backer-83" title=Mobilemall.pk style="background-position:-3908px 0"></div></a></li><li><a href=https://hdclipartall.com/ target=_blank rel=noopener><div class="backer backer-84" title="HD Clipart" style="background-position:-3977px 0"></div></a></li><li><a href=https://scantodigital.co.uk/ target=_blank rel=noopener><div class="backer backer-85" title="35mm Slides to Digital" style="background-position:-4019px 0"></div></a></li><li><a href=https://immigration.sg/ target=_blank rel=noopener><div class="backer backer-86" title=Immigration.sg style="background-position:-4054px 0"></div></a></li><li><a href=https://printdelivery.online/ target=_blank rel=noopener><div class="backer backer-87" title="online printing" style="background-position:-4186px 0"></div></a></li><li><a href=https://www.y-106.com/ target=_blank rel=noopener><div class="backer backer-88" title=Y-106FM style="background-position:-4228px 0"></div></a></li><li><a href=https://sugarbalanceherbalsupplement.com/ target=_blank rel=noopener><div class="backer backer-89" title="Sugar Balance" style="background-position:-4304px 0"></div></a></li><li><a href=https://theimagingprofessionals.co.uk/ target=_blank rel=noopener><div class="backer backer-90" title="The Imaging Professionals" style="background-position:-4332px 0"></div></a></li><li><a href=https://techreviewer.co/top-software-development-companies-for-startups target=_blank rel=noopener><div class="backer backer-91" title=Techreviewer style="background-position:-4409px 0"></div></a></li><li><a href=https://reportedcalls.net/ target=_blank rel=noopener><div class="backer backer-92" title="Reported Calls" style="background-position:-4452px 0"></div></a></li><li><a href=https://helppohinta.fi/ target=_blank rel=noopener><div class="backer backer-93" title=HelppoHinta.fi style="background-position:-4494px 0"></div></a></li><li><a href=https://www.qualityonesie.com/ target=_blank rel=noopener><div class="backer backer-94" title=QualityOnesie style="background-position:-4624px 0"></div></a></li><li><a href=https://vpsdime.com/ target=_blank rel=noopener><div class="backer backer-95" title=VPSDime style="background-position:-4666px 0"></div></a></li><li><a href=https://www.loadview-testing.com/products/jmeter-load-testing/ target=_blank rel=noopener><div class="backer backer-96" title=LoadView style="background-position:-4708px 0"></div></a></li><li><a href=https://www.dotcom-tools.com/china-firewall-test target=_blank rel=noopener><div class="backer backer-97" title=Dotcom-Tools style="background-position:-4750px 0"></div></a></li><li><a href=https://self-starters.com/ target=_blank rel=noopener><div class="backer backer-98" title=Self-Starters style="background-position:-4792px 0"></div></a></li><li><a href=https://www.123calendars.com/ target=_blank rel=noopener><div class="backer backer-99" title=123Calendars style="background-position:-4834px 0"></div></a></li><li><a href=https://celltrackingapps.com/ target=_blank rel=noopener><div class="backer backer-100" title=CellTrackingApps style="background-position:-4876px 0"></div></a></li><li><a href=https://proscriptie.nl/ target=_blank rel=noopener><div class="backer backer-101" title="scriptie schrijven" style="background-position:-4918px 0"></div></a></li><li><a href=https://analisilogica.com/ target=_blank rel=noopener><div class="backer backer-102" title="Analisi logica" style="background-position:-4960px 0"></div></a></li><li><a href=https://tigillo.com/ target=_blank rel=noopener><div class="backer backer-103" title="Tigillo Software Development and Cloud Consulting" style="background-position:-5002px 0"></div></a></li><li><a href=https://sumatosoft.com/services/business-analysis-services target=_blank rel=noopener><div class="backer backer-104" title=Sumatosoft.com style="background-position:-5044px 0"></div></a></li><li><a href=https://www.glassesonweb.com/ target=_blank rel=noopener><div class="backer backer-105" title=GlassesOnWeb.com style="background-position:-5086px 0"></div></a></li><li><a href=https://www.targetedwebtraffic.com/buy/buy-mobile-traffic/ target=_blank rel=noopener><div class="backer backer-106" title="Targeted Mobile Traffic" style="background-position:-5128px 0"></div></a></li><li><a href=https://blackjack77malaysia.com/ target=_blank rel=noopener><div class="backer backer-107" title=Blackjack77Malaysia style="background-position:-5174px 0"></div></a></li><li><a href=https://airproxy.io/ target=_blank rel=noopener><div class="backer backer-108" title=AIRPROXY style="background-position:-5236px 0"></div></a></li><li><a href=https://thefiresticktv.com/ target=_blank rel=noopener><div class="backer backer-109" title=TheFirestickTV style="background-position:-5278px 0"></div></a></li><li><a href=https://paddn.com/web-design-hong-kong/ target=_blank rel=noopener><div class="backer backer-110" title="THE PADDING" style="background-position:-5320px 0"></div></a></li><li><a href=https://www.forexinthai.com/ target=_blank rel=noopener><div class="backer backer-111" title="Forex In Thai" style="background-position:-5362px 0"></div></a></li><li><a href=https://coupontoaster.com/ target=_blank rel=noopener><div class="backer backer-112" title=Coupontoaster style="background-position:-5404px 0"></div></a></li><li><a href=https://dreamtechstore.com/ target=_blank rel=noopener><div class="backer backer-113" title="Dream Tech Store" style="background-position:-5446px 0"></div></a></li><li><div class="backer backer-114" title="Francesc Rosas" style="background-position:-5488px 0"></div></li></ul><h2 id=features><a class=direct-link href=#features>#</a> Features</h2><ul><li><a href=#running-mocha-in-the-browser>browser support</a></li><li><a href=#asynchronous-code>simple async support, including promises</a></li><li><a href=#parallel-tests>run Node.js tests in parallel</a></li><li><a href=#wallabyjs>test coverage reporting</a></li><li><a href=#diffs>string diff support</a></li><li><a href=#more-information>JavaScript API for running tests</a></li><li><a href=#reporters>auto-detects and disables coloring for non-TTYs</a></li><li><a href=#delayed-root-suite>async test timeout support</a></li><li><a href=#retry-tests>test retry support</a></li><li><a href=#test-level>test-specific timeouts</a></li><li><a href=#desktop-notification-support>Growl support</a></li><li><a href=#test-duration>reports test durations</a></li><li><a href=#dot-matrix>highlights slow tests</a></li><li><a href=#min>file watcher support</a></li><li><a href=#-check-leaks>global variable leak detection</a></li><li><a href=#-grep-regexp-g-regexp>optionally run tests that match a regexp</a></li><li><a href=#-exit>auto-exit to prevent “hanging” with an active loop</a></li><li><a href=#markdown>easily meta-generate suites</a> &amp; <a href=#list>test-cases</a></li><li><a href=#-config-path>config file support</a></li><li><a href=#-inspect-inspect-brk-inspect>node debugger support</a></li><li><a href=#nodejs-native-esm-support>node native ES modules support</a></li><li><a href=#-enable-source-maps>source-map support</a></li><li><a href=#detects-multiple-calls-to-done>detects multiple calls to <code>done()</code></a></li><li><a href=#assertions>use any assertion library you want</a></li><li><a href=#reporters>extensible reporting, bundled with 9+ reporters</a></li><li><a href=#interfaces>extensible test DSLs or “interfaces”</a></li><li><a href=#hooks>before, after, before each, after each hooks</a></li><li><a href=#-compilers>arbitrary transpiler support (coffee-script etc)</a></li><li><a href=#textmate>TextMate bundle</a></li></ul><h2 id=table-of-contents><a class=direct-link href=#table-of-contents>#</a> Table of Contents</h2><ul><li><a href=#installation>Installation</a></li><li><a href=#getting-started>Getting Started</a></li><li><a href=#run-cycle-overview>Run Cycle Overview</a></li><li><a href=#detects-multiple-calls-to-done>Detects Multiple Calls to <code>done()</code></a></li><li><a href=#assertions>Assertions</a></li><li><a href=#asynchronous-code>Asynchronous Code</a></li><li><a href=#synchronous-code>Synchronous Code</a></li><li><a href=#arrow-functions>Arrow Functions</a></li><li><a href=#hooks>Hooks</a></li><li><a href=#pending-tests>Pending Tests</a></li><li><a href=#exclusive-tests>Exclusive Tests</a></li><li><a href=#inclusive-tests>Inclusive Tests</a></li><li><a href=#retry-tests>Retry Tests</a></li><li><a href=#dynamically-generating-tests>Dynamically Generating Tests</a></li><li><a href=#timeouts>Timeouts</a></li><li><a href=#diffs>Diffs</a></li><li><a href=#command-line-usage>Command-Line Usage</a></li><li><a href=#parallel-tests>Parallel Tests</a></li><li><a href=#root-hook-plugins>Root Hook Plugins</a></li><li><a href=#global-fixtures>Global Fixtures</a></li><li><a href=#test-fixture-decision-tree-wizard-thing>Test Fixture Decision-Tree Wizard Thing</a></li><li><a href=#interfaces>Interfaces</a></li><li><a href=#reporters>Reporters</a></li><li><a href=#nodejs-native-esm-support>Node.JS native ESM support</a></li><li><a href=#running-mocha-in-the-browser>Running Mocha in the Browser</a></li><li><a href=#desktop-notification-support>Desktop Notification Support</a></li><li><a href=#configuring-mocha-nodejs>Configuring Mocha (Node.js)</a></li><li><a href=#the-test-directory>The <code>test/</code> Directory</a></li><li><a href=#error-codes>Error Codes</a></li><li><a href=#editor-plugins>Editor Plugins</a></li><li><a href=#examples>Examples</a></li><li><a href=#testing-mocha>Testing Mocha</a></li><li><a href=#more-information>More Information</a></li></ul><h2 id=installation><a class=direct-link href=#installation>#</a> Installation</h2><p>Install with <a href=https://npmjs.org/ >npm</a> globally:</p><pre class=language-bash><code class=language-bash>$ <span class="token function">npm</span> <span class="token function">install</span> --global mocha
</code></pre><p>or as a development dependency for your project:</p><pre class=language-bash><code class=language-bash>$ <span class="token function">npm</span> <span class="token function">install</span> --save-dev mocha
</code></pre><blockquote><p>As of v9.0.0, Mocha requires Node.js v12.0.0 or newer.</p></blockquote><h2 id=getting-started><a class=direct-link href=#getting-started>#</a> Getting Started</h2><pre class=language-bash><code class=language-bash>$ <span class="token function">npm</span> <span class="token function">install</span> mocha
$ <span class="token function">mkdir</span> <span class="token builtin class-name">test</span>
$ <span class="token variable">$EDITOR</span> test/test.js <span class="token comment"># or open with your favorite editor</span>
</code></pre><p>In your editor:</p><pre class=language-js><code class=language-js><span class="token keyword">var</span> assert <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'assert'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Array'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'#indexOf()'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should return -1 when the value is not present'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>Back in the terminal:</p><pre class=language-bash><code class=language-bash>$ ./node_modules/mocha/bin/mocha

  Array
    <span class="token comment">#indexOf()</span>
      ✓ should <span class="token builtin class-name">return</span> -1 when the value is not present


  <span class="token number">1</span> passing <span class="token punctuation">(</span>9ms<span class="token punctuation">)</span>
</code></pre><p>Set up a test script in package.json:</p><pre class=language-json><code class=language-json><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">"test"</span><span class="token operator">:</span> <span class="token string">"mocha"</span>
<span class="token punctuation">}</span>
</code></pre><p>Then run tests with:</p><pre class=language-bash><code class=language-bash>$ <span class="token function">npm</span> <span class="token builtin class-name">test</span>
</code></pre><h2 id=run-cycle-overview><a class=direct-link href=#run-cycle-overview>#</a> Run Cycle Overview</h2><blockquote><p>Updated for v8.0.0.</p></blockquote><p>The following is a mid-level outline of Mocha’s “flow of execution” when run in Node.js; the “less important” details have been omitted.</p><p>In a browser, test files are loaded by <code>&lt;script&gt;</code> tags, and calling <code>mocha.run()</code> begins at step 9 <a href=#serial-mode>below</a>.</p><h3 id=serial-mode><a class=direct-link href=#serial-mode>#</a> Serial Mode</h3><ol><li>User (that’s you) executes <code>mocha</code></li><li>Loads options from config files, if present</li><li>Mocha processes any command-line options provided (see section on <a href=#merging>configuration merging</a> for details)</li><li>If known flags for the <code>node</code> executable are found:<ol><li>Mocha will spawn <code>node</code> in a child process, executing itself with these flags</li><li>Otherwise, Mocha does not spawn a child process</li></ol></li><li>Mocha loads modules specified by <code>--require</code><ol><li>If a file loaded this way contains known Mocha-specific exports (e.g., <a href=#root-hook-plugins>root hook plugins</a>), Mocha “registers” these</li><li>If not, Mocha ignores any exports of a <code>--require</code>’d module</li></ol></li><li>Mocha validates any custom reporters or interfaces which were loaded via <code>--require</code> or otherwise</li><li>Mocha <em>discovers</em> test files; when given no files or directories, it finds files with extensions <code>.js</code>, <code>.mjs</code> or <code>.cjs</code> in the <code>test</code> directory (but not its children), relative to the current working directory</li><li>The (default) <a href=#bdd>bdd interface</a> loads the test files <em>in no particular order</em>, which are given an interface-specific <code>global</code> context (this is how, e.g., <code>describe()</code> ends up as a global in a test file)<ol><li>When a test file is loaded, Mocha executes all of its suites and finds–<em>but does not execute</em>–any hooks and tests therein.</li><li>Top-level hooks, tests and suites are all made members of an “invisible” <em>root suite</em>; there is only <em>one</em> root suite for the entire process</li></ol></li><li>Mocha runs <a href=#global-setup-fixtures>global setup fixtures</a>, if any</li><li>Starting with the “root” suite, Mocha executes:</li><li>Any “before all” hooks (for the <em>root</em> suite, this only happens once; see <a href=#root-hook-plugins>root hook plugins</a>)</li><li>For each test, Mocha executes:<ol><li>Any “before each” hooks</li><li>The test (and reports the result)</li><li>Any “after each” hooks</li></ol></li><li>If the current suite has a child suite, repeat the steps in 10. for each child suite; each child suite <em>inherits</em> any “before each” and “after each” hooks defined in its parent</li><li>Any “after all” hooks (for the <em>root</em> suite, this only happens once; see <a href=#root-hook-plugins>root hook plugins</a>)</li><li>Mocha prints a final summary/epilog, if applicable</li><li>Mocha runs <a href=#global-teardown-fixtures>global teardown fixtures</a>, if any</li></ol><h3 id=parallel-mode><a class=direct-link href=#parallel-mode>#</a> Parallel Mode</h3><ol><li>Repeat steps 1 through 6 from <a href=#serial-mode>Serial Mode</a> above, skipping reporter validation</li><li>All test files found are put into a queue (they are <em>not</em> loaded by the main process)</li><li>Mocha runs <a href=#global-setup-fixtures>global setup fixtures</a>, if any</li><li>Mocha creates a pool of subprocesses (“workers”)</li><li><em>Immediately before</em> a worker runs the first test it receives, the worker “bootstraps” itself by:<ol><li>Loading all <code>--require</code>’d modules</li><li>Registering any root hook plugins</li><li><em>Ignoring</em> global fixtures and custom reporters</li><li>Asserting the built-in or custom interface is valid</li></ol></li><li>When a worker receives a test file to run, the worker creates a new Mocha instance <em>for the single test file</em>, and:</li><li>The worker repeats step 8 from <a href=#serial-mode>above</a></li><li>The worker repeats step 10 from <a href=#serial-mode>above</a>, with the caveat that the worker <em>does not</em> report test results directly; it holds them in a memory buffer</li><li>When the worker completes the test file, buffered results are returned to the main process, which then gives them to the user-specified reporter (<code>spec</code> by default)</li><li>The worker makes itself available to the pool; the pool gives the worker another test file to run, if any remain</li><li>Mocha prints a final summary/epilog, if applicable</li><li>Mocha runs <a href=#global-teardown-fixtures>global teardown fixtures</a>, if any</li></ol><h2 id=detects-multiple-calls-to-done><a class=direct-link href=#detects-multiple-calls-to-done>#</a> Detects Multiple Calls to <code>done()</code></h2><p>If you use callback-based async tests, Mocha will throw an error if <code>done()</code> is called multiple times. This is handy for catching accidental double callbacks.</p><pre class=language-javascript><code class=language-javascript><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'double done'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Calling `done()` twice is an error</span>
  <span class="token function">setImmediate</span><span class="token punctuation">(</span>done<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">setImmediate</span><span class="token punctuation">(</span>done<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>Running the above test will give you the below error message:</p><pre class=language-bash><code class=language-bash>$ ./node_modules/.bin/mocha mocha.test.js


  ✓ double <span class="token keyword">done</span>
  <span class="token number">1</span><span class="token punctuation">)</span> double <span class="token keyword">done</span>

  <span class="token number">1</span> passing <span class="token punctuation">(</span>6ms<span class="token punctuation">)</span>
  <span class="token number">1</span> failing

  <span class="token number">1</span><span class="token punctuation">)</span> double done:
     Error: done<span class="token punctuation">(</span><span class="token punctuation">)</span> called multiple <span class="token builtin class-name">times</span>
      at Object.<span class="token operator">&lt;</span>anonymous<span class="token operator">&gt;</span> <span class="token punctuation">(</span>mocha.test.js:1:63<span class="token punctuation">)</span>
      at require <span class="token punctuation">(</span>internal/module.js:11:18<span class="token punctuation">)</span>
      at Array.forEach <span class="token punctuation">(</span><span class="token operator">&lt;</span>anonymous<span class="token operator">&gt;</span><span class="token punctuation">)</span>
      at startup <span class="token punctuation">(</span>bootstrap_node.js:187:16<span class="token punctuation">)</span>
      at bootstrap_node.js:608:3
</code></pre><h2 id=assertions><a class=direct-link href=#assertions>#</a> Assertions</h2><p>Mocha allows you to use any assertion library you wish. In the above example, we’re using Node.js’ built-in <a href=https://nodejs.org/api/assert.html>assert</a> module — but generally, if it throws an <code>Error</code>, it will work! This means you can use libraries such as:</p><ul><li><a href=https://github.com/shouldjs/should.js>should.js</a> - BDD style shown throughout these docs</li><li><a href=https://github.com/LearnBoost/expect.js>expect.js</a> - <code>expect()</code> style assertions</li><li><a href=https://www.chaijs.com/ >chai</a> - <code>expect()</code>, <code>assert()</code> and <code>should</code>-style assertions</li><li><a href=https://github.com/visionmedia/better-assert>better-assert</a> - C-style self-documenting <code>assert()</code></li><li><a href=https://unexpected.js.org/ >unexpected</a> - “the extensible BDD assertion toolkit”</li></ul><h2 id=asynchronous-code><a class=direct-link href=#asynchronous-code>#</a> Asynchronous Code</h2><p>By adding an argument (usually named <code>done</code>) to <code>it()</code> to a test callback, Mocha will know that it should wait for this function to be called to complete the test. This callback accepts both an <code>Error</code> instance (or subclass thereof) <em>or</em> a falsy value; anything else is invalid usage and throws an error (usually causing a failed test).</p><pre class=language-js><code class=language-js><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'User'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'#save()'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should save without error'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">'Luna'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      user<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token function">done</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>Alternatively, use the <code>done()</code> callback directly (which will handle an error argument, if it exists):</p><pre class=language-js><code class=language-js><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'User'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'#save()'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should save without error'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">'Luna'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      user<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>done<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h3 id=working-with-promises><a class=direct-link href=#working-with-promises>#</a> Working with Promises</h3><p>Alternately, instead of using the <code>done()</code> callback, you may return a <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise>Promise</a>. This is useful if the APIs you are testing return promises instead of taking callbacks:</p><pre class=language-js><code class=language-js><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> db<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> db<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">[</span>tobi<span class="token punctuation">,</span> loki<span class="token punctuation">,</span> jane<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'#find()'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'respond with matching records'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> db<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">'User'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>should<span class="token punctuation">.</span>eventually<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><blockquote><p>The latter example uses <a href=https://www.npmjs.com/package/chai-as-promised>Chai as Promised</a> for fluent promise assertions.</p></blockquote><p>In Mocha v3.0.0 and newer, returning a <code>Promise</code> <em>and</em> calling <code>done()</code> will result in an exception, as this is generally a mistake:</p><pre class=language-js><code class=language-js><span class="token keyword">const</span> assert <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'assert'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// antipattern</span>
<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should complete this test'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    assert<span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>done<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>The above test will fail with <code>Error: Resolution method is overspecified. Specify a callback *or* return a Promise; not both.</code>. In versions older than v3.0.0, the call to <code>done()</code> is effectively ignored.</p><h3 id=using-async-await><a class=direct-link href=#using-async-await>#</a> Using async / await</h3><p>If your JS environment supports <a href=https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Statements/async_function>async / await</a>, you can also write asynchronous tests like this:</p><pre class=language-js><code class=language-js><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> db<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> db<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">[</span>tobi<span class="token punctuation">,</span> loki<span class="token punctuation">,</span> jane<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'#find()'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'responds with matching records'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> users <span class="token operator">=</span> <span class="token keyword">await</span> db<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">'User'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    users<span class="token punctuation">.</span>should<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h2 id=synchronous-code><a class=direct-link href=#synchronous-code>#</a> Synchronous Code</h2><p>When testing synchronous code, omit the callback and Mocha will automatically continue on to the next test.</p><pre class=language-js><code class=language-js><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Array'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'#indexOf()'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should return -1 when the value is not present'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span>should<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>should<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h2 id=arrow-functions><a class=direct-link href=#arrow-functions>#</a> Arrow Functions</h2><p>Passing <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions>arrow functions</a> (aka “lambdas”) to Mocha is discouraged. Lambdas lexically bind <code>this</code> and cannot access the Mocha context. For example, the following code will fail:</p><pre class=language-js><code class=language-js><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'my suite'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'my test'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// should set the timeout of this test to 1000 ms; instead will fail</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">timeout</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    assert<span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p><em>If you do not need to use</em> Mocha’s context, lambdas should work. Be aware that using lambdas will be more painful to refactor if the need eventually arises!</p><h2 id=hooks><a class=direct-link href=#hooks>#</a> Hooks</h2><p>With its default “BDD”-style interface, Mocha provides the hooks <code>before()</code>, <code>after()</code>, <code>beforeEach()</code>, and <code>afterEach()</code>. These should be used to set up preconditions and clean up after your tests.</p><pre class=language-js><code class=language-js><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'hooks'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">before</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// runs once before the first test in this block</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">after</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// runs once after the last test in this block</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// runs before each test in this block</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// runs after each test in this block</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// test cases</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><blockquote><p>Tests can appear before, after, or interspersed with your hooks. Hooks will run in the order they are defined, as appropriate; all <code>before()</code> hooks run (once), then any <code>beforeEach()</code> hooks, tests, any <code>afterEach()</code> hooks, and finally <code>after()</code> hooks (once).</p></blockquote><h3 id=describing-hooks><a class=direct-link href=#describing-hooks>#</a> Describing Hooks</h3><p>Any hook can be invoked with an optional description, making it easier to pinpoint errors in your tests. If a hook is given a named function, that name will be used if no description is supplied.</p><pre class=language-js><code class=language-js><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// beforeEach hook</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">namedFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// beforeEach:namedFun</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token string">'some description'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// beforeEach:some description</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h3 id=asynchronous-hooks><a class=direct-link href=#asynchronous-hooks>#</a> Asynchronous Hooks</h3><p>All hooks (<code>before()</code>, <code>after()</code>, <code>beforeEach()</code>, <code>afterEach()</code>) may be sync or async as well, behaving much like a regular test-case. For example, you may wish to populate database with dummy content before each test:</p><pre class=language-js><code class=language-js><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Connection'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> db <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Connection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    tobi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">'tobi'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    loki <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">'loki'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    jane <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">'jane'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    db<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
      db<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">[</span>tobi<span class="token punctuation">,</span> loki<span class="token punctuation">,</span> jane<span class="token punctuation">]</span><span class="token punctuation">,</span> done<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'#find()'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'respond with matching records'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      db<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token operator">:</span> <span class="token string">'User'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        res<span class="token punctuation">.</span>should<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h3 id=root-level-hooks><a class=direct-link href=#root-level-hooks>#</a> Root-Level Hooks</h3><p>A hook defined at the top scope of a test file (outside of a suite) is a <em>root hook</em>.</p><p>As of v8.0.0, <a href=#root-hook-plugins>Root Hook Plugins</a> are the preferred mechanism for setting root hooks.</p><h3 id=delayed-root-suite><a class=direct-link href=#delayed-root-suite>#</a> Delayed Root Suite</h3><blockquote><p><em>WARNING: Delayed root suites are incompatible with <a href=#parallel-tests>parallel mode</a>.</em></p></blockquote><p>If you need to perform asynchronous operations before any of your suites are run (e.g. for dynamically generating tests), you may delay the root suite. Run <code>mocha</code> with the <code>--delay</code> flag. This will attach a special callback function, <code>run()</code>, to the global context:</p><pre class=language-js><code class=language-js><span class="token keyword">const</span> assert <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'assert'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token parameter">x</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span>
  <span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// instead of an IIFE, you can use 'setImmediate' or 'nextTick' or 'setTimeout'</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> z <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'my suite'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">it</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">expected value </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>z<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          assert<span class="token punctuation">.</span><span class="token function">strictEqual</span><span class="token punctuation">(</span>z<span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h2 id=pending-tests><a class=direct-link href=#pending-tests>#</a> Pending Tests</h2><p>“Pending” — as in “someone should write these test cases eventually” — test-cases are those <em>without</em> a callback:</p><pre class=language-js><code class=language-js><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Array'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'#indexOf()'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// pending test below</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should return -1 when the value is not present'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>Pending tests will be included in the test results, and marked as pending. A pending test is not considered a failed test.</p><p>Read the <a href=#inclusive-tests>inclusive tests section</a> for an example of conditionally marking a test as pending via <code>this.skip()</code>.</p><h2 id=exclusive-tests><a class=direct-link href=#exclusive-tests>#</a> Exclusive Tests</h2><blockquote><p><em>WARNING: Exclusive tests are incompatible with <a href=#parallel-tests>parallel mode</a>.</em></p></blockquote><p>The exclusivity feature allows you to run <em>only</em> the specified suite or test-case by appending <code>.only()</code> to the function. Here’s an example of executing only a particular suite:</p><pre class=language-js><code class=language-js><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Array'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  describe<span class="token punctuation">.</span><span class="token function">only</span><span class="token punctuation">(</span><span class="token string">'#indexOf()'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p><em>Note</em>: All nested suites will still be executed.</p><p>Here’s an example of executing an individual test case:</p><pre class=language-js><code class=language-js><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Array'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'#indexOf()'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    it<span class="token punctuation">.</span><span class="token function">only</span><span class="token punctuation">(</span><span class="token string">'should return -1 unless present'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should return the index when present'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>Previous to v3.0.0, <code>.only()</code> used string matching to decide which tests to execute; this is no longer the case. In v3.0.0 or newer, <code>.only()</code> can be used multiple times to define a subset of tests to run:</p><pre class=language-js><code class=language-js><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Array'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'#indexOf()'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    it<span class="token punctuation">.</span><span class="token function">only</span><span class="token punctuation">(</span><span class="token string">'should return -1 unless present'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// this test will be run</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    it<span class="token punctuation">.</span><span class="token function">only</span><span class="token punctuation">(</span><span class="token string">'should return the index when present'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// this test will also be run</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should return -1 if called with a non-Array context'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// this test will not be run</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>You may also choose multiple suites:</p><pre class=language-js><code class=language-js><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Array'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  describe<span class="token punctuation">.</span><span class="token function">only</span><span class="token punctuation">(</span><span class="token string">'#indexOf()'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should return -1 unless present'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// this test will be run</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should return the index when present'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// this test will also be run</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  describe<span class="token punctuation">.</span><span class="token function">only</span><span class="token punctuation">(</span><span class="token string">'#concat()'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should return a new Array'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// this test will also be run</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'#slice()'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should return a new Array'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// this test will not be run</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>But <em>tests will have precedence</em>:</p><pre class=language-js><code class=language-js><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Array'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  describe<span class="token punctuation">.</span><span class="token function">only</span><span class="token punctuation">(</span><span class="token string">'#indexOf()'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    it<span class="token punctuation">.</span><span class="token function">only</span><span class="token punctuation">(</span><span class="token string">'should return -1 unless present'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// this test will be run</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should return the index when present'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// this test will not be run</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p><em>Note</em>: Hooks, if present, will still be executed.</p><blockquote><p>Be mindful not to commit usages of <code>.only()</code> to version control, unless you really mean it! To do so one can run mocha with the option <code>--forbid-only</code> in the continuous integration test command (or in a git precommit hook).</p></blockquote><h2 id=inclusive-tests><a class=direct-link href=#inclusive-tests>#</a> Inclusive Tests</h2><p>This feature is the inverse of <code>.only()</code>. By appending <code>.skip()</code>, you may tell Mocha to ignore test case(s). Anything skipped will be marked as <a href=#pending-tests>pending</a>, and reported as such. Here’s an example of skipping an individual test:</p><pre class=language-js><code class=language-js><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Array'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'#indexOf()'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    it<span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token string">'should return -1 unless present'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// this test will not be run</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should return the index when present'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// this test will be run</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>You can also put <code>.skip()</code> on an entire suite. This is equivalent to appending <code>.skip()</code> onto all tests in the suite. Hooks in the suite are also skipped.</p><pre class=language-js><code class=language-js><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Array'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  describe<span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token string">'#indexOf()'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should return -1 unless present'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// this test will not be run</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p><em>Note</em>: Code in skipped suites, that is placed outside of hooks or tests is still executed, as mocha will still invoke the suite function to build up the suite structure for visualization.</p><blockquote><p><em>Best practice</em>: Use <code>.skip()</code> instead of commenting tests out.</p></blockquote><p>You may also skip <em>at runtime</em> using <code>this.skip()</code>. If a test needs an environment or configuration which cannot be detected beforehand, a runtime skip is appropriate. For example:</p><pre class=language-js><code class=language-js><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should only test in the correct environment'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token comment">/* check test environment */</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// make assertions</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>The above test will be reported as <a href=#pending-tests>pending</a>. It’s also important to note that calling <code>this.skip()</code> will effectively <em>abort</em> the test.</p><blockquote><p><em>Best practice</em>: To avoid confusion, do not execute further instructions in a test or hook after calling <code>this.skip()</code>.</p></blockquote><p>Contrast the above test with the following code:</p><pre class=language-js><code class=language-js><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should only test in the correct environment'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token comment">/* check test environment */</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// make assertions</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// do nothing</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>Because this test <em>does nothing</em>, it will be reported as <em>passing</em>.</p><blockquote><p><em>Best practice</em>: Don’t do nothing! A test should make an assertion or use <code>this.skip()</code>.</p></blockquote><p>To skip <em>multiple</em> tests in this manner, use <code>this.skip()</code> in a “before all” hook:</p><pre class=language-js><code class=language-js><span class="token function">before</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token comment">/* check test environment */</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// setup code</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>This will skip all <code>it</code>, <code>beforeEach/afterEach</code>, and <code>describe</code> blocks within the suite. <code>before/after</code> hooks are skipped unless they are defined at the same level as the hook containing <code>this.skip()</code>.</p><pre class=language-js><code class=language-js><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'outer'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">before</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">after</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// will be executed</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'inner'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">before</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// will be skipped</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">after</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// will be skipped</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><blockquote><p><em>Updated in v7.0.0:</em> skipping a test within an “after all” hook is disallowed and will throw an exception. Use a return statement or other means to abort hook execution.</p></blockquote><p>Before Mocha v3.0.0, <code>this.skip()</code> was not supported in asynchronous tests and hooks.</p><h2 id=retry-tests><a class=direct-link href=#retry-tests>#</a> Retry Tests</h2><p>You can choose to retry failed tests up to a certain number of times. This feature is designed to handle end-to-end tests (functional tests/Selenium…) where resources cannot be easily mocked/stubbed. <strong>It’s not recommended to use this feature for unit tests</strong>.</p><p>This feature does re-run a failed test and its corresponding <code>beforeEach/afterEach</code> hooks, but not <code>before/after</code> hooks. <code>this.retries()</code> has no effect on failing hooks.</p><p><strong>NOTE</strong>: Example below was written using Selenium webdriver (which <a href=https://github.com/SeleniumHQ/selenium/blob/c10e8a955883f004452cdde18096d70738397788/javascript/node/selenium-webdriver/testing/index.js>overwrites global Mocha hooks</a> for <code>Promise</code> chain).</p><pre class=language-js><code class=language-js><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'retries'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Retry all tests in this suite up to 4 times</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">retries</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    browser<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'http://www.yahoo.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should succeed on the 3rd try'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Specify this test to only retry up to 2 times</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">retries</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.foo'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isDisplayed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>eventually<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h2 id=dynamically-generating-tests><a class=direct-link href=#dynamically-generating-tests>#</a> Dynamically Generating Tests</h2><p>Given Mocha’s use of function expressions to define suites and test cases, it’s straightforward to generate your tests dynamically. No special syntax is required — plain ol’ JavaScript can be used to achieve functionality similar to “parameterized” tests, which you may have seen in other frameworks.</p><p>Take the following example:</p><pre class=language-js><code class=language-js><span class="token keyword">const</span> assert <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'assert'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> args<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> curr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> prev <span class="token operator">+</span> curr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'add()'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> tests <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>args<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> expected<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>args<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> expected<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>args<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> expected<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>

  tests<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>args<span class="token punctuation">,</span> expected<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">correctly adds </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>args<span class="token punctuation">.</span>length<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> args</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
      assert<span class="token punctuation">.</span><span class="token function">strictEqual</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> expected<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>The above code will produce a suite with three specs:</p><pre class=language-bash><code class=language-bash>$ mocha

  add<span class="token punctuation">(</span><span class="token punctuation">)</span>
    ✓ correctly adds <span class="token number">2</span> args
    ✓ correctly adds <span class="token number">3</span> args
    ✓ correctly adds <span class="token number">4</span> args
</code></pre><p>Tests added inside a <code>.forEach</code> handler often don’t play well with editor plugins, especially with “right-click run” features. Another way to parameterize tests is to generate them with a closure. This following example is equivalent to the one above:</p><pre class=language-js><code class=language-js><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'add()'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">testAdd</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>args<span class="token punctuation">,</span> expected<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
      assert<span class="token punctuation">.</span><span class="token function">strictEqual</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> expected<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'correctly adds 2 args'</span><span class="token punctuation">,</span> <span class="token function">testAdd</span><span class="token punctuation">(</span><span class="token punctuation">{</span>args<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> expected<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'correctly adds 3 args'</span><span class="token punctuation">,</span> <span class="token function">testAdd</span><span class="token punctuation">(</span><span class="token punctuation">{</span>args<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> expected<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'correctly adds 4 args'</span><span class="token punctuation">,</span> <span class="token function">testAdd</span><span class="token punctuation">(</span><span class="token punctuation">{</span>args<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> expected<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>With <code>top-level await</code> you can collect your test data in a dynamic and asynchronous way while the test file is being loaded.<br>See also <a href=#delayed-root-suite><code>--delay</code></a> for CommonJS modules without <code>top-level await</code>.</p><pre class=language-js><code class=language-js><span class="token comment">// testfile.mjs</span>
<span class="token keyword">import</span> assert <span class="token keyword">from</span> <span class="token string">'assert'</span><span class="token punctuation">;</span>

<span class="token comment">// top-level await: Node &gt;= v14.8.0 with ESM test file</span>
<span class="token keyword">const</span> tests <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>args<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> expected<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>args<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> expected<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>args<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> expected<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// in suites ASYNCHRONOUS callbacks are NOT supported</span>
<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'add()'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  tests<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>args<span class="token punctuation">,</span> expected<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">correctly adds </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>args<span class="token punctuation">.</span>length<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> args</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> args<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">sum<span class="token punctuation">,</span> curr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> sum <span class="token operator">+</span> curr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      assert<span class="token punctuation">.</span><span class="token function">strictEqual</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> expected<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h2 id=test-duration>Test duration</h2><p>Many reporters will display test duration and flag tests that are slow (default: 75ms), as shown here with the SPEC reporter:</p><p><img src=https://mochajs.org/static/reporter-spec-duration.resize920,9999-withoutEnlargement.443e6919d1.png alt="test duration" class=screenshot loading=lazy></p><p>There are three levels of test duration (depicted in the following image):</p><ol><li>FAST: Tests that run within half of the “slow” threshold will show the duration in green (if at all).</li><li>NORMAL: Tests that run exceeding half of the threshold (but still within it) will show the duration in yellow.</li><li>SLOW: Tests that run exceeding the threshold will show the duration in red.</li></ol><p><img src="data:image/png;base64,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" alt="test duration range" class=screenshot loading=lazy></p><p>To tweak what’s considered “slow”, you can use the <code>slow()</code> method:</p><pre class=language-js><code class=language-js><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'something slow'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">slow</span><span class="token punctuation">(</span><span class="token number">300000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// five minutes</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should take long enough for me to go make a sandwich'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h2 id=timeouts><a class=direct-link href=#timeouts>#</a> Timeouts</h2><h3 id=suite-level><a class=direct-link href=#suite-level>#</a> Suite-level</h3><p>Suite-level timeouts may be applied to entire test “suites”, or disabled via <code>this.timeout(0)</code>. This will be inherited by all nested suites and test-cases that do not override the value.</p><pre class=language-js><code class=language-js><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'a suite of tests'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">timeout</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should take less than 500ms'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span>done<span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should take less than 500ms as well'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span>done<span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h3 id=test-level><a class=direct-link href=#test-level>#</a> Test-level</h3><p>Test-specific timeouts may also be applied, or the use of <code>this.timeout(0)</code> to disable timeouts all together:</p><pre class=language-js><code class=language-js><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should take less than 500ms'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">timeout</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span>done<span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h3 id=hook-level><a class=direct-link href=#hook-level>#</a> Hook-level</h3><p>Hook-level timeouts may also be applied:</p><pre class=language-js><code class=language-js><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'a suite of tests'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">timeout</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// A very long environment setup.</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span>done<span class="token punctuation">,</span> <span class="token number">2500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>Again, use <code>this.timeout(0)</code> to disable the timeout for a hook.</p><blockquote><p>In v3.0.0 or newer, a parameter passed to <code>this.timeout()</code> greater than the <a href=https://developer.mozilla.org/docs/Web/API/WindowTimers/setTimeout#Maximum_delay_value>maximum delay value</a> will cause the timeout to be disabled. In v8.0.0 or newer, <code>this.enableTimeouts()</code> has been removed. <strong>Warning:</strong> With async tests if you disable timeouts via <code>this.timeout(0)</code> and then do not call <code>done()</code>, your test will exit silently.</p></blockquote><h2 id=diffs><a class=direct-link href=#diffs>#</a> Diffs</h2><p>Mocha supports the <code>err.expected</code> and <code>err.actual</code> properties of any thrown <code>AssertionError</code>s from an assertion library. Mocha will attempt to display the difference between what was expected, and what the assertion actually saw. Here’s an example of a “string” diff using <code>--inline-diffs</code>:</p><p><img src=https://mochajs.org/static/reporter-string-diffs.resize920,9999-withoutEnlargement.ddc0389bf2.png alt="string diffs" class=screenshot loading=lazy></p><h2 id=command-line-usage><a class=direct-link href=#command-line-usage>#</a> Command-Line Usage</h2><pre><code>mocha [spec..]

Run tests with Mocha

Commands
  mocha inspect [spec..]  Run tests with Mocha                         [default]
  mocha init &lt;path&gt;       create a client-side Mocha setup at &lt;path&gt;

Rules &amp; Behavior
      --allow-uncaught       Allow uncaught errors to propagate        [boolean]
  -A, --async-only           Require all tests to use a callback (async) or
                             return a Promise                          [boolean]
  -b, --bail                 Abort ("bail") after first test failure   [boolean]
      --check-leaks          Check for global variable leaks           [boolean]
      --delay                Delay initial execution of root suite     [boolean]
      --dry-run              Report tests without executing them       [boolean]
      --exit                 Force Mocha to quit after tests complete  [boolean]
      --fail-zero            Fail test run if no test(s) encountered   [boolean]
      --forbid-only          Fail if exclusive test(s) encountered     [boolean]
      --forbid-pending       Fail if pending test(s) encountered       [boolean]
      --global, --globals    List of allowed global variables            [array]
  -j, --jobs                 Number of concurrent jobs for --parallel; use 1 to
                             run in serial
                                   [number] [default: (number of CPU cores - 1)]
  -p, --parallel             Run tests in parallel                     [boolean]
      --retries              Retry failed tests this many times         [number]
  -s, --slow                 Specify "slow" test threshold (in milliseconds)
                                                          [string] [default: 75]
  -t, --timeout, --timeouts  Specify test timeout threshold (in milliseconds)
                                                        [string] [default: 2000]
  -u, --ui                   Specify user interface    [string] [default: "bdd"]

Reporting &amp; Output
  -c, --color, --colors                     Force-enable color output  [boolean]
      --diff                                Show diff on failure
                                                       [boolean] [default: true]
      --full-trace                          Display full stack traces  [boolean]
  -G, --growl                               Enable Growl notifications [boolean]
      --inline-diffs                        Display actual/expected differences
                                            inline within each string  [boolean]
  -R, --reporter                            Specify reporter to use
                                                      [string] [default: "spec"]
  -O, --reporter-option,                    Reporter-specific options
  --reporter-options                        (&lt;k=v,[k1=v1,..]&gt;)           [array]

Configuration
      --config       Path to config file   [string] [default: (nearest rc file)]
  -n, --node-option  Node or V8 option (no leading "--")                 [array]
      --package      Path to package.json for config                    [string]

File Handling
      --extension          File extension(s) to load
                                           [array] [default: ["js","cjs","mjs"]]
      --file               Specify file(s) to be loaded prior to root suite
                           execution                   [array] [default: (none)]
      --ignore, --exclude  Ignore file(s) or glob pattern(s)
                                                       [array] [default: (none)]
      --recursive          Look for tests in subdirectories            [boolean]
  -r, --require            Require module              [array] [default: (none)]
  -S, --sort               Sort test files                             [boolean]
  -w, --watch              Watch files in the current working directory for
                           changes                                     [boolean]
      --watch-files        List of paths or globs to watch               [array]
      --watch-ignore       List of paths or globs to exclude from watching
                                      [array] [default: ["node_modules",".git"]]

Test Filters
  -f, --fgrep   Only run tests containing this string                   [string]
  -g, --grep    Only run tests matching this string or regexp           [string]
  -i, --invert  Inverts --grep and --fgrep matches                     [boolean]

Positional Arguments
  spec  One or more files, directories, or globs to test
                                                     [array] [default: ["test"]]

Other Options
  -h, --help             Show usage information &amp; exit                 [boolean]
  -V, --version          Show version number &amp; exit                    [boolean]
      --list-interfaces  List built-in user interfaces &amp; exit          [boolean]
      --list-reporters   List built-in reporters &amp; exit                [boolean]

Mocha Resources
    Chat: https://gitter.im/mochajs/mocha
  GitHub: https://github.com/mochajs/mocha.git
    Docs: https://mochajs.org/
</code></pre><h3 id=-allow-uncaught><a class=direct-link href=#-allow-uncaught>#</a> <code>--allow-uncaught</code></h3><p>By default, Mocha will attempt to trap uncaught exceptions thrown from running tests and report these as test failures. Use <code>--allow-uncaught</code> to disable this behavior and allow uncaught exceptions to propagate. Will typically cause the process to crash.</p><p>This flag is useful when debugging particularly difficult-to-track exceptions.</p><h3 id=-async-only-a><a class=direct-link href=#-async-only-a>#</a> <code>--async-only, -A</code></h3><p>Enforce a rule that tests must be written in “async” style, meaning each test provides a <code>done</code> callback or returns a <code>Promise</code>. Non-compliant tests will be marked as failures.</p><h3 id=-bail-b><a class=direct-link href=#-bail-b>#</a> <code>--bail, -b</code></h3><p>Causes Mocha to stop running tests after the first test failure it encounters. Corresponding “after each” and “after all” hooks are executed for potential cleanup.</p><p><code>--bail</code> does <em>not</em> imply <code>--exit</code>.</p><h3 id=-check-leaks><a class=direct-link href=#-check-leaks>#</a> <code>--check-leaks</code></h3><p>Use this option to have Mocha check for global variables that are leaked while running tests. Specify globals that are acceptable via the <code>--global</code> option (for example: <code>--check-leaks --global jQuery --global MyLib</code>).</p><h3 id=-compilers><a class=direct-link href=#-compilers>#</a> <code>--compilers</code></h3><blockquote><p><em><code>--compilers</code> was removed in v6.0.0. See <a href=https://github.com/mochajs/mocha/wiki/compilers-deprecation>further explanation and workarounds</a>.</em></p></blockquote><h3 id=-dry-run><a class=direct-link href=#-dry-run>#</a> <code>--dry-run</code></h3><blockquote><p><em>New in v9.0.0</em> Report tests without executing any of them, neither tests nor hooks.</p></blockquote><h3 id=-exit><a class=direct-link href=#-exit>#</a> <code>--exit</code></h3><blockquote><p><em>Updated in v4.0.0.</em></p></blockquote><p>TL;DR: If your tests hang after an upgrade to Mocha v4.0.0 or newer, use <code>--exit</code> for a quick (though not necessarily recommended) fix.</p><p><em>Prior to</em> version v4.0.0, <em>by default</em>, Mocha would force its own process to exit once it was finished executing all tests. This behavior enables a set of potential problems; it’s indicative of tests (or fixtures, harnesses, code under test, etc.) which don’t clean up after themselves properly. Ultimately, “dirty” tests can (but not always) lead to <em>false positive</em> or <em>false negative</em> results.</p><p>“Hanging” most often manifests itself if a server is still listening on a port, or a socket is still open, etc. It can also be something like a runaway <code>setInterval()</code>, or even an errant <code>Promise</code> that never fulfilled.</p><p>The <em>default behavior</em> in v4.0.0 (and newer) is <code>--no-exit</code>, where previously it was <code>--exit</code>.</p><p><strong>The easiest way to “fix” the issue is to pass <code>--exit</code> to the Mocha process.</strong> It <em>can</em> be time-consuming to debug — because it’s not always obvious where the problem is — but it <em>is</em> recommended to do so.</p><p>To ensure your tests aren’t leaving messes around, here are some ideas to get started:</p><ul><li>See the <a href=https://nodejs.org/en/docs/inspector/ >Node.js guide to debugging</a></li><li>Use the new <a href=https://github.com/nodejs/node/blob/master/doc/api/async_hooks.md><code>async_hooks</code></a> API (<a href=https://git.io/vdlNM>example</a>)</li><li>Try something like <a href=https://npm.im/wtfnode>wtfnode</a></li><li>Use <a href=#exclusive-tests><code>.only</code></a> until you find the test that causes Mocha to hang</li></ul><h3 id=-fail-zero><a class=direct-link href=#-fail-zero>#</a> <code>--fail-zero</code></h3><blockquote><p><em>New in v9.1.0</em> Fail test run if no tests are encountered with <code>exit-code: 1</code>.</p></blockquote><h3 id=-forbid-only><a class=direct-link href=#-forbid-only>#</a> <code>--forbid-only</code></h3><p>Enforce a rule that tests may not be exclusive (use of e.g., <code>describe.only()</code> or <code>it.only()</code> is disallowed).</p><p><code>--forbid-only</code> causes Mocha to fail when an exclusive (“only’d”) test or suite is encountered, and it will abort further test execution.</p><h3 id=-forbid-pending><a class=direct-link href=#-forbid-pending>#</a> <code>--forbid-pending</code></h3><p>Enforce a rule that tests may not be skipped (use of e.g., <code>describe.skip()</code>, <code>it.skip()</code>, or <code>this.skip()</code> anywhere is disallowed).</p><p><code>--forbid-pending</code> causes Mocha to fail when a skipped (“pending”) test or suite is encountered, and it will abort further test execution.</p><h3 id=-global-variable-name><a class=direct-link href=#-global-variable-name>#</a> <code>--global &lt;variable-name&gt;</code></h3><blockquote><p><em>Updated in v6.0.0; the option is <code>--global</code> and <code>--globals</code> is now an alias.</em></p></blockquote><p>Define a global variable name. For example, suppose your app deliberately exposes a global named <code>app</code> and <code>YUI</code>, you may want to add <code>--global app --global YUI</code>.</p><p><code>--global</code> accepts wildcards. You could do <code>--global '*bar'</code> and it would match <code>foobar</code>, <code>barbar</code>, etc. You can also pass in <code>'*'</code> to ignore all globals.</p><p><code>--global</code> can accept a comma-delimited list; <code>--global app,YUI</code> is equivalent to <code>--global app --global YUI</code>.</p><p>By using this option in conjunction with <code>--check-leaks</code>, you can specify a whitelist of known global variables that you <em>expect</em> to leak into global scope.</p><h3 id=-retries-n><a class=direct-link href=#-retries-n>#</a> <code>--retries &lt;n&gt;</code></h3><p>Retries failed tests <code>n</code> times.</p><p>Mocha does not retry test failures by default.</p><h3 id=-slow-ms-s-ms><a class=direct-link href=#-slow-ms-s-ms>#</a> <code>--slow &lt;ms&gt;, -s &lt;ms&gt;</code></h3><p>Specify the “slow” test threshold in milliseconds. Mocha uses this to highlight test cases that are taking too long. “Slow” tests are not considered failures.</p><p>Note: A test that executes for <em>half</em> of the “slow” time will be highlighted <em>in yellow</em> with the default <code>spec</code> reporter; a test that executes for entire “slow” time will be highlighted <em>in red</em>.</p><h3 id=-timeout-ms-t-ms><a class=direct-link href=#-timeout-ms-t-ms>#</a> <code>--timeout &lt;ms&gt;, -t &lt;ms&gt;</code></h3><blockquote><p><em>Update in v6.0.0: <code>--timeout 0</code> is implied when invoking Mocha using inspect flags. <code>--timeout 99999999</code> is no longer needed.</em></p></blockquote><p>Specifies the test case timeout, defaulting to two (2) seconds (2000 milliseconds). Tests taking longer than this amount of time will be marked as failed.</p><p>To override you may pass the timeout in milliseconds, or a value with the <code>s</code> suffix, e.g., <code>--timeout 2s</code> and <code>--timeout 2000</code> are equivalent.</p><p>To disable timeouts, use <code>--timeout 0</code>.</p><p>Note: synchronous (blocking) tests are also bound by the timeout, but they will not complete until the code stops blocking. Infinite loops will still be infinite loops!</p><h3 id=-ui-name-u-name><a class=direct-link href=#-ui-name-u-name>#</a> <code>--ui &lt;name&gt;, -u &lt;name&gt;</code></h3><p>The <code>--ui</code> option lets you specify the interface to use, defaulting to <code>bdd</code>.</p><h3 id=-color-c-colors><a class=direct-link href=#-color-c-colors>#</a> <code>--color, -c, --colors</code></h3><blockquote><p><em>Updated in v6.0.0. <code>--colors</code> is now an alias for <code>--color</code>.</em></p></blockquote><p>“Force” color output to be enabled, or alternatively force it to be disabled via <code>--no-color</code>. By default, Mocha uses the <a href=https://npm.im/supports-color>supports-color</a> module to decide.</p><p>In some cases, color output will be explicitly suppressed by certain reporters outputting in a machine-readable format.</p><h3 id=-diff><a class=direct-link href=#-diff>#</a> <code>--diff</code></h3><p>When possible, show the difference between expected and actual values when an assertion failure is encountered.</p><p>This flag is unusual in that it <strong>defaults to <code>true</code></strong>; use <code>--no-diff</code> to suppress Mocha’s own diff output.</p><p>Some assertion libraries will supply their own diffs, in which case Mocha’s will not be used, regardless of the default value.</p><p>Mocha’s own diff output does not conform to any known standards, and is designed to be human-readable.</p><h3 id=-full-trace><a class=direct-link href=#-full-trace>#</a> <code>--full-trace</code></h3><p>Enable “full” stack traces. By default, Mocha attempts to distill stack traces into less noisy (though still useful) output.</p><p>This flag is helpful when debugging a suspected issue within Mocha or Node.js itself.</p><h3 id=-growl-g><a class=direct-link href=#-growl-g>#</a> <code>--growl, -G</code></h3><p>Enable <a href=http://growl.info/ >Growl</a> (or OS-level notifications where available).</p><p>Requires extra software to be installed; see the <a href=https://npm.im/growl>growl module’s docs</a> for more information.</p><h3 id=-inline-diffs><a class=direct-link href=#-inline-diffs>#</a> <code>--inline-diffs</code></h3><p>Enable “inline” diffs, an alternative output for diffing strings.</p><p>Useful when working with large strings.</p><p>Does nothing if an assertion library supplies its own diff output.</p><h3 id=-reporter-name-r-name><a class=direct-link href=#-reporter-name-r-name>#</a> <code>--reporter &lt;name&gt;, -R &lt;name&gt;</code></h3><p>Specify the reporter that will be used, defaulting to <code>spec</code>.</p><p>Allows use of third-party reporters. For example, <a href=https://npm.im/mocha-lcov-reporter>mocha-lcov-reporter</a> may be used with <code>--reporter mocha-lcov-reporter</code> after it has been installed.</p><h3 id=-reporter-option-option-o-option-reporter-options-option><a class=direct-link href=#-reporter-option-option-o-option-reporter-options-option>#</a> <code>--reporter-option &lt;option&gt;, -O &lt;option&gt;, --reporter-options &lt;option&gt;</code></h3><blockquote><p><em>Updated in v6.0.0. Can be specified multiple times. <code>--reporter-options</code> is now an alias for <code>--reporter-option</code>.</em></p></blockquote><p>Provide options specific to a reporter in <code>&lt;key&gt;=&lt;value&gt;</code> format, e.g., <code>--reporter tap --reporter-option tapVersion=13</code>.</p><p>Not all reporters accept options.</p><p>Can be specified as a comma-delimited list.</p><h3 id=-config-path><a class=direct-link href=#-config-path>#</a> <code>--config &lt;path&gt;</code></h3><blockquote><p><em>New in v6.0.0</em></p></blockquote><p>Specify an explicit path to a <a href=#configuring-mocha-nodejs>configuration file</a>.</p><p>By default, Mocha will search for a config file if <code>--config</code> is not specified; use <code>--no-config</code> to suppress this behavior.</p><h3 id=-node-option-name-n-name><a class=direct-link href=#-node-option-name-n-name>#</a> <code>--node-option &lt;name&gt;, -n &lt;name&gt;</code></h3><blockquote><p><em>New in v9.1.0</em></p></blockquote><p>For Node.js and V8 options. Mocha forwards these options to Node.js by spawning a new child-process.<br>The options are set without leading dashes <code>--</code>, e.g. <code>-n require=foo -n unhandled-rejections=strict</code></p><p>Can also be specified as a comma-delimited list: <code>-n require=foo,unhandled-rejections=strict</code></p><h3 id=-opts-path><a class=direct-link href=#-opts-path>#</a> <code>--opts &lt;path&gt;</code></h3><blockquote><p><em>Removed in v8.0.0. Please use <a href=#configuring-mocha-nodejs>configuration file</a> instead.</em></p></blockquote><h3 id=-package-path><a class=direct-link href=#-package-path>#</a> <code>--package &lt;path&gt;</code></h3><blockquote><p><em>New in v6.0.0</em></p></blockquote><p>Specify an explicit path to a <a href=#configuring-mocha-nodejs><code>package.json</code> file</a> (ostensibly containing configuration in a <code>mocha</code> property).</p><p>By default, Mocha looks for a <code>package.json</code> in the current working directory or nearest ancestor, and will use the first file found (regardless of whether it contains a <code>mocha</code> property); to suppress <code>package.json</code> lookup, use <code>--no-package</code>.</p><h3 id=-extension-ext><a class=direct-link href=#-extension-ext>#</a> <code>--extension &lt;ext&gt;</code></h3><p>Files having this extension will be considered test files. Defaults to <code>js</code>.</p><p>Specifying <code>--extension</code> will <em>remove</em> <code>.js</code> as a test file extension; use <code>--extension js</code> to re-add it. For example, to load <code>.mjs</code> and <code>.js</code> test files, you must supply <code>--extension mjs --extension js</code>.</p><p>The option can be given multiple times. The option accepts a comma-delimited list: <code>--extension a,b</code> is equivalent to <code>--extension a --extension b</code>.</p><blockquote><p><em>New in v8.2.0</em></p></blockquote><p><code>--extension</code> now supports multipart extensions (e.g., <code>spec.js</code>), leading dots (<code>.js</code>) and combinations thereof (<code>.spec.js</code>);</p><h3 id=-file-filedirectoryglob><a class=direct-link href=#-file-filedirectoryglob>#</a> <code>--file &lt;file|directory|glob&gt;</code></h3><blockquote><p><em>WARNING: <code>--file</code> is incompatible with <a href=#parallel-tests>parallel mode</a>.</em></p></blockquote><p>Explicitly <em>include</em> a test file to be loaded before other test files. Multiple uses of <code>--file</code> are allowed, and will be loaded in order given.</p><p>Useful if you want to declare, for example, hooks to be run before every test across all other test files.</p><p>Files specified this way are not affected by <code>--sort</code> or <code>--recursive</code>.</p><p>Files specified in this way should contain one or more suites, tests or hooks. If this is not the case, consider <code>--require</code> instead.</p><h3 id=-ignore-filedirectoryglob-exclude-filedirectoryglob><a class=direct-link href=#-ignore-filedirectoryglob-exclude-filedirectoryglob>#</a> <code>--ignore &lt;file|directory|glob&gt;, --exclude &lt;file|directory|glob&gt;,</code></h3><p>Explicitly ignore (exclude) one or more test files, directories or globs (e.g., <code>some/**/files*</code>) that would otherwise be loaded.</p><p>Files specified using <code>--file</code> <em>are not affected</em> by this option.</p><p>Can be specified multiple times.</p><h3 id=-recursive><a class=direct-link href=#-recursive>#</a> <code>--recursive</code></h3><p>When looking for test files, recurse into subdirectories.</p><p>See <code>--extension</code> for defining which files are considered test files.</p><h3 id=-require-module-r-module><a class=direct-link href=#-require-module-r-module>#</a> <code>--require &lt;module&gt;, -r &lt;module&gt;</code></h3><p>Require a module before loading the user interface or test files. This is useful for:</p><ul><li>Test harnesses</li><li>Assertion libraries that augment built-ins or global scope (such as <a href=https://npm.im/should>should.js</a>)</li><li>Compilers such as Babel via <a href=https://npm.im/@babel/register>@babel/register</a> or TypeScript via <a href=https://npm.im/ts-node>ts-node</a> (using <code>--require ts-node/register</code>). See <a href=https://github.com/mochajs/mocha-examples/tree/master/packages/babel>Babel</a> or <a href=https://github.com/mochajs/mocha-examples/tree/master/packages/typescript>TypeScript</a> working examples.</li></ul><p>Modules required in this manner are expected to do work synchronously; Mocha won’t wait for async tasks in a required module to finish.</p><p><strong>You cannot use <code>--require</code> to set hooks</strong>. If you want to set hooks to run, e.g., before each test, use a <a href=#root-hook-plugins>Root Hook Plugin</a>.</p><blockquote><p>As of v8.0.0, Mocha supports <code>--require</code> for <a href=#nodejs-native-esm-support>NodeJS native ESM</a>. There is no separate <code>--import</code> flag.</p></blockquote><h3 id=-sort-s><a class=direct-link href=#-sort-s>#</a> <code>--sort, -S</code></h3><blockquote><p><em>WARNING: <code>--sort</code> is incompatible with <a href=#parallel-tests>parallel mode</a>.</em></p></blockquote><p>Sort test files (by absolute path) using <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort>Array.prototype.sort</a>.</p><h3 id=-watch-w><a class=direct-link href=#-watch-w>#</a> <code>--watch, -w</code></h3><p>Rerun tests on file changes.</p><p>The <code>--watch-files</code> and <code>--watch-ignore</code> options can be used to control which files are watched for changes.</p><p>Tests may be rerun manually by typing ⓡ ⓢ ⏎ (same shortcut as <code>nodemon</code>).</p><h3 id=-watch-files-filedirectoryglob><a class=direct-link href=#-watch-files-filedirectoryglob>#</a> <code>--watch-files &lt;file|directory|glob&gt;</code></h3><blockquote><p><em>New in v7.0.0</em></p></blockquote><p>List of paths or globs to watch when <code>--watch</code> is set. If a file matching the given glob changes or is added or removed mocha will rerun all tests.</p><p>If the path is a directory all files and subdirectories will be watched.</p><p>By default all files in the current directory having one of the extensions provided by <code>--extension</code> and not contained in the <code>node_modules</code> or <code>.git</code> folders are watched.</p><p>The option can be given multiple times. The option accepts a comma-delimited list: <code>--watch-files a,b</code> is equivalent to <code>--watch-files a --watch-files b</code></p><h3 id=-watch-ignore-filedirectoryglob><a class=direct-link href=#-watch-ignore-filedirectoryglob>#</a> <code>--watch-ignore &lt;file|directory|glob&gt;</code></h3><blockquote><p><em>New in v7.0.0</em></p></blockquote><p>List of paths or globs to exclude from watching. Defaults to <code>node_modules</code> and <code>.git</code>.</p><p>To exclude all files in a directory it is preferable to use <code>foo/bar</code> instead of <code>foo/bar/**/*</code>. The latter will still watch the directory <code>foo/bar</code> but will ignore all changes to the content of that directory.</p><p>The option can be given multiple times. The option accepts a comma-delimited list: <code>--watch-ignore a,b</code> is equivalent to <code>--watch-ignore a --watch-ignore b</code></p><h3 id=-fgrep-string-f-string><a class=direct-link href=#-fgrep-string-f-string>#</a> <code>--fgrep &lt;string&gt;, -f &lt;string&gt;</code></h3><blockquote><p><em>BREAKING CHANGE in v6.0.0; now mutually exclusive with <code>--grep</code>.</em></p></blockquote><p>Cause Mocha to only run tests having titles containing the given <code>string</code>.</p><p>Mutually exclusive with <code>--grep</code>.</p><h3 id=-grep-regexp-g-regexp><a class=direct-link href=#-grep-regexp-g-regexp>#</a> <code>--grep &lt;regexp&gt;, -g &lt;regexp&gt;</code></h3><blockquote><p><em>BREAKING CHANGE in v6.0.0; now mutually exclusive with <code>--fgrep</code>.</em></p></blockquote><p>Cause Mocha to only run tests matching the given <code>regexp</code>, which is internally compiled to a <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Regexp>RegExp</a>.</p><p>Suppose, for example, you have “api” related tests, as well as “app” related tests, as shown in the following snippet; One could use <code>--grep api</code> or <code>--grep app</code> to run one or the other. The same goes for any other part of a suite or test-case title, <code>--grep users</code> would be valid as well, or even <code>--grep GET</code>.</p><p>And another option with double quotes: <code>--grep "groupA|groupB"</code>.<br>And for more complex criterias: <code>--grep "/get/i"</code>. Some shells as e.g. Git-Bash-for-Windows may require: <code>--grep "'/get/i'"</code>. Using flags other than the <code>ignoreCase /i</code> (especially <code>/g</code> and <code>/y</code>) may lead to unpredictable results.</p><pre class=language-js><code class=language-js><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'api'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'GET /api/users groupA'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'respond with an array of users'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'GET /users groupB'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'respond with an array of users'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>Mutually exclusive with <code>--fgrep</code>.</p><h3 id=-invert><a class=direct-link href=#-invert>#</a> <code>--invert</code></h3><p>Use the <em>inverse</em> of the match specified by <code>--grep</code> or <code>fgrep</code>.</p><p>Requires either <code>--grep</code> or <code>--fgrep</code> (but not both).</p><h3 id=-inspect-inspect-brk-inspect><a class=direct-link href=#-inspect-inspect-brk-inspect>#</a> <code>--inspect, --inspect-brk, inspect</code></h3><p>Enables Node.js’ inspector.</p><p>Use <code>--inspect</code> / <code>--inspect-brk</code> to launch the V8 inspector for use with Chrome Dev Tools.</p><p>Use <code>inspect</code> to launch Node.js’ internal debugger.</p><p>All of these options are mutually exclusive.</p><p>Implies <code>--timeout 0</code>.</p><h3 id=-parallel-p><a class=direct-link href=#-parallel-p>#</a> <code>--parallel, -p</code></h3><blockquote><p><em>New in v.8.0.0.</em></p></blockquote><p>Use the <code>--parallel</code> flag to run tests in a worker pool.</p><p>Each test file will be put into a queue and executed as workers become available.</p><p><strong>NOTICE</strong>: <code>--parallel</code> has certain implications for Mocha’s behavior which you must be aware of. Read more about <a href=#parallel-tests>running tests in parallel</a>.</p><h3 id=-jobs-count-j-count><a class=direct-link href=#-jobs-count-j-count>#</a> <code>--jobs &lt;count&gt;, -j &lt;count&gt;</code></h3><blockquote><p><em>New in v.8.0.0.</em></p></blockquote><p>Use <code>--jobs &lt;count&gt;</code> to specify the <em>maximum</em> number of processes in the worker pool.</p><p>The default value is the <em>number of CPU cores</em> less 1.</p><p>Hint: Use <code>--jobs 0</code> or <code>--jobs 1</code> to temporarily disable <code>--parallel</code>.</p><p>Has no effect unless used with <a href=#-parallel-p><code>--parallel</code></a>.</p><h3 id=about-option-types><a class=direct-link href=#about-option-types>#</a> About Option Types</h3><blockquote><p><em>Updated in v6.0.0.</em></p></blockquote><p>Each flag annotated of type <code>[boolean]</code> in Mocha’s <code>--help</code> output can be <em>negated</em> by prepending <code>--no-</code> to the flag name. For example, <code>--no-color</code> will disable Mocha’s color output, which is enabled by default.</p><p>Unless otherwise noted, <em>all</em> boolean flags default to <code>false</code>.</p><h3 id=about-node-flags><a class=direct-link href=#about-node-flags>#</a> About <code>node</code> Flags</h3><p>The <code>mocha</code> executable supports all applicable flags which the <code>node</code> executable supports.</p><p>These flags vary depending on your version of Node.js.</p><p><code>node</code> flags can be defined in Mocha’s <a href=#configuring-mocha-nodejs>configuration</a>.</p><blockquote><p><em>New in v9.1.0</em> You can also pass <code>node</code> flags to Node.js using <a href=#-node-option-name-n-name><code>--node-option</code></a>.</p></blockquote><h3 id=-enable-source-maps><a class=direct-link href=#-enable-source-maps>#</a> <code>--enable-source-maps</code></h3><blockquote><p><em>New in Node.js v12.12.0</em></p></blockquote><p>If the <a href=https://nodejs.org/dist/latest-v12.x/docs/api/cli.html#cli_enable_source_maps><code>--enable-source-maps</code></a> flag is passed to mocha, source maps will be collected and used to provide accurate stack traces for transpiled code:</p><pre class=language-bash><code class=language-bash>Error: cool
    at Object.<span class="token operator">&lt;</span>anonymous<span class="token operator">&gt;</span> <span class="token punctuation">(</span>/Users/fake-user/bigco/nodejs-tasks/build/src/index.js:27:7<span class="token punctuation">)</span>
        -<span class="token operator">&gt;</span> /Users/fake-user/bigco/nodejs-tasks/src/index.ts:24:7
</code></pre><h3 id=about-v8-flags><a class=direct-link href=#about-v8-flags>#</a> About V8 Flags</h3><p>Prepend <code>--v8-</code> to any flag listed in the output of <code>node --v8-options</code> (excluding <code>--v8-options</code> itself) to use it.</p><p>V8 flags can be defined in Mocha’s <a href=#configuring-mocha-nodejs>configuration</a>.</p><blockquote><p><em>New in v9.1.0</em> You can also pass V8 flags (without <code>--v8-</code>) to Node.js using <a href=#-node-option-name-n-name><code>--node-option</code></a>.</p></blockquote><h2 id=parallel-tests><a class=direct-link href=#parallel-tests>#</a> Parallel Tests</h2><blockquote><p><em>New in v.8.0.0.</em></p></blockquote><p>Depending on the number and nature of your tests, you may find a significant performance benefit when running tests in parallel (using the <a href=#-parallel-p><code>--parallel</code></a> flag).</p><p>Parallel tests should work out-of-the box for many use cases. However, you must be aware of some important implications of the behavior.</p><blockquote><p><em>Note: Authors of third-party libraries built on Mocha should read this!</em></p></blockquote><h3 id=reporter-limitations><a class=direct-link href=#reporter-limitations>#</a> Reporter Limitations</h3><p>Due to the nature of the following reporters, they cannot work when running tests in parallel:</p><ul class=single-column><li><a href=#markdown><code>markdown</code></a></li><li><a href=#progress><code>progress</code></a></li><li><a href=#json-stream><code>json-stream</code></a></li></ul><p>These reporters expect Mocha to know <em>how many tests it plans to run</em> before execution. This information is unavailable in parallel mode, as test files are loaded only when they are about to be run.</p><p>In serial mode, tests results will “stream” as they occur. In parallel mode, reporter output is <em>buffered</em>; reporting will occur after each file is completed. In practice, the reporter output will appear in “chunks” (but will otherwise be identical). If a test file is particularly slow, there may be a significant pause while it’s running.</p><h3 id=exclusive-tests-are-disallowed><a class=direct-link href=#exclusive-tests-are-disallowed>#</a> Exclusive Tests are Disallowed</h3><p><strong>You cannot use <code>it.only</code>, <code>describe.only</code>, <code>this.only()</code>, etc., in parallel mode.</strong> This is for the same reason as the incompatible reporters noted above: in parallel mode, Mocha does not load all files and suites into memory before running tests.</p><p>Suggested workarounds:</p><ol><li>Use <a href=#-grep-regexp-g-regexp><code>--grep</code></a> or <a href=http://localhost:8080/#-fgrep-string-f-string><code>--fgrep</code></a> instead; it’s not particularly efficient, but it will work.</li><li>Don’t use parallel mode. Likely, you won’t be running very many exclusive tests, so you won’t see a great benefit from parallel mode anyhow.</li></ol><blockquote><p><em>TIP: If parallel mode is defined in your config file, you can temporarily disable it on the command-line by using either the <code>--no-parallel</code> flag or reducing the job count, e.g., <code>--jobs=0</code>.</em></p></blockquote><h3 id=file-order-is-non-deterministic><a class=direct-link href=#file-order-is-non-deterministic>#</a> File Order is Non-Deterministic</h3><p>In parallel mode, Mocha does not guarantee the order in which test files will run, nor which worker process runs them.</p><p>Because of this, the following options, which depend on order, <em>cannot be used</em> in parallel mode:</p><ul class=single-column><li><a href=#-file-filedirectoryglob><code>--file</code></a></li><li><a href=#-sort-s><code>--sort</code></a></li><li><a href=#delayed-root-suite><code>--delay</code></a></li></ul><h3 id=test-duration-variability><a class=direct-link href=#test-duration-variability>#</a> Test Duration Variability</h3><p>Running tests in parallel mode will naturally use more system resources. The OS may take extra time to schedule and complete some operations, depending on system load. For this reason, the timeouts of <em>individual tests</em> may need to be increased either <a href=#-timeout-ms-t-ms>globally</a> or <a href=#timeouts>otherwise</a>.</p><h3 id=bail-is-best-effort><a class=direct-link href=#bail-is-best-effort>#</a> “Bail” is “Best Effort”</h3><p>When used with <code>--bail</code> (or <code>this.bail()</code>) to exit after the first failure, it’s likely other tests will be running at the same time. Mocha must shut down its worker processes before exiting.</p><p>Likewise, subprocesses may throw uncaught exceptions. When used with <code>--allow-uncaught</code>, Mocha will “bubble” this exception to the main process, but still must shut down its processes.</p><p>Either way, Mocha will abort the test run “very soon.”</p><h3 id=root-hooks-are-not-global><a class=direct-link href=#root-hooks-are-not-global>#</a> Root Hooks Are Not Global</h3><blockquote><p><em>NOTE: This only applies when running in parallel mode.</em></p></blockquote><p>A <em>root hook</em> is a hook in a test file which is <em>not defined</em> within a suite. An example using the <code>bdd</code> interface:</p><pre class=language-js><code class=language-js><span class="token comment">// test/setup.js</span>

<span class="token comment">// root hook to run before every test (even in other files)</span>
<span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">doMySetup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// root hook to run after every test (even in other files)</span>
<span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">doMyTeardown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>When run (in the default “serial” mode) via this command:</p><pre class=language-bash><code class=language-bash>mocha --file <span class="token string">"./test/setup.js"</span> <span class="token string">"./test/**/*.spec.js"</span>
</code></pre><p><code>setup.js</code> will be executed <em>first</em>, and install the two hooks shown above for every test found in <code>./test/**/*.spec.js</code>.</p><p><strong>The above example does not work in parallel mode.</strong></p><p>When Mocha runs in parallel mode, <strong>test files do not share the same process,</strong> nor do they share the same instance of Mocha. Consequently, a hypothetical root hook defined in test file <em>A</em> <strong>will not be present</strong> in test file <em>B</em>.</p><p>Here are a couple suggested workarounds:</p><ol><li><code>require('./setup.js')</code> or <code>import './setup.js'</code> at the top of every test file. Best avoided for those averse to boilerplate.</li><li><em>Recommended</em>: Define root hooks in a “required” file, using the new (also as of v8.0.0) <a href=#root-hook-plugins>Root Hook Plugin</a> system.</li></ol><p>If you need to run some code <em>once and only once</em>, use a <a href=#global-fixtures>global fixture</a> instead.</p><h3 id=no-browser-support><a class=direct-link href=#no-browser-support>#</a> No Browser Support</h3><p>Parallel mode is only available in Node.js, for now.</p><h3 id=limited-reporter-api-for-third-party-reporters><a class=direct-link href=#limited-reporter-api-for-third-party-reporters>#</a> Limited Reporter API for Third-Party Reporters</h3><p>Third-party reporters may encounter issues when attempting to access non-existent properties within <code>Test</code>, <code>Suite</code>, and <code>Hook</code> objects. If a third-party reporter does not work in parallel mode (but otherwise works in serial mode), please <a href=https://github.com/mochajs/mocha/issues/new>file an issue</a>.</p><h3 id=troubleshooting-parallel-mode><a class=direct-link href=#troubleshooting-parallel-mode>#</a> Troubleshooting Parallel Mode</h3><p>If you find your tests don’t work properly when run with <a href=#-parallel-p><code>--parallel</code></a>, either shrug and move on, or use this handy-dandy checklist to get things working:</p><ul><li>✅ Ensure you are using a <a href=#reporter-limitations>supported reporter</a>.</li><li>✅ Ensure you are not using <a href=#file-order-is-non-deterministic>other unsupported flags</a>.</li><li>✅ Double-check your <a href=#configuring-mocha-nodejs>config file</a>; options set in config files will be merged with any command-line option.</li><li>✅ Look for root hooks (they look like <a href=#root-hooks-are-not-global>this</a>) in your tests. Move them into a <a href=#root-hook-plugins>Root Hook Plugin</a>.</li><li>✅ Do any assertion, mock, or other test libraries you’re consuming use root hooks? They may need to be <a href=#migrating-a-library-to-use-root-hook-plugins>migrated</a> for compatibility with parallel mode.</li><li>✅ If tests are unexpectedly timing out, you may need to increase the default test timeout (via <a href=#-timeout-ms-t-ms><code>--timeout</code></a>)</li><li>✅ Ensure your tests do not depend on being run in a specific order.</li><li>✅ Ensure your tests clean up after themselves; remove temp files, handles, sockets, etc. Don’t try to share state or resources between test files.</li></ul><h3 id=caveats-about-testing-in-parallel><a class=direct-link href=#caveats-about-testing-in-parallel>#</a> Caveats About Testing in Parallel</h3><p>Some types of tests are <em>not</em> so well-suited to run in parallel. For example, extremely timing-sensitive tests, or tests which make I/O requests to a limited pool of resources (such as opening ports, or automating browser windows, hitting a test DB, or remote server, etc.).</p><p>Free-tier cloud CI services may not provide a suitable multi-core container or VM for their build agents. Regarding expected performance gains in CI: your mileage may vary. It may help to use a conditional in a <code>.mocharc.js</code> to check for <code>process.env.CI</code>, and adjust the job count as appropriate.</p><p>It’s unlikely (but not impossible) to see a performance gain from a <a href=#-jobs-count-j-count>job count</a> <em>greater than</em> the number of available CPU cores. That said, <em>play around with the job count</em>–there’s no one-size-fits all, and the unique characteristics of your tests will determine the optimal number of jobs; it may even be that fewer is faster!</p><h2 id=root-hook-plugins><a class=direct-link href=#root-hook-plugins>#</a> Root Hook Plugins</h2><blockquote><p><em>New in v8.0.0</em></p></blockquote><p>In some cases, you may want a <a href=#hooks>hook</a> before (or after) every test in every file. These are called <em>root hooks</em>. Previous to v8.0.0, the way to accomplish this was to use <code>--file</code> combined with root hooks (see <a href=#root-hooks-are-not-global>example above</a>). This still works in v8.0.0, but <em>not</em> when running tests in parallel mode! For that reason, running root hooks using this method is <em>strongly discouraged</em>, and may be deprecated in the future.</p><p>A <em>Root Hook Plugin</em> is a JavaScript file loaded via <a href=#-require-module-r-module><code>--require</code></a> which “registers” one or more root hooks to be used across all test files.</p><p>In browsers you can set root hooks directly via a <code>rootHooks</code> object: <code>mocha.setup({ rootHooks: {beforeEach() {...}} })</code>, see <a href=#running-mocha-in-the-browser><code>mocha.setup()</code></a></p><h3 id=defining-a-root-hook-plugin><a class=direct-link href=#defining-a-root-hook-plugin>#</a> Defining a Root Hook Plugin</h3><p>A Root Hook Plugin file is a script which exports (via <code>module.exports</code>) a <code>mochaHooks</code> property. It is loaded via <code>--require &lt;file&gt;</code>.</p><p>Here’s a simple example which defines a root hook, written using CJS and ESM syntax.</p><h4 id=with-commonjs><a class=direct-link href=#with-commonjs>#</a> With CommonJS</h4><pre class=language-js><code class=language-js><span class="token comment">// test/hooks.js</span>

exports<span class="token punctuation">.</span>mochaHooks <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token parameter">done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// do something before every test</span>
    <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h4 id=with-es-modules><a class=direct-link href=#with-es-modules>#</a> With ES Modules</h4><p>We’re using the <code>.mjs</code> extension in these examples.</p><blockquote><p><em>Tip: If you’re having trouble getting ES modules to work, refer to <a href=https://nodejs.org/api/esm.html>the Node.js documentation</a>.</em></p></blockquote><pre class=language-js><code class=language-js><span class="token comment">// test/hooks.mjs</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> mochaHooks <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token parameter">done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// do something before every test</span>
    <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><blockquote><p><em>Note: Further examples will use ESM syntax.</em></p></blockquote><h3 id=available-root-hooks><a class=direct-link href=#available-root-hooks>#</a> Available Root Hooks</h3><p>Root hooks work with any interface, but <em>the property names do not change</em>. In other words, if you are using the <code>tdd</code> interface, <code>suiteSetup</code> maps to <code>beforeAll</code>, and <code>setup</code> maps to <code>beforeEach</code>.</p><p>Available root hooks and their behavior:</p><ul class=single-column><li><code>beforeAll</code>:<ul><li>In <strong>serial</strong> mode (Mocha’s default), <em>before all tests begin, once only</em></li><li>In <strong>parallel</strong> mode, run <em>before all tests begin, for each file</em></li></ul></li><li><code>beforeEach</code>:<ul><li>In <strong>both</strong> modes, run <em>before each test</em></li></ul></li><li><code>afterAll</code>:<ul><li>In <strong>serial</strong> mode, run <em>after all tests end, once only</em></li><li>In <strong>parallel</strong> mode, run <em>after all tests end, for each file</em></li></ul></li><li><code>afterEach</code>:<ul><li>In <strong>both</strong> modes, run <em>after every test</em></li></ul></li></ul><blockquote><p><em>Tip: If you need to ensure code runs once and only once in any mode, use <a href=#global-fixtures>global fixtures</a>.</em></p></blockquote><p>As with other hooks, <code>this</code> refers to to the current context object:</p><pre class=language-js><code class=language-js><span class="token comment">// test/hooks.mjs</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> mochaHooks <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">beforeAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// skip all tests for bob</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'os'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">userInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>username <span class="token operator">===</span> <span class="token string">'bob'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h3 id=multiple-root-hooks-in-a-single-plugin><a class=direct-link href=#multiple-root-hooks-in-a-single-plugin>#</a> Multiple Root Hooks in a Single Plugin</h3><p>Multiple root hooks can be defined in a single plugin, for organizational purposes. For example:</p><pre class=language-js><code class=language-js><span class="token comment">// test/hooks.mjs</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> mochaHooks <span class="token operator">=</span> <span class="token punctuation">{</span>
  beforeEach<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// do something before every test,</span>
      <span class="token comment">// then run the next hook in this array</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// async or Promise-returning functions allowed</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h3 id=root-hook-plugins-can-export-a-function><a class=direct-link href=#root-hook-plugins-can-export-a-function>#</a> Root Hook Plugins Can Export a Function</h3><p>If you need to perform some logic–such as choosing a root hook conditionally, based on the environment–<code>mochaHooks</code> can be a <em>function</em> which returns the expected object.</p><pre class=language-js><code class=language-js><span class="token comment">// test/hooks.mjs</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">mochaHooks</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">CI</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// root hooks object</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      beforeEach<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// CI-specific beforeEach</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// some other CI-specific beforeEach</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// root hooks object</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// regular beforeEach</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><p>If you need to perform an async operation, <code>mochaHooks</code> can be <code>Promise</code>-returning:</p><pre class=language-js><code class=language-js><span class="token comment">// test/hooks.mjs</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">mochaHooks</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">checkSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// only use a root hook if `result` is truthy</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// root hooks object</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// something</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h3 id=multiple-root-hook-plugins><a class=direct-link href=#multiple-root-hook-plugins>#</a> Multiple Root Hook Plugins</h3><p>Multiple root hook plugins can be registered by using <code>--require</code> multiple times. For example, to register the root hooks in <code>hooks-a.js</code> and <code>hooks-b.js</code>, use <code>--require hooks-a.js --require hooks-b.js</code>. These will be registered (and run) <em>in order</em>.</p><h3 id=migrating-tests-to-use-root-hook-plugins><a class=direct-link href=#migrating-tests-to-use-root-hook-plugins>#</a> Migrating Tests to use Root Hook Plugins</h3><p>To migrate your tests using root hooks to a root hook plugin:</p><ol><li>Find your root hooks (hooks defined <em>outside</em> of a suite–usually <code>describe()</code> callback).</li><li>Create a new file, e.g., <code>test/hooks.js</code>.</li><li><em>Move</em> your root hooks into <code>test/hooks.js</code>.</li><li>In <code>test/hooks.js</code>, make your hooks a member of an exported <code>mochaHooks</code> property.</li><li>Use <code>--require test/hooks.js</code> (even better: use a <a href=#configuring-mocha-nodejs>config file</a> with <code>{"require": "test/hooks.js"}</code>) when running your tests.</li></ol><p>For example, given the following file, <code>test/test.spec.js</code>, containing root hooks:</p><pre class=language-js><code class=language-js><span class="token comment">// test/test.spec.js</span>

<span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// global setup for all tests</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">after</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// one-time final cleanup</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'my test suite'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should have run my global setup'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// make assertion</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>Your <code>test/hooks.js</code> (for this example, a CJS module) should contain:</p><pre class=language-js><code class=language-js><span class="token comment">// test/hooks.js</span>

exports<span class="token punctuation">.</span>mochaHooks <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">beforeEach</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// global setup for all tests</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">afterAll</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// one-time final cleanup</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><blockquote><p><em>NOTE: Careful! <code>after</code> becomes <code>afterAll</code> and <code>before</code> becomes <code>beforeAll</code>.</em></p></blockquote><p>Your original <code>test/test.spec.js</code> should now contain:</p><pre class=language-js><code class=language-js><span class="token comment">// test/test.spec.js</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'my test suite'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should have run my global setup'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// make assertion</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>Running <code>mocha --require test/hooks.js test/test.spec.js</code> will run as before (and is now ready to be used with <a href=#-parallel-p><code>--parallel</code></a>).</p><h3 id=migrating-a-library-to-use-root-hook-plugins><a class=direct-link href=#migrating-a-library-to-use-root-hook-plugins>#</a> Migrating a Library to use Root Hook PLugins</h3><p>If you’re a library maintainer, and your library uses root hooks, you can migrate by refactoring your entry point:</p><ul><li>Your library should <em>always</em> export a <a href=#defining-a-root-hook-plugin><code>mochaHooks</code> object</a>.</li><li>To maintain backwards compatibility, run your root hooks <em>if and only if</em> <code>global.beforeEach</code> (or other relevant hook) exists.</li><li>Instruct your users to <code>--require &lt;your-package&gt;</code> when running <code>mocha</code>.</li></ul><h2 id=global-fixtures><a class=direct-link href=#global-fixtures>#</a> Global Fixtures</h2><blockquote><p><em>New in v8.2.0</em></p></blockquote><p>At first glance, <em>global fixtures</em> seem similar to <a href=#root-hook-plugins>root hooks</a>. However, unlike root hooks, global fixtures:</p><ol><li>Are <em>guaranteed</em> to execute <em>once and only once</em></li><li>Work identically parallel mode, watch mode, and serial mode</li><li>Do not share a context with tests, suites, or other hooks</li></ol><p>There are two types of global fixtures: <a href=#global-setup-fixtures>global setup fixtures</a> and <a href=#global-teardown-fixtures>global teardown fixtures</a>.</p><h3 id=global-setup-fixtures><a class=direct-link href=#global-setup-fixtures>#</a> Global Setup Fixtures</h3><p>To create a global setup fixture, export <code>mochaGlobalSetup</code> from a script, e.g.,:</p><pre class=language-js><code class=language-js><span class="token comment">// fixtures.cjs</span>

<span class="token comment">// can be async or not</span>
exports<span class="token punctuation">.</span><span class="token function-variable function">mochaGlobalSetup</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>server <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">startSomeServer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>port<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">TEST_PORT</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">server running on port </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>server<span class="token punctuation">.</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><p>…or an ES module:</p><pre class=language-js><code class=language-js><span class="token comment">// fixtures.mjs</span>

<span class="token comment">// can be async or not</span>
<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">mochaGlobalSetup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>server <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">startSomeServer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>port<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">TEST_PORT</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">server running on port </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>server<span class="token punctuation">.</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>To use it, load this file when running Mocha via <code>mocha --require fixtures.cjs</code> (or whatever you have named the file).</p><blockquote><p>Remember: you can define “requires” in a <a href=#configuring-mocha-nodejs>configuration file</a>.</p></blockquote><p>Now, before Mocha loads and runs your tests, it will execute the above global setup fixture, starting a server for testing. This won’t shut <em>down</em> the server when Mocha is done, however! To do that, use a <a href=#global-teardown-fixtures><em>global teardown fixture</em></a>.</p><h3 id=global-teardown-fixtures><a class=direct-link href=#global-teardown-fixtures>#</a> Global Teardown Fixtures</h3><p>Just like a <a href=#global-setup-fixtures>global setup fixture</a>, a <em>global teardown fixture</em> can be created by exporting from a “required” script (we can put both types of fixtures in a single file):</p><pre class=language-js><code class=language-js><span class="token comment">// fixtures.cjs, cont'd</span>

<span class="token comment">// can be async or not</span>
exports<span class="token punctuation">.</span><span class="token function-variable function">mochaGlobalTeardown</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>server<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'server stopped!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><p>…or an ES module:</p><pre class=language-js><code class=language-js><span class="token comment">// fixtures.mjs, cont'd</span>

<span class="token comment">// can be async or not</span>
<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">mochaGlobalTeardown</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>server<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'server stopped!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>You’ll note that we used <code>this</code> in the fixture examples. Global setup fixtures and global teardown fixtures <em>share a context</em>, which means we can add properties to the context object (<code>this</code>) in the setup fixture, and reference them later in the teardown fixture. This is more useful when the fixtures are in separate files, since you can just use JS’ variable scoping rules instead (<a href=#when-not-to-use-global-fixtures>example below</a>).</p><p>As explained <a href=#global-fixtures>above</a>–and <a href=#when-not-to-use-global-fixtures>below</a>–test files <em>do not</em> have access to this context object.</p><h3 id=when-to-use-global-fixtures><a class=direct-link href=#when-to-use-global-fixtures>#</a> When To Use Global Fixtures</h3><p>Global fixtures are good for spinning up a server, opening a socket, or otherwise creating a resource that your tests will repeatedly access via I/O.</p><h3 id=when-not-to-use-global-fixtures><a class=direct-link href=#when-not-to-use-global-fixtures>#</a> When Not To Use Global Fixtures</h3><p>If you need to access an in-memory value (such as a file handle or database connection), <em>don’t</em> use global fixtures to do this, because your tests will not have access to the value.</p><blockquote><p>You could be clever and try to get around this restriction by assigning something to the <code>global</code> object, but this will <em>not</em> work in parallel mode. It’s probably best to play by the rules!</p></blockquote><p>Instead, use the global fixture to <em>start</em> the database, and use <a href=#root-hook-plugins>root hook plugins</a> or plain ol’ <a href=#hooks>hooks</a> to create a connection.</p><p>Here’s an example of using global fixtures and “before all” hooks to get the job done. Note that we do not reference the <code>server</code> object anywhere in our tests!</p><p>First, use a global fixture to start and stop a test server:</p><pre class=language-js><code class=language-js><span class="token comment">// fixtures.mjs</span>

<span class="token keyword">let</span> server<span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">mochaGlobalSetup</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  server <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">startSomeServer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>port<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">TEST_PORT</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">server running on port </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>server<span class="token punctuation">.</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">mochaGlobalTeardown</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> server<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'server stopped!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><p>Then, connect to the server in your tests:</p><pre class=language-js><code class=language-js><span class="token comment">// test.spec.mjs</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span>connect<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'my-server-connector-thingy'</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'my API'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> connection<span class="token punctuation">;</span>

  <span class="token function">before</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    connection <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">{</span>port<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">TEST_PORT</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should be a nice API'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// assertions here</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">after</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>Finally, use this command to bring it together: <code>mocha --require fixtures.mjs test.spec.mjs</code>.</p><h2 id=test-fixture-decision-tree-wizard-thing><a class=direct-link href=#test-fixture-decision-tree-wizard-thing>#</a> Test Fixture Decision-Tree Wizard Thing</h2><p>This flowchart will help you decide which of <a href=#hooks>hooks</a>, <a href=#root-hook-plugins>root hook plugins</a> or <a href=#global-fixtures>global fixtures</a> you should use.</p><div><svg viewBox="0 0 854 665" width=100% height=100% version=1.1 id=mocha-fixture-wizard><g transform="translate(2 3)" fill=none fill-rule=evenodd><rect stroke=#8D6748 stroke-width=5 fill=#FFF fill-rule=nonzero x=360 width=120 height=60 rx=9></rect><text fill=#000 fill-rule=nonzero font-family="HelveticaNeue, Helvetica Neue" font-size=16><tspan x=388.972 y=27>My tests</tspan><tspan x=377.412 y=45>need setup!</tspan></text><path stroke=#CCC stroke-width=4 d="M320 200l100-100 100 100-100 100z"></path><text fill=#000 fill-rule=nonzero font-family="HelveticaNeue, Helvetica Neue" font-size=16><tspan x=360.28 y=196.5>Setup MUST run</tspan><tspan x=349.76 y=214.5>once and only once</tspan></text><path stroke=#444 stroke-width=2 d="M420 60v29.76"></path><path stroke=#444 stroke-width=2 fill=#444 fill-rule=nonzero d="M420 97.76l-4-8h8z"></path><path stroke=#CCC stroke-width=4 d="M200 285l100 100-100 100-100-100z"></path><text fill=#000 fill-rule=nonzero font-family="HelveticaNeue, Helvetica Neue" font-size=16><tspan x=132.28 y=381>Setup MUST share</tspan><tspan x=145.776 y=399>state with tests</tspan></text><path stroke=#444 stroke-width=2 d="M370 250l-113.28 80.24"></path><path fill=#FFF d="M280 274h58v36h-58z"></path><text fill-rule=nonzero font-family="HelveticaNeue, Helvetica Neue" font-size=16 fill=#000 transform="translate(280 274)"><tspan x=14.244 y=23.5>YES</tspan></text><path stroke=#444 stroke-width=2 fill=#444 fill-rule=nonzero d="M251.82 333.71l4.22-7.89.68 4.42 3.94 2.11z"></path><a><g transform="translate(0 580)"><rect stroke=#8D6748 stroke-width=4 width=180 height=80 rx=12></rect><text fill=#000 fill-rule=nonzero font-family="HelveticaNeue-Bold, Helvetica Neue" font-size=16 font-weight=bold><tspan x=11.828 y=37>Use Root Hooks and</tspan><tspan x=14.676 y=56>Avoid Parallel Mode</tspan></text></g></a><path stroke=#444 stroke-width=2 d="M150 435L93.15 572.39"></path><path stroke=#444 stroke-width=2 fill=#444 fill-rule=nonzero d="M90.85 577.93l-.63-8.92 2.93 3.38 4.46-.32z"></path><path stroke=#444 stroke-width=2 d="M250 435l56.85 137.39"></path><path stroke=#444 stroke-width=2 fill=#444 fill-rule=nonzero d="M309.15 577.93l-6.76-5.86 4.46.32 2.93-3.38z"></path><a><g transform="translate(220 580)"><rect stroke=#8D6748 stroke-width=4 width=180 height=80 rx=12></rect><text fill=#000 fill-rule=nonzero font-family="HelveticaNeue-Bold, Helvetica Neue" font-size=16 font-weight=bold><tspan x=15.648 y=45>Use Global Fixtures</tspan></text></g></a><path stroke=#CCC stroke-width=4 d="M650 285l100 100-100 100-100-100z"></path><text fill=#000 fill-rule=nonzero font-family="HelveticaNeue, Helvetica Neue" font-size=16><tspan x=580.352 y=381>Should setup affect</tspan><tspan x=569.544 y=399>tests across ALL files?</tspan></text><path stroke=#444 stroke-width=2 d="M470 250l123.11 80.49"></path><path stroke=#444 stroke-width=2 fill=#444 fill-rule=nonzero d="M598.13 333.78l-8.89-1.03 3.87-2.26.51-4.44z"></path><a><g transform="translate(444 580)"><rect stroke=#8D6748 stroke-width=4 width=180 height=80 rx=12></rect><text fill=#000 fill-rule=nonzero font-family="HelveticaNeue-Bold, Helvetica Neue" font-size=16 font-weight=bold><tspan x=26.776 y=45>Use Root Hooks</tspan></text></g></a><a><g transform="translate(670 580)"><rect stroke=#8D6748 stroke-width=4 width=180 height=80 rx=12></rect><text fill=#000 fill-rule=nonzero font-family="HelveticaNeue-Bold, Helvetica Neue" font-size=16 font-weight=bold><tspan x=27.344 y=45>Use Plain Hooks</tspan></text></g></a><path stroke=#444 stroke-width=2 d="M600 435l-62.59 137.5"></path><path fill=#FFF d="M91 486h58v36H91z"></path><text fill-rule=nonzero font-family="HelveticaNeue, Helvetica Neue" font-size=16 fill=#000 transform="translate(91 486)"><tspan x=14.244 y=23.5>YES</tspan></text><path fill=#FFF d="M506 272h58v36h-58z"></path><text fill-rule=nonzero font-family="HelveticaNeue, Helvetica Neue" font-size=16 fill=#000 transform="translate(506 272)"><tspan x=17.144 y=24>NO</tspan></text><path fill=#FFF d="M252 485h58v36h-58z"></path><text fill-rule=nonzero font-family="HelveticaNeue, Helvetica Neue" font-size=16 fill=#000 transform="translate(252 485)"><tspan x=17.144 y=24>NO</tspan></text><path stroke=#444 stroke-width=2 fill=#444 fill-rule=nonzero d="M534.93 577.96l-.33-8.93 2.81 3.47 4.47-.16z"></path><path stroke=#444 stroke-width=2 d="M700 435l56.85 137.39"></path><path stroke=#444 stroke-width=2 fill=#444 fill-rule=nonzero d="M759.15 577.93l-6.76-5.86 4.46.32 2.93-3.38z"></path><g><path fill=#FFF d="M540 485h58v36h-58z"></path><text fill-rule=nonzero font-family="HelveticaNeue, Helvetica Neue" font-size=16 fill=#000 transform="translate(540 485)"><tspan x=14.244 y=23.5>YES</tspan></text></g><g><path fill=#FFF d="M699 489h58v36h-58z"></path><text fill-rule=nonzero font-family="HelveticaNeue, Helvetica Neue" font-size=16 fill=#000 transform="translate(699 489)"><tspan x=17.144 y=24>NO</tspan></text></g></g></svg></div><h2 id=interfaces><a class=direct-link href=#interfaces>#</a> Interfaces</h2><p>Mocha’s “interface” system allows developers to choose their style of DSL. Mocha has <strong>BDD</strong>, <strong>TDD</strong>, <strong>Exports</strong>, <strong>QUnit</strong> and <strong>Require</strong>-style interfaces.</p><h3 id=bdd><a class=direct-link href=#bdd>#</a> BDD</h3><p>The <strong>BDD</strong> interface provides <code>describe()</code>, <code>context()</code>, <code>it()</code>, <code>specify()</code>, <code>before()</code>, <code>after()</code>, <code>beforeEach()</code>, and <code>afterEach()</code>.</p><p><code>context()</code> is just an alias for <code>describe()</code>, and behaves the same way; it provides a way to keep tests easier to read and organized. Similarly, <code>specify()</code> is an alias for <code>it()</code>.</p><blockquote><p>All of the previous examples were written using the <strong>BDD</strong> interface.</p></blockquote><pre class=language-js><code class=language-js><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Array'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">before</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'#indexOf()'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'when not present'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should not throw an error'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">.</span>should<span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">throw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should return -1'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span>should<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'when present'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should return the index where the element first appears in the array'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span>should<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h3 id=tdd><a class=direct-link href=#tdd>#</a> TDD</h3><p>The <strong>TDD</strong> interface provides <code>suite()</code>, <code>test()</code>, <code>suiteSetup()</code>, <code>suiteTeardown()</code>, <code>setup()</code>, and <code>teardown()</code>:</p><pre class=language-js><code class=language-js><span class="token function">suite</span><span class="token punctuation">(</span><span class="token string">'Array'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">suite</span><span class="token punctuation">(</span><span class="token string">'#indexOf()'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'should return -1 when not present'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h3 id=exports><a class=direct-link href=#exports>#</a> Exports</h3><p>The <strong>Exports</strong> interface is much like Mocha’s predecessor <a href=https://github.com/tj/expresso>expresso</a>. The keys <code>before</code>, <code>after</code>, <code>beforeEach</code>, and <code>afterEach</code> are special-cased, object values are suites, and function values are test-cases:</p><pre class=language-js><code class=language-js>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">before</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  Array<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'#indexOf()'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">'should return -1 when not present'</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span>should<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h3 id=qunit><a class=direct-link href=#qunit>#</a> QUnit</h3><p>The <a href=https://qunitjs.com/ >QUnit</a>-inspired interface matches the “flat” look of QUnit, where the test suite title is defined <em>before</em> the test-cases. Like TDD, it uses <code>suite()</code> and <code>test()</code>, but resembling BDD, it also contains <code>before()</code>, <code>after()</code>, <code>beforeEach()</code>, and <code>afterEach()</code>.</p><pre class=language-js><code class=language-js><span class="token keyword">function</span> <span class="token function">ok</span><span class="token punctuation">(</span><span class="token parameter">expr<span class="token punctuation">,</span> msg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>expr<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">suite</span><span class="token punctuation">(</span><span class="token string">'Array'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'#length'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function">ok</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'#indexOf()'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function">ok</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">ok</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">ok</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">suite</span><span class="token punctuation">(</span><span class="token string">'String'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'#length'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">ok</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h3 id=require><a class=direct-link href=#require>#</a> Require</h3><p>The <code>require</code> interface allows you to require the <code>describe</code> and friend words directly using <code>require</code> and call them whatever you want. This interface is also useful if you want to avoid global variables in your tests.</p><p><em>Note</em>: The <code>require</code> interface cannot be run via the <code>node</code> executable, and must be run via <code>mocha</code>.</p><pre class=language-js><code class=language-js><span class="token keyword">var</span> testCase <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mocha'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>describe<span class="token punctuation">;</span>
<span class="token keyword">var</span> pre <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mocha'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>before<span class="token punctuation">;</span>
<span class="token keyword">var</span> assertions <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mocha'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>it<span class="token punctuation">;</span>
<span class="token keyword">var</span> assert <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'chai'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>assert<span class="token punctuation">;</span>

<span class="token function">testCase</span><span class="token punctuation">(</span><span class="token string">'Array'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">pre</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">testCase</span><span class="token punctuation">(</span><span class="token string">'#indexOf()'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">assertions</span><span class="token punctuation">(</span><span class="token string">'should return -1 when not present'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h2 id=reporters><a class=direct-link href=#reporters>#</a> Reporters</h2><p>Mocha reporters adjust to the terminal window, and always disable ANSI-escape coloring when the stdio streams are not associated with a TTY.</p><h3 id=spec><a class=direct-link href=#spec>#</a> Spec</h3><p>Alias: <code>Spec</code>, <code>spec</code></p><p>This is the default reporter. The Spec reporter outputs a hierarchical view nested just as the test cases are.</p><p><img src=https://mochajs.org/static/reporter-spec.resize920,9999-withoutEnlargement.736b9ec065.png alt="spec reporter" class=screenshot loading=lazy> <img src=https://mochajs.org/static/reporter-spec-fail.resize920,9999-withoutEnlargement.a250c17c68.png alt="spec reporter with failure" class=screenshot loading=lazy></p><h3 id=dot-matrix><a class=direct-link href=#dot-matrix>#</a> Dot Matrix</h3><p>Alias: <code>Dot</code>, <code>dot</code></p><p>The Dot Matrix reporter is a series of characters which represent test cases. Failures highlight in red exclamation marks (<code>!</code>), pending tests with a blue comma (<code>,</code>), and slow tests as yellow. Good if you prefer minimal output.</p><p><img src="data:image/png;base64,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" alt="dot matrix reporter" class=screenshot loading=lazy></p><h3 id=nyan><a class=direct-link href=#nyan>#</a> Nyan</h3><p>Alias: <code>Nyan</code>, <code>nyan</code></p><p>The Nyan reporter is exactly what you might expect:</p><p><img src=https://mochajs.org/static/reporter-nyan.resize920,9999-withoutEnlargement.12fdb2c640.png alt="js nyan cat reporter" class=screenshot loading=lazy></p><h3 id=tap><a class=direct-link href=#tap>#</a> TAP</h3><p>Alias: <code>TAP</code>, <code>tap</code></p><p>The TAP reporter emits lines for a <a href=https://en.wikipedia.org/wiki/Test_Anything_Protocol>Test-Anything-Protocol</a> consumer.</p><p><img src=https://mochajs.org/static/reporter-tap.resize920,9999-withoutEnlargement.932e42e1af.png alt="test anything protocol" class=screenshot loading=lazy></p><h3 id=landing-strip><a class=direct-link href=#landing-strip>#</a> Landing Strip</h3><p>Alias: <code>Landing</code>, <code>landing</code></p><p>The Landing Strip reporter is a gimmicky test reporter simulating a plane landing 😃 unicode ftw</p><p><img src=https://mochajs.org/static/reporter-landing.resize920,9999-withoutEnlargement.65f6947354.png alt="landing strip plane reporter" class=screenshot loading=lazy> <img src=https://mochajs.org/static/reporter-landing-fail.resize920,9999-withoutEnlargement.62645a8ebc.png alt="landing strip with failure" class=screenshot loading=lazy></p><h3 id=list><a class=direct-link href=#list>#</a> List</h3><p>Alias: <code>List</code>, <code>list</code></p><p>The List reporter outputs a simple specifications list as test cases pass or fail, outputting the failure details at the bottom of the output.</p><p><img src=https://mochajs.org/static/reporter-list.resize920,9999-withoutEnlargement.3ddcf5af45.png alt="list reporter" class=screenshot loading=lazy></p><h3 id=progress><a class=direct-link href=#progress>#</a> Progress</h3><p>Alias: <code>Progress</code>, <code>progress</code></p><p>The Progress reporter implements a simple progress-bar:</p><p><img src=https://mochajs.org/static/reporter-progress.resize920,9999-withoutEnlargement.a3a1f02a83.png alt="progress bar" class=screenshot loading=lazy></p><h3 id=json><a class=direct-link href=#json>#</a> JSON</h3><p>Alias: <code>JSON</code>, <code>json</code></p><p>The JSON reporter outputs a single large JSON object when the tests have completed (failures or not).</p><p>By default, it will output to the console. To write directly to a file, use <code>--reporter-option output=filename.json</code>.</p><p><img src=https://mochajs.org/static/reporter-json.resize920,9999-withoutEnlargement.798b1af091.png alt="json reporter" class=screenshot loading=lazy></p><h3 id=json-stream><a class=direct-link href=#json-stream>#</a> JSON Stream</h3><p>Alias: <code>JSONStream</code>, <code>json-stream</code></p><p>The JSON Stream reporter outputs newline-delimited JSON “events” as they occur, beginning with a “start” event, followed by test passes or failures, and then the final “end” event.</p><p><img src=https://mochajs.org/static/reporter-json-stream.resize920,9999-withoutEnlargement.6eaef00a29.png alt="json stream reporter" class=screenshot loading=lazy></p><h3 id=min><a class=direct-link href=#min>#</a> Min</h3><p>Alias: <code>Min</code>, <code>min</code></p><p>The Min reporter displays the summary only, while still outputting errors on failure. This reporter works great with <code>--watch</code> as it clears the terminal in order to keep your test summary at the top.</p><p><img src=https://mochajs.org/static/reporter-min.resize920,9999-withoutEnlargement.c85a034dae.png alt="min reporter" class=screenshot loading=lazy></p><h3 id=doc><a class=direct-link href=#doc>#</a> Doc</h3><p>Alias: <code>Doc</code>, <code>doc</code></p><p>The Doc reporter outputs a hierarchical HTML body representation of your tests. Wrap it with a header, footer, and some styling, then you have some fantastic documentation!</p><p><img src=https://mochajs.org/static/reporter-doc.resize920,9999-withoutEnlargement.f56aab77df.png alt="doc reporter" class=screenshot loading=lazy></p><p>For example, suppose you have the following JavaScript:</p><pre class=language-js><code class=language-js><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Array'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'#indexOf()'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should return -1 when the value is not present'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span>should<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>should<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>The command <code>mocha --reporter doc array</code> would yield:</p><pre class=language-html><code class=language-html><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>suite<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Array<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dl</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>suite<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>#indexOf()<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dl</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dt</span><span class="token punctuation">&gt;</span></span>should return -1 when the value is not present<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dt</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dd</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pre</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>code</span><span class="token punctuation">&gt;</span></span>[1,2,3].indexOf(5).should.equal(-1);
[1,2,3].indexOf(0).should.equal(-1);<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>code</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pre</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dd</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dl</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dl</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
</code></pre><p>The SuperAgent request library <a href=https://visionmedia.github.io/superagent/docs/test.html>test documentation</a> was generated with Mocha’s doc reporter using this Bash command:</p><pre class=language-bash><code class=language-bash>$ mocha --reporter<span class="token operator">=</span>doc <span class="token operator">|</span> <span class="token function">cat</span> docs/head.html - docs/tail.html <span class="token operator">&gt;</span> docs/test.html
</code></pre><p>View SuperAgent’s <a href=https://github.com/visionmedia/superagent/blob/master/Makefile>Makefile</a> for reference.</p><h3 id=markdown><a class=direct-link href=#markdown>#</a> Markdown</h3><p>Alias: <code>Markdown</code>, <code>markdown</code></p><p>The Markdown reporter generates a markdown TOC and body for your test suite. This is great if you want to use the tests as documentation within a Github wiki page, or a markdown file in the repository that Github can render. For example, here is the Connect <a href=https://github.com/senchalabs/connect/blob/90a725343c2945aaee637e799b1cd11e065b2bff/tests.md>test output</a>.</p><h3 id=xunit><a class=direct-link href=#xunit>#</a> XUnit</h3><p>Alias: <code>XUnit</code>, <code>xunit</code></p><p>The XUnit reporter is also available. It outputs an XUnit-compatible XML document, often applicable in CI servers.</p><p>By default, it will output to the console. To write directly to a file, use <code>--reporter-option output=filename.xml</code>.</p><p>To specify custom report title, use <code>--reporter-option suiteName="Custom name"</code>.</p><h3 id=third-party-reporters><a class=direct-link href=#third-party-reporters>#</a> Third-Party Reporters</h3><p>Mocha allows you to define custom reporters. For more information see the <a href=https://github.com/mochajs/mocha/wiki/Third-party-reporters>wiki</a>.</p><p>Examples:</p><ul><li>the <a href=https://github.com/travisjeffery/mocha-teamcity-reporter>TeamCity reporter</a></li><li>our <a href=https://github.com/mochajs/mocha-examples/tree/master/packages/third-party-reporter>working example</a></li></ul><h3 id=html-reporter><a class=direct-link href=#html-reporter>#</a> HTML Reporter</h3><p>Alias: <code>HTML</code>, <code>html</code></p><p><strong>The HTML reporter is not intended for use on the command-line.</strong></p><h2 id=nodejs-native-esm-support><a class=direct-link href=#nodejs-native-esm-support>#</a> Node.JS native ESM support</h2><blockquote><p><em>New in v7.1.0</em></p></blockquote><p>Mocha supports writing your tests as ES modules, and not just using CommonJS. For example:</p><pre class=language-js><code class=language-js><span class="token comment">// test.mjs</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>add<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./add.mjs'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> assert <span class="token keyword">from</span> <span class="token string">'assert'</span><span class="token punctuation">;</span>

<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should add to numbers from an es module'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  assert<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>To enable this you don’t need to do anything special. Write your test file as an ES module. In Node.js this means either ending the file with a <code>.mjs</code> extension, or, if you want to use the regular <code>.js</code> extension, by adding <code>"type": "module"</code> to your <code>package.json</code>. More information can be found in the <a href=https://nodejs.org/api/esm.html>Node.js documentation</a>.</p><h3 id=current-limitations><a class=direct-link href=#current-limitations>#</a> Current Limitations</h3><ul><li><a href=#-watch-w>Watch mode</a> does not support ES Module test files</li><li><a href=#third-party-reporters>Custom reporters</a> and <a href=#interfaces>custom interfaces</a> can only be CommonJS files</li><li><a href=#configuring-mocha-nodejs>Configuration file</a> can only be a CommonJS file (<code>.mocharc.js</code> or <code>.mocharc.cjs</code>)</li><li>When using module-level mocks via libs like <code>proxyquire</code>, <code>rewiremock</code> or <code>rewire</code>, hold off on using ES modules for your test files. You can switch to using <code>testdouble</code>, which does support ESM.</li></ul><h2 id=running-mocha-in-the-browser><a class=direct-link href=#running-mocha-in-the-browser>#</a> Running Mocha in the Browser</h2><p>Mocha runs in the browser. Every release of Mocha will have new builds of <code>./mocha.js</code> and <code>./mocha.css</code> for use in the browser.</p><p>A typical setup might look something like the following, where we call <code>mocha.setup('bdd')</code> to use the <strong>BDD</strong> interface before loading the test scripts, running them <code>onload</code> with <code>mocha.run()</code>.</p><pre class=language-html><code class=language-html><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Mocha Tests<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/mocha/mocha.css<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mocha<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/chai/chai.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/mocha/mocha.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mocha-init<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
      mocha<span class="token punctuation">.</span><span class="token function">setup</span><span class="token punctuation">(</span><span class="token string">'bdd'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      mocha<span class="token punctuation">.</span><span class="token function">checkLeaks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test.array.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test.object.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test.xhr.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mocha-exec<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
      mocha<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><h3 id=grep><a class=direct-link href=#grep>#</a> Grep</h3><p>The browser may use the <code>--grep</code> as functionality. Append a query-string to your URL: <code>?grep=api</code>.</p><h3 id=browser-configuration><a class=direct-link href=#browser-configuration>#</a> Browser Configuration</h3><p>Mocha options can be set via <code>mocha.setup()</code>. Examples:</p><pre class=language-js><code class=language-js><span class="token comment">// Use "tdd" interface.  This is a shortcut to setting the interface;</span>
<span class="token comment">// any other options must be passed via an object.</span>
mocha<span class="token punctuation">.</span><span class="token function">setup</span><span class="token punctuation">(</span><span class="token string">'tdd'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// This is equivalent to the above.</span>
mocha<span class="token punctuation">.</span><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  ui<span class="token operator">:</span> <span class="token string">'tdd'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Examples of options:</span>
mocha<span class="token punctuation">.</span><span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  allowUncaught<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  asyncOnly<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  bail<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  checkLeaks<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  dryRun<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  failZero<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  forbidOnly<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  forbidPending<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  global<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'MyLib'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  retries<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  rootHooks<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token parameter">done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  slow<span class="token operator">:</span> <span class="token string">'100'</span><span class="token punctuation">,</span>
  timeout<span class="token operator">:</span> <span class="token string">'2000'</span><span class="token punctuation">,</span>
  ui<span class="token operator">:</span> <span class="token string">'bdd'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h3 id=browser-specific-options><a class=direct-link href=#browser-specific-options>#</a> Browser-specific Option(s)</h3><p>Browser Mocha supports many, but not all <a href=#command-line-usage>cli options</a>. To use a <a href=#command-line-usage>cli option</a> that contains a “-”, please convert the option to camel-case, (eg. <code>check-leaks</code> to <code>checkLeaks</code>).</p><h4 id=options-that-differ-slightly-from-cli-options><a class=direct-link href=#options-that-differ-slightly-from-cli-options>#</a> Options that differ slightly from <a href=#command-line-usage>cli options</a>:</h4><p><code>reporter</code> <em>{string|constructor}</em> You can pass a reporter’s name or a custom reporter’s constructor. You can find <strong>recommended</strong> reporters for the browser <a href=#reporting>here</a>. It is possible to use <a href=#reporters>built-in reporters</a> as well. Their employment in browsers is neither recommended nor supported, open the console to see the test results.</p><h4 id=options-that-only-function-in-browser-context><a class=direct-link href=#options-that-only-function-in-browser-context>#</a> Options that <em>only</em> function in browser context:</h4><p><code>noHighlighting</code> <em>{boolean}</em> If set to <code>true</code>, do not attempt to use syntax highlighting on output test code.</p><h3 id=reporting><a class=direct-link href=#reporting>#</a> Reporting</h3><p>The HTML reporter is the default reporter when running Mocha in the browser. It looks like this:</p><p><img src=https://mochajs.org/static/reporter-html.resize920,9999-withoutEnlargement.d3a2bf90fa.png alt="HTML test reporter" class=screenshot loading=lazy></p><p><a href=https://npm.im/mochawesome>Mochawesome</a> is a great alternative to the default HTML reporter.</p><h2 id=desktop-notification-support><a class=direct-link href=#desktop-notification-support>#</a> Desktop Notification Support</h2><p>Desktop notifications allow asynchronous communication of events without forcing you to react to a notification immediately. Their appearance and specific functionality vary across platforms. They typically disappear automatically after a short delay, but their content is often stored in some manner that allows you to access past notifications.</p><p><a href=http://growl.info/ >Growl</a> was an early notification system implementation for OS X and Windows, hence, the name of Mocha’s <code>--growl</code> option.</p><p>Once enabled, when your root suite completes test execution, a desktop notification should appear informing you whether your tests passed or failed.</p><h3 id=node-based-notifications><a class=direct-link href=#node-based-notifications>#</a> Node-based notifications</h3><p>In order to use desktop notifications with the command-line interface (CLI), you <strong>must</strong> first install some platform-specific prerequisite software. Instructions for doing so can be found <a href=https://github.com/mochajs/mocha/wiki/Growl-Notifications>here</a>.</p><p>Enable Mocha’s desktop notifications as follows:</p><pre class=language-bash><code class=language-bash>$ mocha --growl
</code></pre><h3 id=browser-based-notifications><a class=direct-link href=#browser-based-notifications>#</a> Browser-based notifications</h3><p>Web notification support is being made available for current versions of modern browsers. Ensure your browser version supports both <a href="https://caniuse.com/#feat=promises">promises</a> and <a href="https://caniuse.com/#feat=notifications">web notifications</a>. As the Notification API evolved over time, <strong>do not expect</strong> the minimum possible browser version to necessarily work.</p><p>Enable Mocha’s web notifications with a slight modification to your client-side mocha HTML. Add a call to <code>mocha.growl()</code> prior to running your tests as shown below:</p><pre class=language-html><code class=language-html><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Mocha Tests<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/mocha/mocha.css<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mocha<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/chai/chai.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/mocha/mocha.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mocha-init<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
      mocha<span class="token punctuation">.</span><span class="token function">setup</span><span class="token punctuation">(</span><span class="token string">'bdd'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      mocha<span class="token punctuation">.</span><span class="token function">growl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;-- Enables web notifications</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test.spec.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mocha-exec<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
      mocha<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><h2 id=configuring-mocha-nodejs><a class=direct-link href=#configuring-mocha-nodejs>#</a> Configuring Mocha (Node.js)</h2><blockquote><p><em>New in v6.0.0</em></p></blockquote><p>Mocha supports configuration files, typical of modern command-line tools, in several formats:</p><ul><li><strong>JavaScript</strong>: Create a <code>.mocharc.js</code> (or <code>.mocharc.cjs</code> when using <a href=#nodejs-native-esm-support><code>"type"="module"</code></a> in your <code>package.json</code>) in your project’s root directory, and export an object (<code>module.exports = {/* ... */}</code>) containing your configuration.</li><li><strong>YAML</strong>: Create a <code>.mocharc.yaml</code> (or <code>.mocharc.yml</code>) in your project’s root directory.</li><li><strong>JSON</strong>: Create a <code>.mocharc.json</code> (or <code>.mocharc.jsonc</code>) in your project’s root directory. Comments — while not valid JSON — are allowed in this file, and will be ignored by Mocha.</li><li><strong>package.json</strong>: Create a <code>mocha</code> property in your project’s <code>package.json</code>.</li></ul><h3 id=custom-locations><a class=direct-link href=#custom-locations>#</a> Custom Locations</h3><p>You can specify a custom location for your configuration file with the <code>--config &lt;path&gt;</code> option. Mocha will use the file’s extension to determine how to parse the file, and will assume JSON if unknown.</p><p>You can specify a custom <code>package.json</code> location as well, using the <code>--package &lt;path&gt;</code> option.</p><h3 id=ignoring-config-files><a class=direct-link href=#ignoring-config-files>#</a> Ignoring Config Files</h3><p>To skip looking for config files, use <code>--no-config</code>. Likewise, use <code>--no-package</code> to stop Mocha from looking for configuration in a <code>package.json</code>.</p><h3 id=priorities><a class=direct-link href=#priorities>#</a> Priorities</h3><p>If no custom path was given, and if there are multiple configuration files in the same directory, Mocha will search for — and use — only one. The priority is:</p><ol><li><code>.mocharc.js</code></li><li><code>.mocharc.yaml</code></li><li><code>.mocharc.yml</code></li><li><code>.mocharc.jsonc</code></li><li><code>.mocharc.json</code></li></ol><h3 id=merging><a class=direct-link href=#merging>#</a> Merging</h3><p>Mocha will also <em>merge</em> any options found in <code>package.json</code> into its run-time configuration. In case of conflict, the priority is:</p><ol><li>Arguments specified on command-line</li><li>Configuration file (<code>.mocharc.js</code>, <code>.mocharc.yml</code>, etc.)</li><li><code>mocha</code> property of <code>package.json</code></li></ol><p>Options which can safely be repeated (e.g., <code>--require</code>) will be <em>concatenated</em>, with higher-priorty configuration sources appearing earlier in the list. For example, a <code>.mocharc.json</code> containing <code>"require": "bar"</code>, coupled with execution of <code>mocha --require foo</code>, would cause Mocha to require <code>foo</code>, then <code>bar</code>, in that order.</p><h3 id=extending-configuration><a class=direct-link href=#extending-configuration>#</a> Extending Configuration</h3><p>Configurations can inherit from other modules using the <code>extends</code> keyword. See <a href=http://yargs.js.org/docs/#api-configobject-extends-keyword>here</a> for more information.</p><h3 id=configuration-format><a class=direct-link href=#configuration-format>#</a> Configuration Format</h3><ul><li>Any “boolean” flag (which doesn’t require a parameter, such as <code>--bail</code>), can be specified using a boolean value, e.g.: <code>"bail": true</code>.</li><li>Any “array”-type option (see <code>mocha --help</code> for a list) can be a single string value.</li><li>For options containing a dash (<code>-</code>), the option name can be specified using camelCase.</li><li>Aliases are valid names, e.g., <code>R</code> instead of <code>reporter</code>.</li><li>Test files can be specified using <code>spec</code>, e.g., <code>"spec": "test/**/*.spec.js"</code>.</li><li>Flags to <code>node</code> are <em>also</em> supported in configuration files. Use caution, as these can vary between versions of Node.js!</li></ul><p><strong>For more configuration examples, see the <a href=https://github.com/mochajs/mocha/tree/master/example/config><code>example/config</code></a> directory on GitHub.</strong></p><h2 id=the-test-directory><a class=direct-link href=#the-test-directory>#</a> The <code>test/</code> Directory</h2><p>By default, <code>mocha</code> looks for the glob <code>"./test/*.{js,cjs,mjs}"</code>, so you may want to put your tests in <code>test/</code> folder. If you want to include subdirectories, pass the <code>--recursive</code> option.</p><p>To configure where <code>mocha</code> looks for tests, you may pass your own glob:</p><pre class=language-bash><code class=language-bash>$ mocha --recursive <span class="token string">"./spec/*.js"</span>
</code></pre><p>Some shells support recursive matching by using the globstar (<code>**</code>) wildcard. Bash &gt;= 4.3 supports this with the <a href=https://www.gnu.org/software/bash/manual/html_node/The-Shopt-Builtin.html><code>globstar</code> option</a> which <a href=https://github.com/mochajs/mocha/pull/3348#issuecomment-383937247>must be enabled</a> to get the same results as passing the <code>--recursive</code> option (<a href=http://zsh.sourceforge.net/Doc/Release/Expansion.html#Recursive-Globbing>ZSH</a> and <a href=https://fishshell.com/docs/current/#expand-wildcard>Fish</a> support this by default). With recursive matching enabled, the following is the same as passing <code>--recursive</code>:</p><pre class=language-bash><code class=language-bash>$ mocha <span class="token string">"./spec/**/*.js"</span>
</code></pre><p><a href=https://medium.com/@jakubsynowiec/you-should-always-quote-your-globs-in-npm-scripts-621887a2a784>You should <em>always</em> quote your globs in npm scripts</a>. If you use double quotes, it’s the shell on UNIX that will expand the glob. On the other hand, if you use single quotes, the <a href=https://www.npmjs.com/package/glob><code>node-glob</code></a> module will handle its expansion.</p><p>See this <a href=https://gist.github.com/reggi/475793ea1846affbcfe8>tutorial</a> on using globs.</p><p><em>Note</em>: Double quotes around the glob are recommended for portability.</p><h2 id=error-codes><a class=direct-link href=#error-codes>#</a> Error Codes</h2><blockquote><p><em>New in v6.0.0</em></p></blockquote><p>When Mocha itself throws exception, the associated <code>Error</code> will have a <code>code</code> property. Where applicable, consumers should check the <code>code</code> property instead of string-matching against the <code>message</code> property. The following table describes these error codes:</p><table><thead><tr><th>Code</th><th>Description</th></tr></thead><tbody><tr><td><code>ERR_MOCHA_INVALID_ARG_TYPE</code></td><td>wrong type was passed for a given argument</td></tr><tr><td><code>ERR_MOCHA_INVALID_ARG_VALUE</code></td><td>invalid or unsupported value was passed for a given argument</td></tr><tr><td><code>ERR_MOCHA_INVALID_EXCEPTION</code></td><td>a falsy or otherwise underspecified exception was thrown</td></tr><tr><td><code>ERR_MOCHA_INVALID_INTERFACE</code></td><td>interface specified in options not found</td></tr><tr><td><code>ERR_MOCHA_INVALID_REPORTER</code></td><td>reporter specified in options not found</td></tr><tr><td><code>ERR_MOCHA_NO_FILES_MATCH_PATTERN</code></td><td>test file(s) could not be found</td></tr><tr><td><code>ERR_MOCHA_UNSUPPORTED</code></td><td>requested behavior, option, or parameter is unsupported</td></tr></tbody></table><h2 id=editor-plugins><a class=direct-link href=#editor-plugins>#</a> Editor Plugins</h2><p>The following editor-related packages are available:</p><h3 id=textmate><a class=direct-link href=#textmate>#</a> TextMate</h3><p>The <a href=https://github.com/mochajs/mocha.tmbundle>Mocha TextMate bundle</a> includes snippets to make writing tests quicker and more enjoyable.</p><h3 id=jetbrains><a class=direct-link href=#jetbrains>#</a> JetBrains</h3><p><a href=https://www.jetbrains.com/ >JetBrains</a> provides a <a href=https://www.jetbrains.com/idea/features/nodejs.html>NodeJS plugin</a> for its suite of IDEs (IntelliJ IDEA, WebStorm, etc.), which contains a Mocha test runner, among other things.</p><p><img src="https://mochajs.org/static/jetbrains-plugin.resize920,9999-withoutEnlargement-pngquant.eaf0a5f39e.png?ncolors=" alt="JetBrains Mocha Runner Plugin in Action" class=screenshot loading=lazy></p><p>The plugin is titled <strong>NodeJS</strong>, and can be installed via <strong>Preferences</strong> &gt; <strong>Plugins</strong>, assuming your license allows it.</p><h3 id=wallabyjs><a class=direct-link href=#wallabyjs>#</a> Wallaby.js</h3><p><a href=https://wallabyjs.com/ >Wallaby.js</a> is a continuous testing tool that enables real-time code coverage for Mocha with any assertion library in VS Code, Atom, JetBrains IDEs (IntelliJ IDEA, WebStorm, etc.), Sublime Text and Visual Studio for both browser and node.js projects.</p><p><img src="https://mochajs.org/static/wallaby.resize920,9999-withoutEnlargement-pngquant.6d5ba62803.png?ncolors=" alt="Wallaby.js in Action" class=screenshot loading=lazy></p><h3 id=emacs><a class=direct-link href=#emacs>#</a> Emacs</h3><p><a href=https://www.gnu.org/software/emacs/ >Emacs</a> support for running Mocha tests is available via a 3rd party package <a href=https://github.com/scottaj/mocha.el>mocha.el</a>. The package is available on MELPA, and can be installed via <code>M-x package-install mocha</code>.</p><p><img src="https://mochajs.org/static/emacs.resize920,9999-withoutEnlargement-pngquant.bf59ba2694.png?ncolors=" alt="Emacs Mocha Runner in Action" class=screenshot loading=lazy></p><h3 id=mocha-sidebar-vs-code><a class=direct-link href=#mocha-sidebar-vs-code>#</a> Mocha Sidebar (VS Code)</h3><p><a href="https://marketplace.visualstudio.com/items?itemName=maty.vscode-mocha-sidebar">Mocha sidebar</a> is the most complete mocha extension for vs code.</p><h4 id=features-2><a class=direct-link href=#features-2>#</a> Features</h4><ul><li>see all tests in VS Code sidebar menu</li><li>run &amp; debug tests for each level hierarchy from all tests to a single test (and each suite)</li><li>auto run tests on file save</li><li>see tests results directly in the code editor</li></ul><p><img src="https://mochajs.org/static/mocha_side_bar.resize920,9999-withoutEnlargement-pngquant.8f90ce1d2b.png?ncolors=" alt="mocha side bar in Action" class=screenshot loading=lazy></p><h2 id=examples><a class=direct-link href=#examples>#</a> Examples</h2><p>Real live example code:</p><ul><li><a href=https://github.com/mochajs/mocha-examples>Mocha examples</a></li><li><a href=https://github.com/visionmedia/express/tree/master/test>Express</a></li><li><a href=https://github.com/senchalabs/connect/tree/master/test>Connect</a></li><li><a href=https://github.com/visionmedia/superagent/tree/master/test/node>SuperAgent</a></li><li><a href=https://github.com/LearnBoost/websocket.io/tree/master/test>WebSocket.io</a></li><li><a href=https://github.com/mochajs/mocha/tree/master/test>Mocha tests</a></li></ul><h2 id=testing-mocha><a class=direct-link href=#testing-mocha>#</a> Testing Mocha</h2><p>To run Mocha’s tests, you will need GNU Make or compatible; Cygwin should work.</p><pre class=language-bash><code class=language-bash>$ <span class="token builtin class-name">cd</span> /path/to/mocha
$ <span class="token function">npm</span> <span class="token function">install</span>
$ <span class="token function">npm</span> <span class="token builtin class-name">test</span>
</code></pre><h2 id=more-information><a class=direct-link href=#more-information>#</a> More Information</h2><p>In addition to chatting with us on <a href=https://gitter.im/mochajs/mocha>Gitter</a>, for additional information such as using spies, mocking, and shared behaviours be sure to check out the <a href=https://github.com/mochajs/mocha/wiki>Mocha Wiki</a> on GitHub. For discussions join the <a href=https://groups.google.com/group/mochajs>Google Group</a>. For a running example of Mocha, view <a href=https://mochajs.org/example/tests.html>example/tests.html</a>. For the JavaScript API, view the <a href=https://mochajs.org/api/ >API documentation</a> or the <a href=https://github.com/mochajs/mocha/blob/master/lib/mocha.js>source</a>.</p></main><aside class=sponsorship><a href=https://matomo.org/ rel="external noopener" title="Mocha is sponsored by Matomo"><img src=https://mochajs.org/static/matomo-logo.trim.fe5d9e166f.png loading=lazy alt="Matomo logo"> </a><a title="Mocha is an OpenJS Foundation Project" href=https://openjsf.org/ rel="external noopener"><img src=data:image/svg+xml,%3Csvg%20version%3D%221.1%22%20id%3D%22ARTWORK%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20x%3D%220%22%20y%3D%220%22%20viewBox%3D%220%200%201000%20314.4%22%20xml%3Aspace%3D%22preserve%22%3E%3Cstyle%3E.st1%7Bfill%3A%2354565a%7D%3C%2Fstyle%3E%3ClinearGradient%20id%3D%22SVGID_1_%22%20gradientUnits%3D%22userSpaceOnUse%22%20x1%3D%2228.7654%22%20y1%3D%2249.8307%22%20x2%3D%22243.506%22%20y2%3D%22264.5713%22%3E%3Cstop%20offset%3D%22.2145%22%20stop-color%3D%22%230075c9%22%2F%3E%3Cstop%20offset%3D%22.7067%22%20stop-color%3D%22%2380bc00%22%2F%3E%3Cstop%20offset%3D%221%22%20stop-color%3D%22%23fde021%22%2F%3E%3C%2FlinearGradient%3E%3Cpath%20d%3D%22M271.4%2078.1L137%20.5l-.9-.5-.9.5L1.6%2077.7l-.7.4-.9.5v157.2l.9.5%20134.4%2077.6.9.5.9-.5%20132.6-76.5%201.8-1%20.9-.5V78.6l-1-.5zm-148.7-58L89.8%2077H24.1l98.6-56.9zM84.4%2086.4L69%20113.1%2022.8%2086.4h61.6zm-12%2039.4l54.3%2031.4-54.3%2031.4-18.1-31.4%2018.1-31.4zm-8-4.6L49%20147.9%2018.1%2094.5l46.3%2026.7zm-53.7-20.9l32.9%2056.9-32.9%2056.9V100.3zm38.2%2066.3l15.4%2026.7L18.1%20220l30.8-53.4zM69%20201.3L84.4%20228H22.8L69%20201.3zm-44.9%2036.1h65.7l32.9%2056.9-98.6-56.9zm107.4%2053.4l-30.8-53.4h30.8v53.4zm0-62.8H95.2l-18.1-31.4%2054.3-31.4V228zm0-78.9l-54.3-31.4%2018.1-31.4h36.2v62.8zm0-72.1h-30.8l30.8-53.4V77zm76.4%2044.2l46.2-26.7-30.8%2053.4-15.4-26.7zm10%2036l-18.1%2031.4-54.3-31.4%2054.3-31.4%2018.1%2031.4zm-14.7-44.1l-15.4-26.7h61.6l-46.2%2026.7zM248.1%2077h-65.7l-32.8-56.9L248.1%2077zM140.8%2023.6L171.6%2077h-30.8V23.6zm0%2062.8H177l18.1%2031.4-54.3%2031.4V86.4zm0%2078.9l54.3%2031.4L177%20228h-36.2v-62.7zm0%2072.1h30.8l-30.8%2053.4v-53.4zm8.8%2056.9l32.8-56.9h65.7l-98.5%2056.9zm38.2-66.3l15.4-26.7%2046.2%2026.7h-61.6zm20.1-34.8l15.4-26.7%2030.8%2053.4-46.2-26.7zm53.7%2020.9l-32.9-56.9%2032.9-56.9v113.8z%22%20fill%3D%22url(%23SVGID_1_)%22%2F%3E%3Cpath%20class%3D%22st1%22%20d%3D%22M308.4%20202.7h64.2v5.8H315V257h52.2v6H315v49.9h-6.6zM383.8%20279.7c0-19%2015.2-34.4%2034.5-34.4s34.2%2015.4%2034.2%2034.4-14.9%2034.5-34.2%2034.5c-19.3%200-34.5-15.5-34.5-34.5m62.2%200c0-16.4-11.2-28.7-27.7-28.7s-28%2012.3-28%2028.7%2011.5%2028.9%2028%2028.9%2027.7-12.5%2027.7-28.9M469.9%20288.5v-41.7h6.3v40.7c0%2013.5%206.3%2021.1%2019%2021.1%2014.3%200%2024.3-9.6%2024.3-24.8v-37h6.3V313h-6.3l.2-14.6c-4.4%209.9-13.5%2016-25.1%2016-14.8%200-24.7-9.7-24.7-25.9M543%20246.8h6.3l-.2%2014.8c4.4-10%2013.6-16.2%2025.3-16.2%2014.8%200%2024.6%209.9%2024.6%2026.3V313h-6.3v-40.2c0-13.6-6.3-21.6-19.1-21.6-14.3%200-24.3%209.4-24.3%2024.8v37H543v-66.2zM616.3%20279.7c0-19.5%2013.8-34.4%2032.8-34.4%2013.5%200%2023.2%207.3%2028%2017.2v-66.6h6.3V313h-6.3l.3-16.5c-4.7%2010.2-15.6%2017.8-28.4%2017.8-18.9-.1-32.7-15.1-32.7-34.6m61.3%200c0-16.4-11-28.7-27.7-28.7-16.4%200-26.9%2012.3-26.9%2028.7s10.5%2028.9%2026.9%2028.9c16.7%200%2027.7-12.5%2027.7-28.9M748%20271.4c0-14.9-6.8-20.6-17.7-20.6-10.1%200-16.9%204.2-21.6%2011.4l-4.5-3.2c5.5-8.6%2014.9-13.6%2026.3-13.6%2013.6%200%2023.8%208.3%2023.8%2025.5v42.2H748l.3-10.2c-4.2%206.3-11.5%2011.5-22.9%2011.5-15.1%200-25-7-25-20.3%200-13.1%2011.5-19.3%2024.2-19.3H748v-3.4zm-22.6%208.5c-10.1%200-18.6%203.9-18.6%2013.9%200%2010.1%206.6%2014.8%2019.3%2014.8%2011%200%2021.9-6.5%2021.9-16.7v-12h-22.6zM782.5%20295.4v-43.3h-10.4v-5.4h10.4v-23.2h6.3v23.2h19.1v5.4h-19.1v43.1c0%209.7%203.4%2013.3%208.9%2013.3%205.8%200%208.1-2.3%2010.5-4.9l4.1%203.9c-3.2%203.7-7.1%206.6-14.6%206.6-8.4.1-15.2-5.2-15.2-18.7M829.5%20218.2c0-3.1%202.6-5.4%205.4-5.4%202.8%200%205.4%202.3%205.4%205.4%200%203.2-2.6%205.3-5.4%205.3-2.8.1-5.4-2-5.4-5.3m2.3%2028.6h6.3V313h-6.3v-66.2zM857.1%20279.7c0-19%2015.2-34.4%2034.5-34.4s34.2%2015.4%2034.2%2034.4-14.9%2034.5-34.2%2034.5c-19.2%200-34.5-15.5-34.5-34.5m62.3%200c0-16.4-11.2-28.7-27.7-28.7s-28%2012.3-28%2028.7%2011.5%2028.9%2028%2028.9%2027.7-12.5%2027.7-28.9M943.9%20246.8h6.3l-.2%2014.8c4.4-10%2013.6-16.2%2025.3-16.2%2014.8%200%2024.6%209.9%2024.6%2026.3V313h-6.3v-40.2c0-13.6-6.3-21.6-19.1-21.6-14.3%200-24.3%209.4-24.3%2024.8v37h-6.3v-66.2zM308.4%2073.1c0-41.4%2031.8-71.3%2071.7-71.3%2039.6%200%2071.5%2029.8%2071.5%2071.3%200%2041.4-31.9%2071.3-71.5%2071.3-39.9-.1-71.7-29.9-71.7-71.3m121%200c0-29.6-20.4-51.9-49.4-51.9s-49.6%2022.3-49.6%2051.9c0%2029.6%2020.6%2051.9%2049.6%2051.9%2029-.1%2049.4-22.3%2049.4-51.9M473.9%2056.8h20.8l-.6%2015.9c5.5-10.6%2015.7-17.8%2030.4-17.8%2022%200%2039.8%2018.6%2039.8%2044.5s-18%2044.9-40.2%2044.9c-14.3%200-24.5-6.9-29.4-16.5v58h-20.8v-129zm69.2%2042.6c0-15.5-9.4-26.1-24.3-26.1-15.1%200-24.9%2010.6-24.9%2026.1%200%2016.1%209.8%2026.7%2024.9%2026.7%2015%20.1%2024.3-10.5%2024.3-26.7M635%20127c11.2%200%2019.4-4.5%2024.3-9.2l12%2012.7c-8%208-19%2013.9-36.1%2013.9-29.4%200-48.4-19-48.4-44.7%200-25.5%2020-44.7%2045.7-44.7%2029.2%200%2045.7%2021.6%2044.3%2051.7h-69C610.3%20119%20619.3%20127%20635%20127m21.1-34.7c-1.8-11.6-9-20.2-23.3-20.2-13.3%200-22.5%207.3-24.9%2020.2h48.2zM699.7%2056.8h20.6l-.4%2015.9c5.3-11.2%2016.1-17.8%2029-17.8%2019%200%2032.1%2013.5%2032.1%2036.7v50.8h-20.6V93.3c0-12.3-5.7-19.4-17.8-19.4-13.5%200-22.3%208.2-22.3%2022v46.5h-20.6V56.8zM803.5%20120.9l17.6-10.8c4.9%208.8%2010.6%2014.9%2020.8%2014.9%2011.6%200%2019.2-5.5%2019.2-21.6V3.7h21.6v100c0%2027.6-16.5%2040.6-39.8%2040.6-20.6%200-32.8-10.6-39.4-23.4M904.9%20115.6l17.8-9.8c6.5%2010.8%2014.9%2019.4%2031.8%2019.4%2014.1%200%2024.1-7.6%2024.1-19%200-12-8.2-17.4-23.3-24.1l-9.2-4.1c-20.2-9-32.5-19.2-32.5-40.6%200-20.6%2015.9-35.3%2039-35.3C971%202%20983.5%209%20991.8%2023.9l-16.9%2010.4c-5.3-9.2-11.4-13.5-22.3-13.5-11%200-18%206.7-18%2016.1%200%2010.4%205.9%2015.1%2020%2021.2l9%204.1c23.7%2010.4%2036.3%2021.4%2036.3%2043.7%200%2024.3-19%2038.4-45.1%2038.4-26.3%200-42.2-13-49.9-28.7%22%2F%3E%3C%2Fsvg%3E loading=lazy width=300 height=94 alt="OpenJS Foundation Logo"> </a><a href=https://wallabyjs.com/ rel="external noopener" title="Mocha is sponsored by Wallaby"><figure id=wallaby-logo><img src=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgAQMAAACxAfVuAAAABlBMVEVHcExfsFB3ZBKQAAAAAXRSTlMAQObYZgAAACZJREFUSMftyKEBAAAIA6D9/7S2JbMJIklNRUoppXzOOUgppZTPuTULVyh+G8tFAAAAAElFTkSuQmCC loading=lazy alt="Wallaby logo"><figcaption>Wallaby</figcaption></figure></a></aside><footer><div id=copyright-notice><a rel=home href=https://mochajs.org/ >mochajs.org</a> is licensed under a <a rel="license external noopener" href=https://creativecommons.org/licenses/by/4.0/ >Creative Commons Attribution 4.0 International License</a>.<p>Copyright <a href=https://openjsf.org/ rel="external noopener">OpenJS Foundation</a> and Mocha contributors. All rights reserved. The <a href=https://openjsf.org/ rel="external noopener">OpenJS Foundation</a> has registered trademarks and uses trademarks. For a list of trademarks of the <a href=https://openjsf.org/ rel="external noopener">OpenJS Foundation</a>, please see our <a href=https://trademark-policy.openjsf.org/ rel="external noopener">Trademark Policy</a> and <a href=https://trademark-list.openjsf.org/ rel="external noopener">Trademark List</a>. Trademarks and logos not indicated on the <a href=https://trademark-list.openjsf.org/ rel="external noopener">list of OpenJS Foundation trademarks</a> are trademarks™ or registered® trademarks of their respective holders. Use of them does not imply any affiliation with or endorsement by them.</p></div><div id=external-links><ul id=openjsf-links><li><a href=https://openjsf.org/ rel="external noopener">The OpenJS Foundation</a></li><li><a href=https://terms-of-use.openjsf.org/ rel="external noopener">Terms of Use</a></li><li><a href=https://privacy-policy.openjsf.org/ rel="external noopener">Privacy Policy</a></li><li><a href=https://bylaws.openjsf.org/ rel="external noopener">OpenJS Foundation Bylaws</a></li><li><a href=https://trademark-policy.openjsf.org/ rel="external noopener">Trademark Policy</a></li><li><a href=https://trademark-list.openjsf.org/ rel="external noopener">Trademark List</a></li><li><a href=https://www.linuxfoundation.org/cookies/ rel="external noopener">Cookie Policy</a></li></ul><div class=netlify-badge><a href=https://www.netlify.com/><img src=https://www.netlify.com/img/global/badges/netlify-color-accent.svg loading=lazy></a></div></div><dl id=last-modified class=dl-inline><dt>Last updated</dt><dd><time itemprop=lastModified datetime=2021-11-15T00:12:03Z>Mon Nov 15 00:12:03 2021</time></dd></dl></footer></body></html>