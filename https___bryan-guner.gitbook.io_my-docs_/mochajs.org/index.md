[<embed src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20192%20191.99999%22%20width%3D%22192%22%20height%3D%22192%22%3E%3Cpath%20d%3D%22M169.47386%20143.90113l-68.70282%2039.69498c-2.958045%201.71756-6.584028%201.71756-9.542066%200L22.52614%20143.90113c-2.958038-1.71757-4.77103-4.86645-4.77103-8.20617V56.305021c0-3.435142%201.812992-6.488601%204.77103-8.206172L91.228974%208.403878c2.958038-1.717571%206.584021-1.717571%209.542056%200l68.70282%2039.694971c2.95804%201.717571%204.77104%204.866451%204.77104%208.206172v79.389939c-.0954%203.33972-1.90842%206.4886-4.77104%208.20617z%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%238d6748%22%20fill-rule%3D%22evenodd%22%2F%3E%3Cpath%20d%3D%22M95.904583%2022.049024c.954207%200%201.812992.286262%202.671781.763365l59.351606%2034.255996c1.62216.954206%202.67177%202.767198%202.67177%204.67561v68.511985c0%201.90842-1.04962%203.72141-2.67177%204.67562l-59.351606%2034.25599c-.858789.47711-1.717574.76336-2.671781.76336-.954206%200-1.908412-.28625-2.671777-.76336L33.881192%20134.9316c-1.62215-.95421-2.671778-2.7672-2.671778-4.67562V61.743995c0-1.908412%201.049628-3.721404%202.671778-4.67561l59.351614-34.255996c.858785-.477103%201.812992-.763365%202.671777-.763365m0-2.862618c-1.431309%200-2.862618.381683-4.103085%201.145048L32.449883%2054.58745c-2.576357%201.431309-4.103086%204.198506-4.103086%207.061124v68.511996c0%202.95803%201.526729%205.62981%204.103086%207.06112l59.351615%2034.25599c1.240467.76337%202.671776%201.14506%204.103085%201.14506%201.431309%200%202.862617-.38169%204.103097-1.14506l59.35159-34.25599c2.57636-1.43131%204.10309-4.1985%204.10309-7.06112V61.648574c0-2.958038-1.52673-5.629815-4.10309-7.061124l-59.35159-34.255996c-1.24048-.763365-2.671788-1.145048-4.103097-1.145048z%22%20fill%3D%22%23fff%22%2F%3E%3Cpath%20d%3D%22M104.3493%2061.648574c0-.477103-.381682-.954206-.954206-.954206H85.456021c-.477103%200-.954206.381682-.954206.954206%200%203.2443.477103%2014.40851%205.248133%2019.847485.190841.190841.381683.286262.667944.286262h8.01533c.286263%200%20.477104-.09542.667945-.286262%204.77103-5.343554%205.248133-16.507764%205.248133-19.847485zm-7.061124%2017.36655H91.65836c-.286262%200-.477103-.095421-.667944-.286263-3.2443-3.816824-3.625983-11.450472-3.721403-14.122249%200-.477103.381682-.954206.954206-.954206h12.595519c.477103%200%20.954206.381683.954206.954206%200%202.671777-.477103%2010.210005-3.721403%2014.12225-.286262.19084-.477103.286261-.763365.286261zM96.23855%2058.785956s3.43514-2.003833%201.335888-5.629816c-1.240468-1.908412-1.812992-3.530562-1.335889-4.198506-1.240468%201.52673-3.339721%203.14888-1.049627%206.584021.763365.858786%201.145048%202.671777%201.049627%203.2443zM92.421725%2059.072217s2.290094-1.335888.858785-3.816824c-.858785-1.240467-1.240467-2.385515-.858785-2.767197-.858785%201.049627-2.194674%202.099253-.667944%204.484768.477103.477103.667944%201.717571.667944%202.099253z%22%20fill%3D%22%23fff%22%2F%3E%3Cpath%20d%3D%22M100.246214%2070.141007c-.381682%202.576357-1.145047%205.534395-2.767197%207.442807-.190841.190841-.381682.286262-.572524.286262h-4.77103c-.190841%200-.477103-.09542-.572523-.286262-1.145048-1.431309-1.908412-3.33972-2.385515-5.343553%200%200%205.534394.763364%208.683274-.381683%202.290095-.858785%202.385515-1.71757%202.385515-1.71757z%22%20fill%3D%22%23fff%22%2F%3E%3Cg%20fill%3D%22%23fff%22%3E%3Cpath%20d%3D%22M37.554879%2085.599145h3.530562l5.820657%208.969536%205.820657-8.969536h3.530562v19.08412h-3.339721V91.03812l-6.011498%208.969537h-.09542L40.8946%2091.13354v13.645146h-3.339721V85.599145zM73.528446%20104.969527c-1.43131%200-2.767198-.286262-4.007665-.763365-1.240468-.477103-2.290095-1.240468-3.14888-2.099253-.858786-.858785-1.52673-1.908412-2.003833-3.14888-.477103-1.145047-.763365-2.480936-.763365-3.816824v-.09542c0-1.335889.286262-2.576357.763365-3.816825.477103-1.145047%201.145047-2.194674%202.099253-3.14888.858786-.858785%201.908412-1.62215%203.14888-2.099253%201.240468-.572523%202.576356-.763365%204.007665-.763365%201.43131%200%202.767198.286262%204.007666.763365%201.240468.477103%202.290094%201.240468%203.14888%202.099253.858785.858786%201.52673%201.908412%202.003832%203.14888.477103%201.145048.763365%202.480936.763365%203.816824v.095421c0%201.335888-.286262%202.576356-.763365%203.816824-.477103%201.145047-1.145047%202.194674-2.099253%203.14888-.858785.858785-1.908412%201.62215-3.14888%202.099253-1.240468.572524-2.576356.763365-4.007665.763365zm0-3.05346c.954206%200%201.812991-.19084%202.576356-.572523.763365-.381682%201.43131-.858785%202.003833-1.431309.572523-.572524.954206-1.335888%201.335888-2.099253.286262-.858786.477103-1.717571.477103-2.576356v-.095421c0-.954206-.190841-1.812991-.477103-2.671777-.286262-.858785-.763365-1.52673-1.335888-2.194674-.572524-.572523-1.240468-1.049626-2.003833-1.431309-.763365-.381682-1.62215-.572523-2.576356-.572523-.954206%200-1.812992.19084-2.576356.572523-.763365.381683-1.43131.858786-2.003833%201.43131-.572524.572523-.954206%201.335888-1.335888%202.099253-.286262.858785-.477104%201.71757-.477104%202.576356v.09542c0%20.954206.190842%201.812992.477104%202.671777.286261.858786.763364%201.52673%201.335888%202.194674.572524.572524%201.240468%201.049627%202.003833%201.43131.763364.381682%201.71757.572523%202.576356.572523zM99.67369%20104.969527c-1.431308%200-2.671776-.286262-3.816823-.763365-1.145048-.477103-2.194674-1.240468-3.05346-2.099253-.858785-.858785-1.52673-1.908412-2.003832-3.14888-.477103-1.240468-.763365-2.480936-.763365-3.816824v-.09542c0-1.335889.286262-2.671777.763365-3.816825.477103-1.145047%201.145047-2.194674%202.003832-3.14888.858786-.858785%201.908412-1.62215%203.14888-2.099253%201.240468-.477103%202.480936-.763365%204.007666-.763365.858785%200%201.62215.095421%202.385515.190842.763364.19084%201.335888.381682%202.003832.572523.572524.286262%201.145047.572524%201.62215.954206.477104.381683.954207.763365%201.43131%201.240468l-2.194674%202.480936c-.763365-.667945-1.52673-1.240468-2.385515-1.717571-.858786-.477103-1.812992-.667944-2.958039-.667944-.954206%200-1.71757.19084-2.480936.572523-.763364.381683-1.431309.858786-2.003832%201.43131-.572524.572523-.954206%201.335888-1.335889%202.099253-.286262.858785-.477103%201.71757-.477103%202.576356v.09542c0%20.954206.190841%201.812992.477103%202.671777.286262.858786.763365%201.52673%201.335889%202.194674.572523.572524%201.240468%201.145047%202.003832%201.43131.763365.28626%201.62215.572523%202.480936.572523%201.145047%200%202.194674-.190841%202.958039-.667944.763364-.477103%201.62215-1.049627%202.480935-1.812992l2.194674%202.194674c-.477103.572524-.954206.954206-1.52673%201.431309-.572523.477103-1.145047.763365-1.71757%201.049627-.572524.286261-1.335889.572523-2.003833.667944-.858785.190841-1.71757.190841-2.576356.190841zM114.177622%2085.599145h3.339721v7.91991h9.160378v-7.91991h3.339721v19.08412h-3.33972v-8.01533h-9.160379v8.01533h-3.33972v-19.08412zM144.807636%2085.503724h3.053459l8.397013%2019.179541h-3.530563l-1.908412-4.580189h-8.969536l-2.003833%204.58019h-3.435141l8.397013-19.179542zm4.77103%2011.641314l-3.2443-7.633649-3.244301%207.633649h6.4886z%22%2F%3E%3C%2Fg%3E%3Cpath%20fill%3D%22%23fff%22%20d%3D%22M35.169365%20110.69476h121.66127v1.049627H35.169365zM156.83062%2074.816618h-51.71797c0%20.381682-.0954.667943-.0954%201.049626h51.81338v-1.049626zM35.169364%2074.816618v1.049626h48.759928c0-.381683-.09542-.667944-.09542-1.049626H35.169365z%22%2F%3E%3C%2Fsvg%3E" id="mocha-logo" />](https://mochajs.org/)
================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================

*simple*, *flexible*, *fun*

Mocha is a feature-rich JavaScript test framework running on [Node.js](https://nodejs.org/) and in the browser, making asynchronous testing *simple* and *fun*. Mocha tests run serially, allowing for flexible and accurate reporting, while mapping uncaught exceptions to the correct test cases. Hosted on [GitHub](https://github.com/mochajs/mocha).

[<img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5OSIgaGVpZ2h0PSIyMCI+PGxpbmVhckdyYWRpZW50IGlkPSJiIiB4Mj0iMCIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2JiYiIgc3RvcC1vcGFjaXR5PSIuMSIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1vcGFjaXR5PSIuMSIvPjwvbGluZWFyR3JhZGllbnQ+PG1hc2sgaWQ9ImEiPjxyZWN0IHdpZHRoPSI5OSIgaGVpZ2h0PSIyMCIgcng9IjMiIGZpbGw9IiNmZmYiLz48L21hc2s+PGcgbWFzaz0idXJsKCNhKSI+PHBhdGggZmlsbD0iIzU1NSIgZD0iTTAgMGg0MHYyMEgweiIvPjxwYXRoIGZpbGw9IiM0NkJDOTkiIGQ9Ik00MCAwaDU5djIwSDQweiIvPjxwYXRoIGZpbGw9InVybCgjYikiIGQ9Ik0wIDBoOTl2MjBIMHoiLz48L2c+PGcgZmlsbD0iI2ZmZiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkRlamFWdSBTYW5zLFZlcmRhbmEsR2VuZXZhLHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiPjx0ZXh0IHg9IjIwIiB5PSIxNSIgZmlsbD0iIzAxMDEwMSIgZmlsbC1vcGFjaXR5PSIuMyI+Z2l0dGVyPC90ZXh0Pjx0ZXh0IHg9IjIwIiB5PSIxNCI+Z2l0dGVyPC90ZXh0Pjx0ZXh0IHg9IjY4LjUiIHk9IjE1IiBmaWxsPSIjMDEwMTAxIiBmaWxsLW9wYWNpdHk9Ii4zIj5qb2luIGNoYXQ8L3RleHQ+PHRleHQgeD0iNjguNSIgeT0iMTQiPmpvaW4gY2hhdDwvdGV4dD48L2c+PC9zdmc+" alt="Gitter" height="18" />](https://gitter.im/mochajs/mocha)[<img src="https://opencollective.com/mochajs/tiers/sponsors/badge.svg" alt="OpenCollective sponsors" height="18" />](#sponsors)[<img src="https://opencollective.com/mochajs/tiers/backers/badge.svg" alt="OpenCollective backers" height="18" />](#backers)

<a href="#sponsors" class="direct-link">#</a> Sponsors
------------------------------------------------------

Use Mocha at Work? Ask your manager or marketing team if they’d help [support](https://opencollective.com/mochajs#support) our project. Your company’s logo will also be displayed on [npmjs.com](http://npmjs.com/package/mocha) and our [GitHub repository](https://github.com/mochajs/mocha#sponsors).

-   [](https://localizejs.com/)

<a href="#backers" class="direct-link">#</a> Backers
----------------------------------------------------

Find Mocha helpful? Become a [backer](https://opencollective.com/mochajs#support) and support Mocha with a monthly donation.

-   [](https://www.principal.com/about-us)

-   [](https://www.codefirst.co.uk/)

-   [](https://securitygladiators.com/)

-   [](https://yannick.cr/)

-   [](https://www.firesticktricks.com/)

-   [](https://www.firestickhow.com/)

-   [](https://www.coinnewsspan.com/)

-   

-   [](https://thirdiron.com/)

-   [](https://penguincreek.com/)

-   [](https://top5hosting.co.uk/)

-   [](https://matterapp.com/)

-   [](https://github.com/daprahamian)

-   

-   [](https://topvet.net/)

-   [](https://francois.hodierne.net/)

-   [](https://klamp.in/)

-   [](https://medikoo.com/)

-   [](https://mattwelke.com/)

-   [](https://www.gavinmogan.com/)

-   [](https://solverfox.dev/)

-   [](https://www.quora.com/profile/Alexandre-Morgaut)

-   [](https://twitter.com/sheridanvk)

-   [](https://howtohosting.guide/)

-   [](https://6figr.com/)

-   [](https://uppsats.eu/)

-   [](https://sensorstechforum.com/)

-   [](https://www.scrapingbee.com/)

-   [](https://github.com/metabolize)

-   [](https://www.lambdatest.com/)

-   [](https://www.findswiftcodes.com/)

-   [](https://badassjs.com/)

-   [](https://www.vpsserver.com/)

-   [](https://www.hrank.com/)

-   [](https://www.scrapingdog.com/)

-   [](https://studyclerk.com/research-paper-writing)

-   [](https://gamblizard.com/deposit-bonuses/deposit-10-pound/)

-   [](https://proxycrawl.com/)

-   [](https://qiwu.ai/)

-   [](https://moneyarcher.com/de/)

-   [](https://wptheme.fr/theme-wordpress-divi/)

-   [](https://windowsvps.host/)

-   [](https://en.vpnwelt.com/)

-   [](https://www.mamafacts.com/)

-   [](https://crosswordking.com/)

-   [](https://www.screenrecorderreview.com/)

-   [](https://catspurfection.com/)

-   [](https://tripwire.com/)

-   [](https://vibrationsplatte-experten.com/)

-   [](https://www.dpcoupon.com/)

-   [](https://apnews.com/article/business-furniture-and-home-furnishings-manufacturing-corporate-news-household-product-manufacturing-industrial-products-and-services-2177fc8237a457d51e6bc72bb76bb2f1)

-   [](https://adaptjs.org/)

-   [](https://www.reachdigital.nl/)

-   [](https://www.vpntopp.no/hva-er-vpn/)

-   [](https://www.bystored.com/)

-   [](https://balsa.com/)

-   [](https://clouddevs.com/)

-   [](https://www.softwaredevelopment.co.uk/)

-   [](https://steelbro.com.ua/vorota-kiev.html)

-   [](https://infatica.io/)

-   [](https://www.seng.nu/bedste-kontinentalsenge/)

-   [](https://www.wp-kotisivut.com/)

-   [](https://www.realtimecommunicationsworld.com/)

-   [](https://www.vendsoft.com/)

-   [](https://seattletreeservicepros.com/)

-   [](https://pillarwm.com/)

-   [](https://www.maxfreebets.co.uk/)

-   [](https://windesol.fi/)

-   [](https://netinnopeustesti.com/)

-   [](https://www.reviewxl.com/)

-   [](https://messaged.com/)

-   [](https://blackjack77australia.com/)

-   [](https://www.coupons4printing.com/)

-   [](https://renkaatsopivasti.fi/)

-   [](https://veepn.com/)

-   [](https://aapeli.net/)

-   [](https://vpntesting.com/)

-   [](https://www.coupons4save.com/)

-   [](https://tommiaaltonen.fi/)

-   [](https://www.booklearnpass.co.uk/)

-   [](https://www.webhostingsecretrevealed.net/)

-   [](https://mingda.net/)

-   [](https://mobilemall.pk/)

-   [](https://hdclipartall.com/)

-   [](https://scantodigital.co.uk/)

-   [](https://immigration.sg/)

-   [](https://printdelivery.online/)

-   [](https://www.y-106.com/)

-   [](https://sugarbalanceherbalsupplement.com/)

-   [](https://theimagingprofessionals.co.uk/)

-   [](https://techreviewer.co/top-software-development-companies-for-startups)

-   [](https://reportedcalls.net/)

-   [](https://helppohinta.fi/)

-   [](https://www.qualityonesie.com/)

-   [](https://vpsdime.com/)

-   [](https://www.loadview-testing.com/products/jmeter-load-testing/)

-   [](https://www.dotcom-tools.com/china-firewall-test)

-   [](https://self-starters.com/)

-   [](https://www.123calendars.com/)

-   [](https://celltrackingapps.com/)

-   [](https://proscriptie.nl/)

-   [](https://analisilogica.com/)

-   [](https://tigillo.com/)

-   [](https://sumatosoft.com/services/business-analysis-services)

-   [](https://www.glassesonweb.com/)

-   [](https://www.targetedwebtraffic.com/buy/buy-mobile-traffic/)

-   [](https://blackjack77malaysia.com/)

-   [](https://airproxy.io/)

-   [](https://thefiresticktv.com/)

-   [](https://paddn.com/web-design-hong-kong/)

-   [](https://www.forexinthai.com/)

-   [](https://coupontoaster.com/)

-   [](https://dreamtechstore.com/)

-   

<a href="#features" class="direct-link">#</a> Features
------------------------------------------------------

-   [browser support](#running-mocha-in-the-browser)
-   [simple async support, including promises](#asynchronous-code)
-   [run Node.js tests in parallel](#parallel-tests)
-   [test coverage reporting](#wallabyjs)
-   [string diff support](#diffs)
-   [JavaScript API for running tests](#more-information)
-   [auto-detects and disables coloring for non-TTYs](#reporters)
-   [async test timeout support](#delayed-root-suite)
-   [test retry support](#retry-tests)
-   [test-specific timeouts](#test-level)
-   [Growl support](#desktop-notification-support)
-   [reports test durations](#test-duration)
-   [highlights slow tests](#dot-matrix)
-   [file watcher support](#min)
-   [global variable leak detection](#-check-leaks)
-   [optionally run tests that match a regexp](#-grep-regexp-g-regexp)
-   [auto-exit to prevent “hanging” with an active loop](#-exit)
-   [easily meta-generate suites](#markdown) & [test-cases](#list)
-   [config file support](#-config-path)
-   [node debugger support](#-inspect-inspect-brk-inspect)
-   [node native ES modules support](#nodejs-native-esm-support)
-   [source-map support](#-enable-source-maps)
-   [detects multiple calls to `done()`](#detects-multiple-calls-to-done)
-   [use any assertion library you want](#assertions)
-   [extensible reporting, bundled with 9+ reporters](#reporters)
-   [extensible test DSLs or “interfaces”](#interfaces)
-   [before, after, before each, after each hooks](#hooks)
-   [arbitrary transpiler support (coffee-script etc)](#-compilers)
-   [TextMate bundle](#textmate)

<a href="#table-of-contents" class="direct-link">#</a> Table of Contents
------------------------------------------------------------------------

-   [Installation](#installation)
-   [Getting Started](#getting-started)
-   [Run Cycle Overview](#run-cycle-overview)
-   [Detects Multiple Calls to `done()`](#detects-multiple-calls-to-done)
-   [Assertions](#assertions)
-   [Asynchronous Code](#asynchronous-code)
-   [Synchronous Code](#synchronous-code)
-   [Arrow Functions](#arrow-functions)
-   [Hooks](#hooks)
-   [Pending Tests](#pending-tests)
-   [Exclusive Tests](#exclusive-tests)
-   [Inclusive Tests](#inclusive-tests)
-   [Retry Tests](#retry-tests)
-   [Dynamically Generating Tests](#dynamically-generating-tests)
-   [Timeouts](#timeouts)
-   [Diffs](#diffs)
-   [Command-Line Usage](#command-line-usage)
-   [Parallel Tests](#parallel-tests)
-   [Root Hook Plugins](#root-hook-plugins)
-   [Global Fixtures](#global-fixtures)
-   [Test Fixture Decision-Tree Wizard Thing](#test-fixture-decision-tree-wizard-thing)
-   [Interfaces](#interfaces)
-   [Reporters](#reporters)
-   [Node.JS native ESM support](#nodejs-native-esm-support)
-   [Running Mocha in the Browser](#running-mocha-in-the-browser)
-   [Desktop Notification Support](#desktop-notification-support)
-   [Configuring Mocha (Node.js)](#configuring-mocha-nodejs)
-   [The `test/` Directory](#the-test-directory)
-   [Error Codes](#error-codes)
-   [Editor Plugins](#editor-plugins)
-   [Examples](#examples)
-   [Testing Mocha](#testing-mocha)
-   [More Information](#more-information)

<a href="#installation" class="direct-link">#</a> Installation
--------------------------------------------------------------

Install with [npm](https://npmjs.org/) globally:

    $ npm install --global mocha

or as a development dependency for your project:

    $ npm install --save-dev mocha

> As of v9.0.0, Mocha requires Node.js v12.0.0 or newer.

<a href="#getting-started" class="direct-link">#</a> Getting Started
--------------------------------------------------------------------

    $ npm install mocha
    $ mkdir test
    $ $EDITOR test/test.js # or open with your favorite editor

In your editor:

    var assert = require('assert');
    describe('Array', function() {
      describe('#indexOf()', function() {
        it('should return -1 when the value is not present', function() {
          assert.equal([1, 2, 3].indexOf(4), -1);
        });
      });
    });

Back in the terminal:

    $ ./node_modules/mocha/bin/mocha

      Array
        #indexOf()
          ✓ should return -1 when the value is not present


      1 passing (9ms)

Set up a test script in package.json:

    "scripts": {
      "test": "mocha"
    }

Then run tests with:

    $ npm test

<a href="#run-cycle-overview" class="direct-link">#</a> Run Cycle Overview
--------------------------------------------------------------------------

> Updated for v8.0.0.

The following is a mid-level outline of Mocha’s “flow of execution” when run in Node.js; the “less important” details have been omitted.

In a browser, test files are loaded by `<script>` tags, and calling `mocha.run()` begins at step 9 [below](#serial-mode).

### <a href="#serial-mode" class="direct-link">#</a> Serial Mode

1.  User (that’s you) executes `mocha`
2.  Loads options from config files, if present
3.  Mocha processes any command-line options provided (see section on [configuration merging](#merging) for details)
4.  If known flags for the `node` executable are found:
    1.  Mocha will spawn `node` in a child process, executing itself with these flags
    2.  Otherwise, Mocha does not spawn a child process
5.  Mocha loads modules specified by `--require`
    1.  If a file loaded this way contains known Mocha-specific exports (e.g., [root hook plugins](#root-hook-plugins)), Mocha “registers” these
    2.  If not, Mocha ignores any exports of a `--require`’d module
6.  Mocha validates any custom reporters or interfaces which were loaded via `--require` or otherwise
7.  Mocha *discovers* test files; when given no files or directories, it finds files with extensions `.js`, `.mjs` or `.cjs` in the `test` directory (but not its children), relative to the current working directory
8.  The (default) [bdd interface](#bdd) loads the test files *in no particular order*, which are given an interface-specific `global` context (this is how, e.g., `describe()` ends up as a global in a test file)
    1.  When a test file is loaded, Mocha executes all of its suites and finds–*but does not execute*–any hooks and tests therein.
    2.  Top-level hooks, tests and suites are all made members of an “invisible” *root suite*; there is only *one* root suite for the entire process
9.  Mocha runs [global setup fixtures](#global-setup-fixtures), if any
10. Starting with the “root” suite, Mocha executes:
11. Any “before all” hooks (for the *root* suite, this only happens once; see [root hook plugins](#root-hook-plugins))
12. For each test, Mocha executes:
    1.  Any “before each” hooks
    2.  The test (and reports the result)
    3.  Any “after each” hooks
13. If the current suite has a child suite, repeat the steps in 10. for each child suite; each child suite *inherits* any “before each” and “after each” hooks defined in its parent
14. Any “after all” hooks (for the *root* suite, this only happens once; see [root hook plugins](#root-hook-plugins))
15. Mocha prints a final summary/epilog, if applicable
16. Mocha runs [global teardown fixtures](#global-teardown-fixtures), if any

### <a href="#parallel-mode" class="direct-link">#</a> Parallel Mode

1.  Repeat steps 1 through 6 from [Serial Mode](#serial-mode) above, skipping reporter validation
2.  All test files found are put into a queue (they are *not* loaded by the main process)
3.  Mocha runs [global setup fixtures](#global-setup-fixtures), if any
4.  Mocha creates a pool of subprocesses (“workers”)
5.  *Immediately before* a worker runs the first test it receives, the worker “bootstraps” itself by:
    1.  Loading all `--require`’d modules
    2.  Registering any root hook plugins
    3.  *Ignoring* global fixtures and custom reporters
    4.  Asserting the built-in or custom interface is valid
6.  When a worker receives a test file to run, the worker creates a new Mocha instance *for the single test file*, and:
7.  The worker repeats step 8 from [above](#serial-mode)
8.  The worker repeats step 10 from [above](#serial-mode), with the caveat that the worker *does not* report test results directly; it holds them in a memory buffer
9.  When the worker completes the test file, buffered results are returned to the main process, which then gives them to the user-specified reporter (`spec` by default)
10. The worker makes itself available to the pool; the pool gives the worker another test file to run, if any remain
11. Mocha prints a final summary/epilog, if applicable
12. Mocha runs [global teardown fixtures](#global-teardown-fixtures), if any

<a href="#detects-multiple-calls-to-done" class="direct-link">#</a> Detects Multiple Calls to `done()`
------------------------------------------------------------------------------------------------------

If you use callback-based async tests, Mocha will throw an error if `done()` is called multiple times. This is handy for catching accidental double callbacks.

    it('double done', function(done) {
      // Calling `done()` twice is an error
      setImmediate(done);
      setImmediate(done);
    });

Running the above test will give you the below error message:

    $ ./node_modules/.bin/mocha mocha.test.js


      ✓ double done
      1) double done

      1 passing (6ms)
      1 failing

      1) double done:
         Error: done() called multiple times
          at Object.<anonymous> (mocha.test.js:1:63)
          at require (internal/module.js:11:18)
          at Array.forEach (<anonymous>)
          at startup (bootstrap_node.js:187:16)
          at bootstrap_node.js:608:3

<a href="#assertions" class="direct-link">#</a> Assertions
----------------------------------------------------------

Mocha allows you to use any assertion library you wish. In the above example, we’re using Node.js’ built-in [assert](https://nodejs.org/api/assert.html) module — but generally, if it throws an `Error`, it will work! This means you can use libraries such as:

-   [should.js](https://github.com/shouldjs/should.js) - BDD style shown throughout these docs
-   [expect.js](https://github.com/LearnBoost/expect.js) - `expect()` style assertions
-   [chai](https://www.chaijs.com/) - `expect()`, `assert()` and `should`-style assertions
-   [better-assert](https://github.com/visionmedia/better-assert) - C-style self-documenting `assert()`
-   [unexpected](https://unexpected.js.org/) - “the extensible BDD assertion toolkit”

<a href="#asynchronous-code" class="direct-link">#</a> Asynchronous Code
------------------------------------------------------------------------

By adding an argument (usually named `done`) to `it()` to a test callback, Mocha will know that it should wait for this function to be called to complete the test. This callback accepts both an `Error` instance (or subclass thereof) *or* a falsy value; anything else is invalid usage and throws an error (usually causing a failed test).

    describe('User', function() {
      describe('#save()', function() {
        it('should save without error', function(done) {
          var user = new User('Luna');
          user.save(function(err) {
            if (err) done(err);
            else done();
          });
        });
      });
    });

Alternatively, use the `done()` callback directly (which will handle an error argument, if it exists):

    describe('User', function() {
      describe('#save()', function() {
        it('should save without error', function(done) {
          var user = new User('Luna');
          user.save(done);
        });
      });
    });

### <a href="#working-with-promises" class="direct-link">#</a> Working with Promises

Alternately, instead of using the `done()` callback, you may return a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise). This is useful if the APIs you are testing return promises instead of taking callbacks:

    beforeEach(function() {
      return db.clear().then(function() {
        return db.save([tobi, loki, jane]);
      });
    });

    describe('#find()', function() {
      it('respond with matching records', function() {
        return db.find({type: 'User'}).should.eventually.have.length(3);
      });
    });

> The latter example uses [Chai as Promised](https://www.npmjs.com/package/chai-as-promised) for fluent promise assertions.

In Mocha v3.0.0 and newer, returning a `Promise` *and* calling `done()` will result in an exception, as this is generally a mistake:

    const assert = require('assert');

    // antipattern
    it('should complete this test', function(done) {
      return new Promise(function(resolve) {
        assert.ok(true);
        resolve();
      }).then(done);
    });

The above test will fail with `Error: Resolution method is overspecified. Specify a callback *or* return a Promise; not both.`. In versions older than v3.0.0, the call to `done()` is effectively ignored.

### <a href="#using-async-await" class="direct-link">#</a> Using async / await

If your JS environment supports [async / await](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Statements/async_function), you can also write asynchronous tests like this:

    beforeEach(async function() {
      await db.clear();
      await db.save([tobi, loki, jane]);
    });

    describe('#find()', function() {
      it('responds with matching records', async function() {
        const users = await db.find({type: 'User'});
        users.should.have.length(3);
      });
    });

<a href="#synchronous-code" class="direct-link">#</a> Synchronous Code
----------------------------------------------------------------------

When testing synchronous code, omit the callback and Mocha will automatically continue on to the next test.

    describe('Array', function() {
      describe('#indexOf()', function() {
        it('should return -1 when the value is not present', function() {
          [1, 2, 3].indexOf(5).should.equal(-1);
          [1, 2, 3].indexOf(0).should.equal(-1);
        });
      });
    });

<a href="#arrow-functions" class="direct-link">#</a> Arrow Functions
--------------------------------------------------------------------

Passing [arrow functions](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions) (aka “lambdas”) to Mocha is discouraged. Lambdas lexically bind `this` and cannot access the Mocha context. For example, the following code will fail:

    describe('my suite', () => {
      it('my test', () => {
        // should set the timeout of this test to 1000 ms; instead will fail
        this.timeout(1000);
        assert.ok(true);
      });
    });

*If you do not need to use* Mocha’s context, lambdas should work. Be aware that using lambdas will be more painful to refactor if the need eventually arises!

<a href="#hooks" class="direct-link">#</a> Hooks
------------------------------------------------

With its default “BDD”-style interface, Mocha provides the hooks `before()`, `after()`, `beforeEach()`, and `afterEach()`. These should be used to set up preconditions and clean up after your tests.

    describe('hooks', function() {
      before(function() {
        // runs once before the first test in this block
      });

      after(function() {
        // runs once after the last test in this block
      });

      beforeEach(function() {
        // runs before each test in this block
      });

      afterEach(function() {
        // runs after each test in this block
      });

      // test cases
    });

> Tests can appear before, after, or interspersed with your hooks. Hooks will run in the order they are defined, as appropriate; all `before()` hooks run (once), then any `beforeEach()` hooks, tests, any `afterEach()` hooks, and finally `after()` hooks (once).

### <a href="#describing-hooks" class="direct-link">#</a> Describing Hooks

Any hook can be invoked with an optional description, making it easier to pinpoint errors in your tests. If a hook is given a named function, that name will be used if no description is supplied.

    beforeEach(function() {
      // beforeEach hook
    });

    beforeEach(function namedFun() {
      // beforeEach:namedFun
    });

    beforeEach('some description', function() {
      // beforeEach:some description
    });

### <a href="#asynchronous-hooks" class="direct-link">#</a> Asynchronous Hooks

All hooks (`before()`, `after()`, `beforeEach()`, `afterEach()`) may be sync or async as well, behaving much like a regular test-case. For example, you may wish to populate database with dummy content before each test:

    describe('Connection', function() {
      var db = new Connection(),
        tobi = new User('tobi'),
        loki = new User('loki'),
        jane = new User('jane');

      beforeEach(function(done) {
        db.clear(function(err) {
          if (err) return done(err);
          db.save([tobi, loki, jane], done);
        });
      });

      describe('#find()', function() {
        it('respond with matching records', function(done) {
          db.find({type: 'User'}, function(err, res) {
            if (err) return done(err);
            res.should.have.length(3);
            done();
          });
        });
      });
    });

### <a href="#root-level-hooks" class="direct-link">#</a> Root-Level Hooks

A hook defined at the top scope of a test file (outside of a suite) is a *root hook*.

As of v8.0.0, [Root Hook Plugins](#root-hook-plugins) are the preferred mechanism for setting root hooks.

### <a href="#delayed-root-suite" class="direct-link">#</a> Delayed Root Suite

> *WARNING: Delayed root suites are incompatible with [parallel mode](#parallel-tests).*

If you need to perform asynchronous operations before any of your suites are run (e.g. for dynamically generating tests), you may delay the root suite. Run `mocha` with the `--delay` flag. This will attach a special callback function, `run()`, to the global context:

    const assert = require('assert');

    const fn = async x => { return new Promise(
      resolve => { setTimeout(resolve, 3000, 2 * x); }
    )};

    // instead of an IIFE, you can use 'setImmediate' or 'nextTick' or 'setTimeout'
    (async function() {
      const z = await fn(3);

      describe('my suite', function() {
          it(`expected value ${z}`, function() {
              assert.strictEqual(z, 6);
          });
      });

      run();
    })();

<a href="#pending-tests" class="direct-link">#</a> Pending Tests
----------------------------------------------------------------

“Pending” — as in “someone should write these test cases eventually” — test-cases are those *without* a callback:

    describe('Array', function() {
      describe('#indexOf()', function() {
        // pending test below
        it('should return -1 when the value is not present');
      });
    });

Pending tests will be included in the test results, and marked as pending. A pending test is not considered a failed test.

Read the [inclusive tests section](#inclusive-tests) for an example of conditionally marking a test as pending via `this.skip()`.

<a href="#exclusive-tests" class="direct-link">#</a> Exclusive Tests
--------------------------------------------------------------------

> *WARNING: Exclusive tests are incompatible with [parallel mode](#parallel-tests).*

The exclusivity feature allows you to run *only* the specified suite or test-case by appending `.only()` to the function. Here’s an example of executing only a particular suite:

    describe('Array', function() {
      describe.only('#indexOf()', function() {
        // ...
      });
    });

*Note*: All nested suites will still be executed.

Here’s an example of executing an individual test case:

    describe('Array', function() {
      describe('#indexOf()', function() {
        it.only('should return -1 unless present', function() {
          // ...
        });

        it('should return the index when present', function() {
          // ...
        });
      });
    });

Previous to v3.0.0, `.only()` used string matching to decide which tests to execute; this is no longer the case. In v3.0.0 or newer, `.only()` can be used multiple times to define a subset of tests to run:

    describe('Array', function() {
      describe('#indexOf()', function() {
        it.only('should return -1 unless present', function() {
          // this test will be run
        });

        it.only('should return the index when present', function() {
          // this test will also be run
        });

        it('should return -1 if called with a non-Array context', function() {
          // this test will not be run
        });
      });
    });

You may also choose multiple suites:

    describe('Array', function() {
      describe.only('#indexOf()', function() {
        it('should return -1 unless present', function() {
          // this test will be run
        });

        it('should return the index when present', function() {
          // this test will also be run
        });
      });

      describe.only('#concat()', function() {
        it('should return a new Array', function() {
          // this test will also be run
        });
      });

      describe('#slice()', function() {
        it('should return a new Array', function() {
          // this test will not be run
        });
      });
    });

But *tests will have precedence*:

    describe('Array', function() {
      describe.only('#indexOf()', function() {
        it.only('should return -1 unless present', function() {
          // this test will be run
        });

        it('should return the index when present', function() {
          // this test will not be run
        });
      });
    });

*Note*: Hooks, if present, will still be executed.

> Be mindful not to commit usages of `.only()` to version control, unless you really mean it! To do so one can run mocha with the option `--forbid-only` in the continuous integration test command (or in a git precommit hook).

<a href="#inclusive-tests" class="direct-link">#</a> Inclusive Tests
--------------------------------------------------------------------

This feature is the inverse of `.only()`. By appending `.skip()`, you may tell Mocha to ignore test case(s). Anything skipped will be marked as [pending](#pending-tests), and reported as such. Here’s an example of skipping an individual test:

    describe('Array', function() {
      describe('#indexOf()', function() {
        it.skip('should return -1 unless present', function() {
          // this test will not be run
        });

        it('should return the index when present', function() {
          // this test will be run
        });
      });
    });

You can also put `.skip()` on an entire suite. This is equivalent to appending `.skip()` onto all tests in the suite. Hooks in the suite are also skipped.

    describe('Array', function() {
      describe.skip('#indexOf()', function() {
        it('should return -1 unless present', function() {
          // this test will not be run
        });
      });
    });

*Note*: Code in skipped suites, that is placed outside of hooks or tests is still executed, as mocha will still invoke the suite function to build up the suite structure for visualization.

> *Best practice*: Use `.skip()` instead of commenting tests out.

You may also skip *at runtime* using `this.skip()`. If a test needs an environment or configuration which cannot be detected beforehand, a runtime skip is appropriate. For example:

    it('should only test in the correct environment', function() {
      if (/* check test environment */) {
        // make assertions
      } else {
        this.skip();
      }
    });

The above test will be reported as [pending](#pending-tests). It’s also important to note that calling `this.skip()` will effectively *abort* the test.

> *Best practice*: To avoid confusion, do not execute further instructions in a test or hook after calling `this.skip()`.

Contrast the above test with the following code:

    it('should only test in the correct environment', function() {
      if (/* check test environment */) {
        // make assertions
      } else {
        // do nothing
      }
    });

Because this test *does nothing*, it will be reported as *passing*.

> *Best practice*: Don’t do nothing! A test should make an assertion or use `this.skip()`.

To skip *multiple* tests in this manner, use `this.skip()` in a “before all” hook:

    before(function() {
      if (/* check test environment */) {
        // setup code
      } else {
        this.skip();
      }
    });

This will skip all `it`, `beforeEach/afterEach`, and `describe` blocks within the suite. `before/after` hooks are skipped unless they are defined at the same level as the hook containing `this.skip()`.

    describe('outer', function() {
      before(function() {
        this.skip();
      });

      after(function() {
        // will be executed
      });

      describe('inner', function() {
        before(function() {
          // will be skipped
        });

        after(function() {
          // will be skipped
        });
      });
    });

> *Updated in v7.0.0:* skipping a test within an “after all” hook is disallowed and will throw an exception. Use a return statement or other means to abort hook execution.

Before Mocha v3.0.0, `this.skip()` was not supported in asynchronous tests and hooks.

<a href="#retry-tests" class="direct-link">#</a> Retry Tests
------------------------------------------------------------

You can choose to retry failed tests up to a certain number of times. This feature is designed to handle end-to-end tests (functional tests/Selenium…) where resources cannot be easily mocked/stubbed. **It’s not recommended to use this feature for unit tests**.

This feature does re-run a failed test and its corresponding `beforeEach/afterEach` hooks, but not `before/after` hooks. `this.retries()` has no effect on failing hooks.

**NOTE**: Example below was written using Selenium webdriver (which [overwrites global Mocha hooks](https://github.com/SeleniumHQ/selenium/blob/c10e8a955883f004452cdde18096d70738397788/javascript/node/selenium-webdriver/testing/index.js) for `Promise` chain).

    describe('retries', function() {
      // Retry all tests in this suite up to 4 times
      this.retries(4);

      beforeEach(function() {
        browser.get('http://www.yahoo.com');
      });

      it('should succeed on the 3rd try', function() {
        // Specify this test to only retry up to 2 times
        this.retries(2);
        expect($('.foo').isDisplayed()).to.eventually.be.true;
      });
    });

<a href="#dynamically-generating-tests" class="direct-link">#</a> Dynamically Generating Tests
----------------------------------------------------------------------------------------------

Given Mocha’s use of function expressions to define suites and test cases, it’s straightforward to generate your tests dynamically. No special syntax is required — plain ol’ JavaScript can be used to achieve functionality similar to “parameterized” tests, which you may have seen in other frameworks.

Take the following example:

    const assert = require('assert');

    function add(args) {
      return args.reduce((prev, curr) => prev + curr, 0);
    }

    describe('add()', function() {
      const tests = [
        {args: [1, 2], expected: 3},
        {args: [1, 2, 3], expected: 6},
        {args: [1, 2, 3, 4], expected: 10}
      ];

      tests.forEach(({args, expected}) => {
        it(`correctly adds ${args.length} args`, function() {
          const res = add(args);
          assert.strictEqual(res, expected);
        });
      });
    });

The above code will produce a suite with three specs:

    $ mocha

      add()
        ✓ correctly adds 2 args
        ✓ correctly adds 3 args
        ✓ correctly adds 4 args

Tests added inside a `.forEach` handler often don’t play well with editor plugins, especially with “right-click run” features. Another way to parameterize tests is to generate them with a closure. This following example is equivalent to the one above:

    describe('add()', function() {
      const testAdd = ({args, expected}) =>
        function() {
          const res = add(args);
          assert.strictEqual(res, expected);
        };

      it('correctly adds 2 args', testAdd({args: [1, 2], expected: 3}));
      it('correctly adds 3 args', testAdd({args: [1, 2, 3], expected: 6}));
      it('correctly adds 4 args', testAdd({args: [1, 2, 3, 4], expected: 10}));
    });

With `top-level await` you can collect your test data in a dynamic and asynchronous way while the test file is being loaded.  
See also [`--delay`](#delayed-root-suite) for CommonJS modules without `top-level await`.

    // testfile.mjs
    import assert from 'assert';

    // top-level await: Node >= v14.8.0 with ESM test file
    const tests = await new Promise(resolve => {
      setTimeout(resolve, 5000, [
          {args: [1, 2], expected: 3},
          {args: [1, 2, 3], expected: 6},
          {args: [1, 2, 3, 4], expected: 10}
      ]);
    });

    // in suites ASYNCHRONOUS callbacks are NOT supported
    describe('add()', function() {
      tests.forEach(({args, expected}) => {
        it(`correctly adds ${args.length} args`, function() {
          const res = args.reduce((sum, curr) => sum + curr, 0);
          assert.strictEqual(res, expected);
        });
      });
    });

Test duration
-------------

Many reporters will display test duration and flag tests that are slow (default: 75ms), as shown here with the SPEC reporter:

<img src="https://mochajs.org/static/reporter-spec-duration.resize920,9999-withoutEnlargement.443e6919d1.png" alt="test duration" class="screenshot" />

There are three levels of test duration (depicted in the following image):

1.  FAST: Tests that run within half of the “slow” threshold will show the duration in green (if at all).
2.  NORMAL: Tests that run exceeding half of the threshold (but still within it) will show the duration in yellow.
3.  SLOW: Tests that run exceeding the threshold will show the duration in red.

<img src="data:image/png;base64,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" alt="test duration range" class="screenshot" />

To tweak what’s considered “slow”, you can use the `slow()` method:

    describe('something slow', function() {
      this.slow(300000); // five minutes

      it('should take long enough for me to go make a sandwich', function() {
        // ...
      });
    });

<a href="#timeouts" class="direct-link">#</a> Timeouts
------------------------------------------------------

### <a href="#suite-level" class="direct-link">#</a> Suite-level

Suite-level timeouts may be applied to entire test “suites”, or disabled via `this.timeout(0)`. This will be inherited by all nested suites and test-cases that do not override the value.

    describe('a suite of tests', function() {
      this.timeout(500);

      it('should take less than 500ms', function(done) {
        setTimeout(done, 300);
      });

      it('should take less than 500ms as well', function(done) {
        setTimeout(done, 250);
      });
    });

### <a href="#test-level" class="direct-link">#</a> Test-level

Test-specific timeouts may also be applied, or the use of `this.timeout(0)` to disable timeouts all together:

    it('should take less than 500ms', function(done) {
      this.timeout(500);
      setTimeout(done, 300);
    });

### <a href="#hook-level" class="direct-link">#</a> Hook-level

Hook-level timeouts may also be applied:

    describe('a suite of tests', function() {
      beforeEach(function(done) {
        this.timeout(3000); // A very long environment setup.
        setTimeout(done, 2500);
      });
    });

Again, use `this.timeout(0)` to disable the timeout for a hook.

> In v3.0.0 or newer, a parameter passed to `this.timeout()` greater than the [maximum delay value](https://developer.mozilla.org/docs/Web/API/WindowTimers/setTimeout#Maximum_delay_value) will cause the timeout to be disabled. In v8.0.0 or newer, `this.enableTimeouts()` has been removed. **Warning:** With async tests if you disable timeouts via `this.timeout(0)` and then do not call `done()`, your test will exit silently.

<a href="#diffs" class="direct-link">#</a> Diffs
------------------------------------------------

Mocha supports the `err.expected` and `err.actual` properties of any thrown `AssertionError`s from an assertion library. Mocha will attempt to display the difference between what was expected, and what the assertion actually saw. Here’s an example of a “string” diff using `--inline-diffs`:

<img src="https://mochajs.org/static/reporter-string-diffs.resize920,9999-withoutEnlargement.ddc0389bf2.png" alt="string diffs" class="screenshot" />

<a href="#command-line-usage" class="direct-link">#</a> Command-Line Usage
--------------------------------------------------------------------------

    mocha [spec..]

    Run tests with Mocha

    Commands
      mocha inspect [spec..]  Run tests with Mocha                         [default]
      mocha init <path>       create a client-side Mocha setup at <path>

    Rules & Behavior
          --allow-uncaught       Allow uncaught errors to propagate        [boolean]
      -A, --async-only           Require all tests to use a callback (async) or
                                 return a Promise                          [boolean]
      -b, --bail                 Abort ("bail") after first test failure   [boolean]
          --check-leaks          Check for global variable leaks           [boolean]
          --delay                Delay initial execution of root suite     [boolean]
          --dry-run              Report tests without executing them       [boolean]
          --exit                 Force Mocha to quit after tests complete  [boolean]
          --fail-zero            Fail test run if no test(s) encountered   [boolean]
          --forbid-only          Fail if exclusive test(s) encountered     [boolean]
          --forbid-pending       Fail if pending test(s) encountered       [boolean]
          --global, --globals    List of allowed global variables            [array]
      -j, --jobs                 Number of concurrent jobs for --parallel; use 1 to
                                 run in serial
                                       [number] [default: (number of CPU cores - 1)]
      -p, --parallel             Run tests in parallel                     [boolean]
          --retries              Retry failed tests this many times         [number]
      -s, --slow                 Specify "slow" test threshold (in milliseconds)
                                                              [string] [default: 75]
      -t, --timeout, --timeouts  Specify test timeout threshold (in milliseconds)
                                                            [string] [default: 2000]
      -u, --ui                   Specify user interface    [string] [default: "bdd"]

    Reporting & Output
      -c, --color, --colors                     Force-enable color output  [boolean]
          --diff                                Show diff on failure
                                                           [boolean] [default: true]
          --full-trace                          Display full stack traces  [boolean]
      -G, --growl                               Enable Growl notifications [boolean]
          --inline-diffs                        Display actual/expected differences
                                                inline within each string  [boolean]
      -R, --reporter                            Specify reporter to use
                                                          [string] [default: "spec"]
      -O, --reporter-option,                    Reporter-specific options
      --reporter-options                        (<k=v,[k1=v1,..]>)           [array]

    Configuration
          --config       Path to config file   [string] [default: (nearest rc file)]
      -n, --node-option  Node or V8 option (no leading "--")                 [array]
          --package      Path to package.json for config                    [string]

    File Handling
          --extension          File extension(s) to load
                                               [array] [default: ["js","cjs","mjs"]]
          --file               Specify file(s) to be loaded prior to root suite
                               execution                   [array] [default: (none)]
          --ignore, --exclude  Ignore file(s) or glob pattern(s)
                                                           [array] [default: (none)]
          --recursive          Look for tests in subdirectories            [boolean]
      -r, --require            Require module              [array] [default: (none)]
      -S, --sort               Sort test files                             [boolean]
      -w, --watch              Watch files in the current working directory for
                               changes                                     [boolean]
          --watch-files        List of paths or globs to watch               [array]
          --watch-ignore       List of paths or globs to exclude from watching
                                          [array] [default: ["node_modules",".git"]]

    Test Filters
      -f, --fgrep   Only run tests containing this string                   [string]
      -g, --grep    Only run tests matching this string or regexp           [string]
      -i, --invert  Inverts --grep and --fgrep matches                     [boolean]

    Positional Arguments
      spec  One or more files, directories, or globs to test
                                                         [array] [default: ["test"]]

    Other Options
      -h, --help             Show usage information & exit                 [boolean]
      -V, --version          Show version number & exit                    [boolean]
          --list-interfaces  List built-in user interfaces & exit          [boolean]
          --list-reporters   List built-in reporters & exit                [boolean]

    Mocha Resources
        Chat: https://gitter.im/mochajs/mocha
      GitHub: https://github.com/mochajs/mocha.git
        Docs: https://mochajs.org/

### <a href="#-allow-uncaught" class="direct-link">#</a> `--allow-uncaught`

By default, Mocha will attempt to trap uncaught exceptions thrown from running tests and report these as test failures. Use `--allow-uncaught` to disable this behavior and allow uncaught exceptions to propagate. Will typically cause the process to crash.

This flag is useful when debugging particularly difficult-to-track exceptions.

### <a href="#-async-only-a" class="direct-link">#</a> `--async-only, -A`

Enforce a rule that tests must be written in “async” style, meaning each test provides a `done` callback or returns a `Promise`. Non-compliant tests will be marked as failures.

### <a href="#-bail-b" class="direct-link">#</a> `--bail, -b`

Causes Mocha to stop running tests after the first test failure it encounters. Corresponding “after each” and “after all” hooks are executed for potential cleanup.

`--bail` does *not* imply `--exit`.

### <a href="#-check-leaks" class="direct-link">#</a> `--check-leaks`

Use this option to have Mocha check for global variables that are leaked while running tests. Specify globals that are acceptable via the `--global` option (for example: `--check-leaks --global jQuery --global MyLib`).

### <a href="#-compilers" class="direct-link">#</a> `--compilers`

> *`--compilers` was removed in v6.0.0. See [further explanation and workarounds](https://github.com/mochajs/mocha/wiki/compilers-deprecation).*

### <a href="#-dry-run" class="direct-link">#</a> `--dry-run`

> *New in v9.0.0* Report tests without executing any of them, neither tests nor hooks.

### <a href="#-exit" class="direct-link">#</a> `--exit`

> *Updated in v4.0.0.*

TL;DR: If your tests hang after an upgrade to Mocha v4.0.0 or newer, use `--exit` for a quick (though not necessarily recommended) fix.

*Prior to* version v4.0.0, *by default*, Mocha would force its own process to exit once it was finished executing all tests. This behavior enables a set of potential problems; it’s indicative of tests (or fixtures, harnesses, code under test, etc.) which don’t clean up after themselves properly. Ultimately, “dirty” tests can (but not always) lead to *false positive* or *false negative* results.

“Hanging” most often manifests itself if a server is still listening on a port, or a socket is still open, etc. It can also be something like a runaway `setInterval()`, or even an errant `Promise` that never fulfilled.

The *default behavior* in v4.0.0 (and newer) is `--no-exit`, where previously it was `--exit`.

**The easiest way to “fix” the issue is to pass `--exit` to the Mocha process.** It *can* be time-consuming to debug — because it’s not always obvious where the problem is — but it *is* recommended to do so.

To ensure your tests aren’t leaving messes around, here are some ideas to get started:

-   See the [Node.js guide to debugging](https://nodejs.org/en/docs/inspector/)
-   Use the new [`async_hooks`](https://github.com/nodejs/node/blob/master/doc/api/async_hooks.md) API ([example](https://git.io/vdlNM))
-   Try something like [wtfnode](https://npm.im/wtfnode)
-   Use [`.only`](#exclusive-tests) until you find the test that causes Mocha to hang

### <a href="#-fail-zero" class="direct-link">#</a> `--fail-zero`

> *New in v9.1.0* Fail test run if no tests are encountered with `exit-code: 1`.

### <a href="#-forbid-only" class="direct-link">#</a> `--forbid-only`

Enforce a rule that tests may not be exclusive (use of e.g., `describe.only()` or `it.only()` is disallowed).

`--forbid-only` causes Mocha to fail when an exclusive (“only’d”) test or suite is encountered, and it will abort further test execution.

### <a href="#-forbid-pending" class="direct-link">#</a> `--forbid-pending`

Enforce a rule that tests may not be skipped (use of e.g., `describe.skip()`, `it.skip()`, or `this.skip()` anywhere is disallowed).

`--forbid-pending` causes Mocha to fail when a skipped (“pending”) test or suite is encountered, and it will abort further test execution.

### <a href="#-global-variable-name" class="direct-link">#</a> `--global <variable-name>`

> *Updated in v6.0.0; the option is `--global` and `--globals` is now an alias.*

Define a global variable name. For example, suppose your app deliberately exposes a global named `app` and `YUI`, you may want to add `--global app --global YUI`.

`--global` accepts wildcards. You could do `--global '*bar'` and it would match `foobar`, `barbar`, etc. You can also pass in `'*'` to ignore all globals.

`--global` can accept a comma-delimited list; `--global app,YUI` is equivalent to `--global app --global YUI`.

By using this option in conjunction with `--check-leaks`, you can specify a whitelist of known global variables that you *expect* to leak into global scope.

### <a href="#-retries-n" class="direct-link">#</a> `--retries <n>`

Retries failed tests `n` times.

Mocha does not retry test failures by default.

### <a href="#-slow-ms-s-ms" class="direct-link">#</a> `--slow <ms>, -s <ms>`

Specify the “slow” test threshold in milliseconds. Mocha uses this to highlight test cases that are taking too long. “Slow” tests are not considered failures.

Note: A test that executes for *half* of the “slow” time will be highlighted *in yellow* with the default `spec` reporter; a test that executes for entire “slow” time will be highlighted *in red*.

### <a href="#-timeout-ms-t-ms" class="direct-link">#</a> `--timeout <ms>, -t <ms>`

> *Update in v6.0.0: `--timeout 0` is implied when invoking Mocha using inspect flags. `--timeout 99999999` is no longer needed.*

Specifies the test case timeout, defaulting to two (2) seconds (2000 milliseconds). Tests taking longer than this amount of time will be marked as failed.

To override you may pass the timeout in milliseconds, or a value with the `s` suffix, e.g., `--timeout 2s` and `--timeout 2000` are equivalent.

To disable timeouts, use `--timeout 0`.

Note: synchronous (blocking) tests are also bound by the timeout, but they will not complete until the code stops blocking. Infinite loops will still be infinite loops!

### <a href="#-ui-name-u-name" class="direct-link">#</a> `--ui <name>, -u <name>`

The `--ui` option lets you specify the interface to use, defaulting to `bdd`.

### <a href="#-color-c-colors" class="direct-link">#</a> `--color, -c, --colors`

> *Updated in v6.0.0. `--colors` is now an alias for `--color`.*

“Force” color output to be enabled, or alternatively force it to be disabled via `--no-color`. By default, Mocha uses the [supports-color](https://npm.im/supports-color) module to decide.

In some cases, color output will be explicitly suppressed by certain reporters outputting in a machine-readable format.

### <a href="#-diff" class="direct-link">#</a> `--diff`

When possible, show the difference between expected and actual values when an assertion failure is encountered.

This flag is unusual in that it **defaults to `true`**; use `--no-diff` to suppress Mocha’s own diff output.

Some assertion libraries will supply their own diffs, in which case Mocha’s will not be used, regardless of the default value.

Mocha’s own diff output does not conform to any known standards, and is designed to be human-readable.

### <a href="#-full-trace" class="direct-link">#</a> `--full-trace`

Enable “full” stack traces. By default, Mocha attempts to distill stack traces into less noisy (though still useful) output.

This flag is helpful when debugging a suspected issue within Mocha or Node.js itself.

### <a href="#-growl-g" class="direct-link">#</a> `--growl, -G`

Enable [Growl](http://growl.info/) (or OS-level notifications where available).

Requires extra software to be installed; see the [growl module’s docs](https://npm.im/growl) for more information.

### <a href="#-inline-diffs" class="direct-link">#</a> `--inline-diffs`

Enable “inline” diffs, an alternative output for diffing strings.

Useful when working with large strings.

Does nothing if an assertion library supplies its own diff output.

### <a href="#-reporter-name-r-name" class="direct-link">#</a> `--reporter <name>, -R <name>`

Specify the reporter that will be used, defaulting to `spec`.

Allows use of third-party reporters. For example, [mocha-lcov-reporter](https://npm.im/mocha-lcov-reporter) may be used with `--reporter mocha-lcov-reporter` after it has been installed.

### <a href="#-reporter-option-option-o-option-reporter-options-option" class="direct-link">#</a> `--reporter-option <option>, -O <option>, --reporter-options <option>`

> *Updated in v6.0.0. Can be specified multiple times. `--reporter-options` is now an alias for `--reporter-option`.*

Provide options specific to a reporter in `<key>=<value>` format, e.g., `--reporter tap --reporter-option tapVersion=13`.

Not all reporters accept options.

Can be specified as a comma-delimited list.

### <a href="#-config-path" class="direct-link">#</a> `--config <path>`

> *New in v6.0.0*

Specify an explicit path to a [configuration file](#configuring-mocha-nodejs).

By default, Mocha will search for a config file if `--config` is not specified; use `--no-config` to suppress this behavior.

### <a href="#-node-option-name-n-name" class="direct-link">#</a> `--node-option <name>, -n <name>`

> *New in v9.1.0*

For Node.js and V8 options. Mocha forwards these options to Node.js by spawning a new child-process.  
The options are set without leading dashes `--`, e.g. `-n require=foo -n unhandled-rejections=strict`

Can also be specified as a comma-delimited list: `-n require=foo,unhandled-rejections=strict`

### <a href="#-opts-path" class="direct-link">#</a> `--opts <path>`

> *Removed in v8.0.0. Please use [configuration file](#configuring-mocha-nodejs) instead.*

### <a href="#-package-path" class="direct-link">#</a> `--package <path>`

> *New in v6.0.0*

Specify an explicit path to a [`package.json` file](#configuring-mocha-nodejs) (ostensibly containing configuration in a `mocha` property).

By default, Mocha looks for a `package.json` in the current working directory or nearest ancestor, and will use the first file found (regardless of whether it contains a `mocha` property); to suppress `package.json` lookup, use `--no-package`.

### <a href="#-extension-ext" class="direct-link">#</a> `--extension <ext>`

Files having this extension will be considered test files. Defaults to `js`.

Specifying `--extension` will *remove* `.js` as a test file extension; use `--extension js` to re-add it. For example, to load `.mjs` and `.js` test files, you must supply `--extension mjs --extension js`.

The option can be given multiple times. The option accepts a comma-delimited list: `--extension a,b` is equivalent to `--extension a --extension b`.

> *New in v8.2.0*

`--extension` now supports multipart extensions (e.g., `spec.js`), leading dots (`.js`) and combinations thereof (`.spec.js`);

### <a href="#-file-filedirectoryglob" class="direct-link">#</a> `--file <file|directory|glob>`

> *WARNING: `--file` is incompatible with [parallel mode](#parallel-tests).*

Explicitly *include* a test file to be loaded before other test files. Multiple uses of `--file` are allowed, and will be loaded in order given.

Useful if you want to declare, for example, hooks to be run before every test across all other test files.

Files specified this way are not affected by `--sort` or `--recursive`.

Files specified in this way should contain one or more suites, tests or hooks. If this is not the case, consider `--require` instead.

### <a href="#-ignore-filedirectoryglob-exclude-filedirectoryglob" class="direct-link">#</a> `--ignore <file|directory|glob>, --exclude <file|directory|glob>,`

Explicitly ignore (exclude) one or more test files, directories or globs (e.g., `some/**/files*`) that would otherwise be loaded.

Files specified using `--file` *are not affected* by this option.

Can be specified multiple times.

### <a href="#-recursive" class="direct-link">#</a> `--recursive`

When looking for test files, recurse into subdirectories.

See `--extension` for defining which files are considered test files.

### <a href="#-require-module-r-module" class="direct-link">#</a> `--require <module>, -r <module>`

Require a module before loading the user interface or test files. This is useful for:

-   Test harnesses
-   Assertion libraries that augment built-ins or global scope (such as [should.js](https://npm.im/should))
-   Compilers such as Babel via [@babel/register](https://npm.im/@babel/register) or TypeScript via [ts-node](https://npm.im/ts-node) (using `--require ts-node/register`). See [Babel](https://github.com/mochajs/mocha-examples/tree/master/packages/babel) or [TypeScript](https://github.com/mochajs/mocha-examples/tree/master/packages/typescript) working examples.

Modules required in this manner are expected to do work synchronously; Mocha won’t wait for async tasks in a required module to finish.

**You cannot use `--require` to set hooks**. If you want to set hooks to run, e.g., before each test, use a [Root Hook Plugin](#root-hook-plugins).

> As of v8.0.0, Mocha supports `--require` for [NodeJS native ESM](#nodejs-native-esm-support). There is no separate `--import` flag.

### <a href="#-sort-s" class="direct-link">#</a> `--sort, -S`

> *WARNING: `--sort` is incompatible with [parallel mode](#parallel-tests).*

Sort test files (by absolute path) using [Array.prototype.sort](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort).

### <a href="#-watch-w" class="direct-link">#</a> `--watch, -w`

Rerun tests on file changes.

The `--watch-files` and `--watch-ignore` options can be used to control which files are watched for changes.

Tests may be rerun manually by typing ⓡ ⓢ ⏎ (same shortcut as `nodemon`).

### <a href="#-watch-files-filedirectoryglob" class="direct-link">#</a> `--watch-files <file|directory|glob>`

> *New in v7.0.0*

List of paths or globs to watch when `--watch` is set. If a file matching the given glob changes or is added or removed mocha will rerun all tests.

If the path is a directory all files and subdirectories will be watched.

By default all files in the current directory having one of the extensions provided by `--extension` and not contained in the `node_modules` or `.git` folders are watched.

The option can be given multiple times. The option accepts a comma-delimited list: `--watch-files a,b` is equivalent to `--watch-files a --watch-files b`

### <a href="#-watch-ignore-filedirectoryglob" class="direct-link">#</a> `--watch-ignore <file|directory|glob>`

> *New in v7.0.0*

List of paths or globs to exclude from watching. Defaults to `node_modules` and `.git`.

To exclude all files in a directory it is preferable to use `foo/bar` instead of `foo/bar/**/*`. The latter will still watch the directory `foo/bar` but will ignore all changes to the content of that directory.

The option can be given multiple times. The option accepts a comma-delimited list: `--watch-ignore a,b` is equivalent to `--watch-ignore a --watch-ignore b`

### <a href="#-fgrep-string-f-string" class="direct-link">#</a> `--fgrep <string>, -f <string>`

> *BREAKING CHANGE in v6.0.0; now mutually exclusive with `--grep`.*

Cause Mocha to only run tests having titles containing the given `string`.

Mutually exclusive with `--grep`.

### <a href="#-grep-regexp-g-regexp" class="direct-link">#</a> `--grep <regexp>, -g <regexp>`

> *BREAKING CHANGE in v6.0.0; now mutually exclusive with `--fgrep`.*

Cause Mocha to only run tests matching the given `regexp`, which is internally compiled to a [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Regexp).

Suppose, for example, you have “api” related tests, as well as “app” related tests, as shown in the following snippet; One could use `--grep api` or `--grep app` to run one or the other. The same goes for any other part of a suite or test-case title, `--grep users` would be valid as well, or even `--grep GET`.

And another option with double quotes: `--grep "groupA|groupB"`.  
And for more complex criterias: `--grep "/get/i"`. Some shells as e.g. Git-Bash-for-Windows may require: `--grep "'/get/i'"`. Using flags other than the `ignoreCase /i` (especially `/g` and `/y`) may lead to unpredictable results.

    describe('api', function() {
      describe('GET /api/users groupA', function() {
        it('respond with an array of users', function() {
          // ...
        });
      });
    });

    describe('app', function() {
      describe('GET /users groupB', function() {
        it('respond with an array of users', function() {
          // ...
        });
      });
    });

Mutually exclusive with `--fgrep`.

### <a href="#-invert" class="direct-link">#</a> `--invert`

Use the *inverse* of the match specified by `--grep` or `fgrep`.

Requires either `--grep` or `--fgrep` (but not both).

### <a href="#-inspect-inspect-brk-inspect" class="direct-link">#</a> `--inspect, --inspect-brk, inspect`

Enables Node.js’ inspector.

Use `--inspect` / `--inspect-brk` to launch the V8 inspector for use with Chrome Dev Tools.

Use `inspect` to launch Node.js’ internal debugger.

All of these options are mutually exclusive.

Implies `--timeout 0`.

### <a href="#-parallel-p" class="direct-link">#</a> `--parallel, -p`

> *New in v.8.0.0.*

Use the `--parallel` flag to run tests in a worker pool.

Each test file will be put into a queue and executed as workers become available.

**NOTICE**: `--parallel` has certain implications for Mocha’s behavior which you must be aware of. Read more about [running tests in parallel](#parallel-tests).

### <a href="#-jobs-count-j-count" class="direct-link">#</a> `--jobs <count>, -j <count>`

> *New in v.8.0.0.*

Use `--jobs <count>` to specify the *maximum* number of processes in the worker pool.

The default value is the *number of CPU cores* less 1.

Hint: Use `--jobs 0` or `--jobs 1` to temporarily disable `--parallel`.

Has no effect unless used with [`--parallel`](#-parallel-p).

### <a href="#about-option-types" class="direct-link">#</a> About Option Types

> *Updated in v6.0.0.*

Each flag annotated of type `[boolean]` in Mocha’s `--help` output can be *negated* by prepending `--no-` to the flag name. For example, `--no-color` will disable Mocha’s color output, which is enabled by default.

Unless otherwise noted, *all* boolean flags default to `false`.

### <a href="#about-node-flags" class="direct-link">#</a> About `node` Flags

The `mocha` executable supports all applicable flags which the `node` executable supports.

These flags vary depending on your version of Node.js.

`node` flags can be defined in Mocha’s [configuration](#configuring-mocha-nodejs).

> *New in v9.1.0* You can also pass `node` flags to Node.js using [`--node-option`](#-node-option-name-n-name).

### <a href="#-enable-source-maps" class="direct-link">#</a> `--enable-source-maps`

> *New in Node.js v12.12.0*

If the [`--enable-source-maps`](https://nodejs.org/dist/latest-v12.x/docs/api/cli.html#cli_enable_source_maps) flag is passed to mocha, source maps will be collected and used to provide accurate stack traces for transpiled code:

    Error: cool
        at Object.<anonymous> (/Users/fake-user/bigco/nodejs-tasks/build/src/index.js:27:7)
            -> /Users/fake-user/bigco/nodejs-tasks/src/index.ts:24:7

### <a href="#about-v8-flags" class="direct-link">#</a> About V8 Flags

Prepend `--v8-` to any flag listed in the output of `node --v8-options` (excluding `--v8-options` itself) to use it.

V8 flags can be defined in Mocha’s [configuration](#configuring-mocha-nodejs).

> *New in v9.1.0* You can also pass V8 flags (without `--v8-`) to Node.js using [`--node-option`](#-node-option-name-n-name).

<a href="#parallel-tests" class="direct-link">#</a> Parallel Tests
------------------------------------------------------------------

> *New in v.8.0.0.*

Depending on the number and nature of your tests, you may find a significant performance benefit when running tests in parallel (using the [`--parallel`](#-parallel-p) flag).

Parallel tests should work out-of-the box for many use cases. However, you must be aware of some important implications of the behavior.

> *Note: Authors of third-party libraries built on Mocha should read this!*

### <a href="#reporter-limitations" class="direct-link">#</a> Reporter Limitations

Due to the nature of the following reporters, they cannot work when running tests in parallel:

-   [`markdown`](#markdown)
-   [`progress`](#progress)
-   [`json-stream`](#json-stream)

These reporters expect Mocha to know *how many tests it plans to run* before execution. This information is unavailable in parallel mode, as test files are loaded only when they are about to be run.

In serial mode, tests results will “stream” as they occur. In parallel mode, reporter output is *buffered*; reporting will occur after each file is completed. In practice, the reporter output will appear in “chunks” (but will otherwise be identical). If a test file is particularly slow, there may be a significant pause while it’s running.

### <a href="#exclusive-tests-are-disallowed" class="direct-link">#</a> Exclusive Tests are Disallowed

**You cannot use `it.only`, `describe.only`, `this.only()`, etc., in parallel mode.** This is for the same reason as the incompatible reporters noted above: in parallel mode, Mocha does not load all files and suites into memory before running tests.

Suggested workarounds:

1.  Use [`--grep`](#-grep-regexp-g-regexp) or [`--fgrep`](http://localhost:8080/#-fgrep-string-f-string) instead; it’s not particularly efficient, but it will work.
2.  Don’t use parallel mode. Likely, you won’t be running very many exclusive tests, so you won’t see a great benefit from parallel mode anyhow.

> *TIP: If parallel mode is defined in your config file, you can temporarily disable it on the command-line by using either the `--no-parallel` flag or reducing the job count, e.g., `--jobs=0`.*

### <a href="#file-order-is-non-deterministic" class="direct-link">#</a> File Order is Non-Deterministic

In parallel mode, Mocha does not guarantee the order in which test files will run, nor which worker process runs them.

Because of this, the following options, which depend on order, *cannot be used* in parallel mode:

-   [`--file`](#-file-filedirectoryglob)
-   [`--sort`](#-sort-s)
-   [`--delay`](#delayed-root-suite)

### <a href="#test-duration-variability" class="direct-link">#</a> Test Duration Variability

Running tests in parallel mode will naturally use more system resources. The OS may take extra time to schedule and complete some operations, depending on system load. For this reason, the timeouts of *individual tests* may need to be increased either [globally](#-timeout-ms-t-ms) or [otherwise](#timeouts).

### <a href="#bail-is-best-effort" class="direct-link">#</a> “Bail” is “Best Effort”

When used with `--bail` (or `this.bail()`) to exit after the first failure, it’s likely other tests will be running at the same time. Mocha must shut down its worker processes before exiting.

Likewise, subprocesses may throw uncaught exceptions. When used with `--allow-uncaught`, Mocha will “bubble” this exception to the main process, but still must shut down its processes.

Either way, Mocha will abort the test run “very soon.”

### <a href="#root-hooks-are-not-global" class="direct-link">#</a> Root Hooks Are Not Global

> *NOTE: This only applies when running in parallel mode.*

A *root hook* is a hook in a test file which is *not defined* within a suite. An example using the `bdd` interface:

    // test/setup.js

    // root hook to run before every test (even in other files)
    beforeEach(function() {
      doMySetup();
    });

    // root hook to run after every test (even in other files)
    afterEach(function() {
      doMyTeardown();
    });

When run (in the default “serial” mode) via this command:

    mocha --file "./test/setup.js" "./test/**/*.spec.js"

`setup.js` will be executed *first*, and install the two hooks shown above for every test found in `./test/**/*.spec.js`.

**The above example does not work in parallel mode.**

When Mocha runs in parallel mode, **test files do not share the same process,** nor do they share the same instance of Mocha. Consequently, a hypothetical root hook defined in test file *A* **will not be present** in test file *B*.

Here are a couple suggested workarounds:

1.  `require('./setup.js')` or `import './setup.js'` at the top of every test file. Best avoided for those averse to boilerplate.
2.  *Recommended*: Define root hooks in a “required” file, using the new (also as of v8.0.0) [Root Hook Plugin](#root-hook-plugins) system.

If you need to run some code *once and only once*, use a [global fixture](#global-fixtures) instead.

### <a href="#no-browser-support" class="direct-link">#</a> No Browser Support

Parallel mode is only available in Node.js, for now.

### <a href="#limited-reporter-api-for-third-party-reporters" class="direct-link">#</a> Limited Reporter API for Third-Party Reporters

Third-party reporters may encounter issues when attempting to access non-existent properties within `Test`, `Suite`, and `Hook` objects. If a third-party reporter does not work in parallel mode (but otherwise works in serial mode), please [file an issue](https://github.com/mochajs/mocha/issues/new).

### <a href="#troubleshooting-parallel-mode" class="direct-link">#</a> Troubleshooting Parallel Mode

If you find your tests don’t work properly when run with [`--parallel`](#-parallel-p), either shrug and move on, or use this handy-dandy checklist to get things working:

-   ✅ Ensure you are using a [supported reporter](#reporter-limitations).
-   ✅ Ensure you are not using [other unsupported flags](#file-order-is-non-deterministic).
-   ✅ Double-check your [config file](#configuring-mocha-nodejs); options set in config files will be merged with any command-line option.
-   ✅ Look for root hooks (they look like [this](#root-hooks-are-not-global)) in your tests. Move them into a [Root Hook Plugin](#root-hook-plugins).
-   ✅ Do any assertion, mock, or other test libraries you’re consuming use root hooks? They may need to be [migrated](#migrating-a-library-to-use-root-hook-plugins) for compatibility with parallel mode.
-   ✅ If tests are unexpectedly timing out, you may need to increase the default test timeout (via [`--timeout`](#-timeout-ms-t-ms))
-   ✅ Ensure your tests do not depend on being run in a specific order.
-   ✅ Ensure your tests clean up after themselves; remove temp files, handles, sockets, etc. Don’t try to share state or resources between test files.

### <a href="#caveats-about-testing-in-parallel" class="direct-link">#</a> Caveats About Testing in Parallel

Some types of tests are *not* so well-suited to run in parallel. For example, extremely timing-sensitive tests, or tests which make I/O requests to a limited pool of resources (such as opening ports, or automating browser windows, hitting a test DB, or remote server, etc.).

Free-tier cloud CI services may not provide a suitable multi-core container or VM for their build agents. Regarding expected performance gains in CI: your mileage may vary. It may help to use a conditional in a `.mocharc.js` to check for `process.env.CI`, and adjust the job count as appropriate.

It’s unlikely (but not impossible) to see a performance gain from a [job count](#-jobs-count-j-count) *greater than* the number of available CPU cores. That said, *play around with the job count*–there’s no one-size-fits all, and the unique characteristics of your tests will determine the optimal number of jobs; it may even be that fewer is faster!

<a href="#root-hook-plugins" class="direct-link">#</a> Root Hook Plugins
------------------------------------------------------------------------

> *New in v8.0.0*

In some cases, you may want a [hook](#hooks) before (or after) every test in every file. These are called *root hooks*. Previous to v8.0.0, the way to accomplish this was to use `--file` combined with root hooks (see [example above](#root-hooks-are-not-global)). This still works in v8.0.0, but *not* when running tests in parallel mode! For that reason, running root hooks using this method is *strongly discouraged*, and may be deprecated in the future.

A *Root Hook Plugin* is a JavaScript file loaded via [`--require`](#-require-module-r-module) which “registers” one or more root hooks to be used across all test files.

In browsers you can set root hooks directly via a `rootHooks` object: `mocha.setup({ rootHooks: {beforeEach() {...}} })`, see [`mocha.setup()`](#running-mocha-in-the-browser)

### <a href="#defining-a-root-hook-plugin" class="direct-link">#</a> Defining a Root Hook Plugin

A Root Hook Plugin file is a script which exports (via `module.exports`) a `mochaHooks` property. It is loaded via `--require <file>`.

Here’s a simple example which defines a root hook, written using CJS and ESM syntax.

#### <a href="#with-commonjs" class="direct-link">#</a> With CommonJS

    // test/hooks.js

    exports.mochaHooks = {
      beforeEach(done) {
        // do something before every test
        done();
      }
    };

#### <a href="#with-es-modules" class="direct-link">#</a> With ES Modules

We’re using the `.mjs` extension in these examples.

> *Tip: If you’re having trouble getting ES modules to work, refer to [the Node.js documentation](https://nodejs.org/api/esm.html).*

    // test/hooks.mjs

    export const mochaHooks = {
      beforeEach(done) {
        // do something before every test
        done();
      }
    };

> *Note: Further examples will use ESM syntax.*

### <a href="#available-root-hooks" class="direct-link">#</a> Available Root Hooks

Root hooks work with any interface, but *the property names do not change*. In other words, if you are using the `tdd` interface, `suiteSetup` maps to `beforeAll`, and `setup` maps to `beforeEach`.

Available root hooks and their behavior:

-   `beforeAll`:
    -   In **serial** mode (Mocha’s default), *before all tests begin, once only*
    -   In **parallel** mode, run *before all tests begin, for each file*
-   `beforeEach`:
    -   In **both** modes, run *before each test*
-   `afterAll`:
    -   In **serial** mode, run *after all tests end, once only*
    -   In **parallel** mode, run *after all tests end, for each file*
-   `afterEach`:
    -   In **both** modes, run *after every test*

> *Tip: If you need to ensure code runs once and only once in any mode, use [global fixtures](#global-fixtures).*

As with other hooks, `this` refers to to the current context object:

    // test/hooks.mjs

    export const mochaHooks = {
      beforeAll() {
        // skip all tests for bob
        if (require('os').userInfo().username === 'bob') {
          return this.skip();
        }
      }
    };

### <a href="#multiple-root-hooks-in-a-single-plugin" class="direct-link">#</a> Multiple Root Hooks in a Single Plugin

Multiple root hooks can be defined in a single plugin, for organizational purposes. For example:

    // test/hooks.mjs

    export const mochaHooks = {
      beforeEach: [
        function(done) {
          // do something before every test,
          // then run the next hook in this array
        },
        async function() {
          // async or Promise-returning functions allowed
        }
      ]
    };

### <a href="#root-hook-plugins-can-export-a-function" class="direct-link">#</a> Root Hook Plugins Can Export a Function

If you need to perform some logic–such as choosing a root hook conditionally, based on the environment–`mochaHooks` can be a *function* which returns the expected object.

    // test/hooks.mjs

    export const mochaHooks = () => {
      if (process.env.CI) {
        // root hooks object
        return {
          beforeEach: [
            function() {
              // CI-specific beforeEach
            },
            function() {
              // some other CI-specific beforeEach
            }
          ]
        };
      }
      // root hooks object
      return {
        beforeEach() {
          // regular beforeEach
        }
      };
    };

If you need to perform an async operation, `mochaHooks` can be `Promise`-returning:

    // test/hooks.mjs

    export const mochaHooks = async () => {
      const result = await checkSomething();
      // only use a root hook if `result` is truthy
      if (result) {
        // root hooks object
        return {
          beforeEach() {
            // something
          }
        };
      }
    };

### <a href="#multiple-root-hook-plugins" class="direct-link">#</a> Multiple Root Hook Plugins

Multiple root hook plugins can be registered by using `--require` multiple times. For example, to register the root hooks in `hooks-a.js` and `hooks-b.js`, use `--require hooks-a.js --require hooks-b.js`. These will be registered (and run) *in order*.

### <a href="#migrating-tests-to-use-root-hook-plugins" class="direct-link">#</a> Migrating Tests to use Root Hook Plugins

To migrate your tests using root hooks to a root hook plugin:

1.  Find your root hooks (hooks defined *outside* of a suite–usually `describe()` callback).
2.  Create a new file, e.g., `test/hooks.js`.
3.  *Move* your root hooks into `test/hooks.js`.
4.  In `test/hooks.js`, make your hooks a member of an exported `mochaHooks` property.
5.  Use `--require test/hooks.js` (even better: use a [config file](#configuring-mocha-nodejs) with `{"require": "test/hooks.js"}`) when running your tests.

For example, given the following file, `test/test.spec.js`, containing root hooks:

    // test/test.spec.js

    beforeEach(function() {
      // global setup for all tests
    });

    after(function() {
      // one-time final cleanup
    });

    describe('my test suite', function() {
      it('should have run my global setup', function() {
        // make assertion
      });
    });

Your `test/hooks.js` (for this example, a CJS module) should contain:

    // test/hooks.js

    exports.mochaHooks = {
      beforeEach: function() {
        // global setup for all tests
      },
      afterAll: function() {
        // one-time final cleanup
      }
    };

> *NOTE: Careful! `after` becomes `afterAll` and `before` becomes `beforeAll`.*

Your original `test/test.spec.js` should now contain:

    // test/test.spec.js

    describe('my test suite', function() {
      it('should have run my global setup', function() {
        // make assertion
      });
    });

Running `mocha --require test/hooks.js test/test.spec.js` will run as before (and is now ready to be used with [`--parallel`](#-parallel-p)).

### <a href="#migrating-a-library-to-use-root-hook-plugins" class="direct-link">#</a> Migrating a Library to use Root Hook PLugins

If you’re a library maintainer, and your library uses root hooks, you can migrate by refactoring your entry point:

-   Your library should *always* export a [`mochaHooks` object](#defining-a-root-hook-plugin).
-   To maintain backwards compatibility, run your root hooks *if and only if* `global.beforeEach` (or other relevant hook) exists.
-   Instruct your users to `--require <your-package>` when running `mocha`.

<a href="#global-fixtures" class="direct-link">#</a> Global Fixtures
--------------------------------------------------------------------

> *New in v8.2.0*

At first glance, *global fixtures* seem similar to [root hooks](#root-hook-plugins). However, unlike root hooks, global fixtures:

1.  Are *guaranteed* to execute *once and only once*
2.  Work identically parallel mode, watch mode, and serial mode
3.  Do not share a context with tests, suites, or other hooks

There are two types of global fixtures: [global setup fixtures](#global-setup-fixtures) and [global teardown fixtures](#global-teardown-fixtures).

### <a href="#global-setup-fixtures" class="direct-link">#</a> Global Setup Fixtures

To create a global setup fixture, export `mochaGlobalSetup` from a script, e.g.,:

    // fixtures.cjs

    // can be async or not
    exports.mochaGlobalSetup = async function() {
      this.server = await startSomeServer({port: process.env.TEST_PORT});
      console.log(`server running on port ${this.server.port}`);
    };

…or an ES module:

    // fixtures.mjs

    // can be async or not
    export async function mochaGlobalSetup() {
      this.server = await startSomeServer({port: process.env.TEST_PORT});
      console.log(`server running on port ${this.server.port}`);
    }

To use it, load this file when running Mocha via `mocha --require fixtures.cjs` (or whatever you have named the file).

> Remember: you can define “requires” in a [configuration file](#configuring-mocha-nodejs).

Now, before Mocha loads and runs your tests, it will execute the above global setup fixture, starting a server for testing. This won’t shut *down* the server when Mocha is done, however! To do that, use a [*global teardown fixture*](#global-teardown-fixtures).

### <a href="#global-teardown-fixtures" class="direct-link">#</a> Global Teardown Fixtures

Just like a [global setup fixture](#global-setup-fixtures), a *global teardown fixture* can be created by exporting from a “required” script (we can put both types of fixtures in a single file):

    // fixtures.cjs, cont'd

    // can be async or not
    exports.mochaGlobalTeardown = async function() {
      await this.server.stop();
      console.log('server stopped!');
    };

…or an ES module:

    // fixtures.mjs, cont'd

    // can be async or not
    export async function mochaGlobalTeardown() {
      await this.server.stop();
      console.log('server stopped!');
    }

You’ll note that we used `this` in the fixture examples. Global setup fixtures and global teardown fixtures *share a context*, which means we can add properties to the context object (`this`) in the setup fixture, and reference them later in the teardown fixture. This is more useful when the fixtures are in separate files, since you can just use JS’ variable scoping rules instead ([example below](#when-not-to-use-global-fixtures)).

As explained [above](#global-fixtures)–and [below](#when-not-to-use-global-fixtures)–test files *do not* have access to this context object.

### <a href="#when-to-use-global-fixtures" class="direct-link">#</a> When To Use Global Fixtures

Global fixtures are good for spinning up a server, opening a socket, or otherwise creating a resource that your tests will repeatedly access via I/O.

### <a href="#when-not-to-use-global-fixtures" class="direct-link">#</a> When Not To Use Global Fixtures

If you need to access an in-memory value (such as a file handle or database connection), *don’t* use global fixtures to do this, because your tests will not have access to the value.

> You could be clever and try to get around this restriction by assigning something to the `global` object, but this will *not* work in parallel mode. It’s probably best to play by the rules!

Instead, use the global fixture to *start* the database, and use [root hook plugins](#root-hook-plugins) or plain ol’ [hooks](#hooks) to create a connection.

Here’s an example of using global fixtures and “before all” hooks to get the job done. Note that we do not reference the `server` object anywhere in our tests!

First, use a global fixture to start and stop a test server:

    // fixtures.mjs

    let server;

    export const mochaGlobalSetup = async () => {
      server = await startSomeServer({port: process.env.TEST_PORT});
      console.log(`server running on port ${server.port}`);
    };

    export const mochaGlobalTeardown = async () => {
      await server.stop();
      console.log('server stopped!');
    };

Then, connect to the server in your tests:

    // test.spec.mjs

    import {connect} from 'my-server-connector-thingy';

    describe('my API', function() {
      let connection;

      before(async function() {
        connection = await connect({port: process.env.TEST_PORT});
      });

      it('should be a nice API', function() {
        // assertions here
      });

      after(async function() {
        return connection.close();
      });
    });

Finally, use this command to bring it together: `mocha --require fixtures.mjs test.spec.mjs`.

<a href="#test-fixture-decision-tree-wizard-thing" class="direct-link">#</a> Test Fixture Decision-Tree Wizard Thing
--------------------------------------------------------------------------------------------------------------------

This flowchart will help you decide which of [hooks](#hooks), [root hook plugins](#root-hook-plugins) or [global fixtures](#global-fixtures) you should use.

My testsneed setup!Setup MUST runonce and only onceSetup MUST sharestate with testsYESUse Root Hooks andAvoid Parallel ModeUse Global FixturesShould setup affecttests across ALL files?Use Root HooksUse Plain HooksYESNONOYESNO

<a href="#interfaces" class="direct-link">#</a> Interfaces
----------------------------------------------------------

Mocha’s “interface” system allows developers to choose their style of DSL. Mocha has **BDD**, **TDD**, **Exports**, **QUnit** and **Require**-style interfaces.

### <a href="#bdd" class="direct-link">#</a> BDD

The **BDD** interface provides `describe()`, `context()`, `it()`, `specify()`, `before()`, `after()`, `beforeEach()`, and `afterEach()`.

`context()` is just an alias for `describe()`, and behaves the same way; it provides a way to keep tests easier to read and organized. Similarly, `specify()` is an alias for `it()`.

> All of the previous examples were written using the **BDD** interface.

    describe('Array', function() {
      before(function() {
        // ...
      });

      describe('#indexOf()', function() {
        context('when not present', function() {
          it('should not throw an error', function() {
            (function() {
              [1, 2, 3].indexOf(4);
            }.should.not.throw());
          });
          it('should return -1', function() {
            [1, 2, 3].indexOf(4).should.equal(-1);
          });
        });
        context('when present', function() {
          it('should return the index where the element first appears in the array', function() {
            [1, 2, 3].indexOf(3).should.equal(2);
          });
        });
      });
    });

### <a href="#tdd" class="direct-link">#</a> TDD

The **TDD** interface provides `suite()`, `test()`, `suiteSetup()`, `suiteTeardown()`, `setup()`, and `teardown()`:

    suite('Array', function() {
      setup(function() {
        // ...
      });

      suite('#indexOf()', function() {
        test('should return -1 when not present', function() {
          assert.equal(-1, [1, 2, 3].indexOf(4));
        });
      });
    });

### <a href="#exports" class="direct-link">#</a> Exports

The **Exports** interface is much like Mocha’s predecessor [expresso](https://github.com/tj/expresso). The keys `before`, `after`, `beforeEach`, and `afterEach` are special-cased, object values are suites, and function values are test-cases:

    module.exports = {
      before: function() {
        // ...
      },

      Array: {
        '#indexOf()': {
          'should return -1 when not present': function() {
            [1, 2, 3].indexOf(4).should.equal(-1);
          }
        }
      }
    };

### <a href="#qunit" class="direct-link">#</a> QUnit

The [QUnit](https://qunitjs.com/)-inspired interface matches the “flat” look of QUnit, where the test suite title is defined *before* the test-cases. Like TDD, it uses `suite()` and `test()`, but resembling BDD, it also contains `before()`, `after()`, `beforeEach()`, and `afterEach()`.

    function ok(expr, msg) {
      if (!expr) throw new Error(msg);
    }

    suite('Array');

    test('#length', function() {
      var arr = [1, 2, 3];
      ok(arr.length == 3);
    });

    test('#indexOf()', function() {
      var arr = [1, 2, 3];
      ok(arr.indexOf(1) == 0);
      ok(arr.indexOf(2) == 1);
      ok(arr.indexOf(3) == 2);
    });

    suite('String');

    test('#length', function() {
      ok('foo'.length == 3);
    });

### <a href="#require" class="direct-link">#</a> Require

The `require` interface allows you to require the `describe` and friend words directly using `require` and call them whatever you want. This interface is also useful if you want to avoid global variables in your tests.

*Note*: The `require` interface cannot be run via the `node` executable, and must be run via `mocha`.

    var testCase = require('mocha').describe;
    var pre = require('mocha').before;
    var assertions = require('mocha').it;
    var assert = require('chai').assert;

    testCase('Array', function() {
      pre(function() {
        // ...
      });

      testCase('#indexOf()', function() {
        assertions('should return -1 when not present', function() {
          assert.equal([1, 2, 3].indexOf(4), -1);
        });
      });
    });

<a href="#reporters" class="direct-link">#</a> Reporters
--------------------------------------------------------

Mocha reporters adjust to the terminal window, and always disable ANSI-escape coloring when the stdio streams are not associated with a TTY.

### <a href="#spec" class="direct-link">#</a> Spec

Alias: `Spec`, `spec`

This is the default reporter. The Spec reporter outputs a hierarchical view nested just as the test cases are.

<img src="https://mochajs.org/static/reporter-spec.resize920,9999-withoutEnlargement.736b9ec065.png" alt="spec reporter" class="screenshot" /> <img src="https://mochajs.org/static/reporter-spec-fail.resize920,9999-withoutEnlargement.a250c17c68.png" alt="spec reporter with failure" class="screenshot" />

### <a href="#dot-matrix" class="direct-link">#</a> Dot Matrix

Alias: `Dot`, `dot`

The Dot Matrix reporter is a series of characters which represent test cases. Failures highlight in red exclamation marks (`!`), pending tests with a blue comma (`,`), and slow tests as yellow. Good if you prefer minimal output.

<img src="data:image/png;base64,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" alt="dot matrix reporter" class="screenshot" />

### <a href="#nyan" class="direct-link">#</a> Nyan

Alias: `Nyan`, `nyan`

The Nyan reporter is exactly what you might expect:

<img src="https://mochajs.org/static/reporter-nyan.resize920,9999-withoutEnlargement.12fdb2c640.png" alt="js nyan cat reporter" class="screenshot" />

### <a href="#tap" class="direct-link">#</a> TAP

Alias: `TAP`, `tap`

The TAP reporter emits lines for a [Test-Anything-Protocol](https://en.wikipedia.org/wiki/Test_Anything_Protocol) consumer.

<img src="https://mochajs.org/static/reporter-tap.resize920,9999-withoutEnlargement.932e42e1af.png" alt="test anything protocol" class="screenshot" />

### <a href="#landing-strip" class="direct-link">#</a> Landing Strip

Alias: `Landing`, `landing`

The Landing Strip reporter is a gimmicky test reporter simulating a plane landing 😃 unicode ftw

<img src="https://mochajs.org/static/reporter-landing.resize920,9999-withoutEnlargement.65f6947354.png" alt="landing strip plane reporter" class="screenshot" /> <img src="https://mochajs.org/static/reporter-landing-fail.resize920,9999-withoutEnlargement.62645a8ebc.png" alt="landing strip with failure" class="screenshot" />

### <a href="#list" class="direct-link">#</a> List

Alias: `List`, `list`

The List reporter outputs a simple specifications list as test cases pass or fail, outputting the failure details at the bottom of the output.

<img src="https://mochajs.org/static/reporter-list.resize920,9999-withoutEnlargement.3ddcf5af45.png" alt="list reporter" class="screenshot" />

### <a href="#progress" class="direct-link">#</a> Progress

Alias: `Progress`, `progress`

The Progress reporter implements a simple progress-bar:

<img src="https://mochajs.org/static/reporter-progress.resize920,9999-withoutEnlargement.a3a1f02a83.png" alt="progress bar" class="screenshot" />

### <a href="#json" class="direct-link">#</a> JSON

Alias: `JSON`, `json`

The JSON reporter outputs a single large JSON object when the tests have completed (failures or not).

By default, it will output to the console. To write directly to a file, use `--reporter-option output=filename.json`.

<img src="https://mochajs.org/static/reporter-json.resize920,9999-withoutEnlargement.798b1af091.png" alt="json reporter" class="screenshot" />

### <a href="#json-stream" class="direct-link">#</a> JSON Stream

Alias: `JSONStream`, `json-stream`

The JSON Stream reporter outputs newline-delimited JSON “events” as they occur, beginning with a “start” event, followed by test passes or failures, and then the final “end” event.

<img src="https://mochajs.org/static/reporter-json-stream.resize920,9999-withoutEnlargement.6eaef00a29.png" alt="json stream reporter" class="screenshot" />

### <a href="#min" class="direct-link">#</a> Min

Alias: `Min`, `min`

The Min reporter displays the summary only, while still outputting errors on failure. This reporter works great with `--watch` as it clears the terminal in order to keep your test summary at the top.

<img src="https://mochajs.org/static/reporter-min.resize920,9999-withoutEnlargement.c85a034dae.png" alt="min reporter" class="screenshot" />

### <a href="#doc" class="direct-link">#</a> Doc

Alias: `Doc`, `doc`

The Doc reporter outputs a hierarchical HTML body representation of your tests. Wrap it with a header, footer, and some styling, then you have some fantastic documentation!

<img src="https://mochajs.org/static/reporter-doc.resize920,9999-withoutEnlargement.f56aab77df.png" alt="doc reporter" class="screenshot" />

For example, suppose you have the following JavaScript:

    describe('Array', function() {
      describe('#indexOf()', function() {
        it('should return -1 when the value is not present', function() {
          [1, 2, 3].indexOf(5).should.equal(-1);
          [1, 2, 3].indexOf(0).should.equal(-1);
        });
      });
    });

The command `mocha --reporter doc array` would yield:

    <section class="suite">
      <h1>Array</h1>
      <dl>
        <section class="suite">
          <h1>#indexOf()</h1>
          <dl>
            <dt>should return -1 when the value is not present</dt>
            <dd>
              <pre><code>[1,2,3].indexOf(5).should.equal(-1);
    [1,2,3].indexOf(0).should.equal(-1);</code></pre>
            </dd>
          </dl>
        </section>
      </dl>
    </section>

The SuperAgent request library [test documentation](https://visionmedia.github.io/superagent/docs/test.html) was generated with Mocha’s doc reporter using this Bash command:

    $ mocha --reporter=doc | cat docs/head.html - docs/tail.html > docs/test.html

View SuperAgent’s [Makefile](https://github.com/visionmedia/superagent/blob/master/Makefile) for reference.

### <a href="#markdown" class="direct-link">#</a> Markdown

Alias: `Markdown`, `markdown`

The Markdown reporter generates a markdown TOC and body for your test suite. This is great if you want to use the tests as documentation within a Github wiki page, or a markdown file in the repository that Github can render. For example, here is the Connect [test output](https://github.com/senchalabs/connect/blob/90a725343c2945aaee637e799b1cd11e065b2bff/tests.md).

### <a href="#xunit" class="direct-link">#</a> XUnit

Alias: `XUnit`, `xunit`

The XUnit reporter is also available. It outputs an XUnit-compatible XML document, often applicable in CI servers.

By default, it will output to the console. To write directly to a file, use `--reporter-option output=filename.xml`.

To specify custom report title, use `--reporter-option suiteName="Custom name"`.

### <a href="#third-party-reporters" class="direct-link">#</a> Third-Party Reporters

Mocha allows you to define custom reporters. For more information see the [wiki](https://github.com/mochajs/mocha/wiki/Third-party-reporters).

Examples:

-   the [TeamCity reporter](https://github.com/travisjeffery/mocha-teamcity-reporter)
-   our [working example](https://github.com/mochajs/mocha-examples/tree/master/packages/third-party-reporter)

### <a href="#html-reporter" class="direct-link">#</a> HTML Reporter

Alias: `HTML`, `html`

**The HTML reporter is not intended for use on the command-line.**

<a href="#nodejs-native-esm-support" class="direct-link">#</a> Node.JS native ESM support
-----------------------------------------------------------------------------------------

> *New in v7.1.0*

Mocha supports writing your tests as ES modules, and not just using CommonJS. For example:

    // test.mjs
    import {add} from './add.mjs';
    import assert from 'assert';

    it('should add to numbers from an es module', () => {
      assert.equal(add(3, 5), 8);
    });

To enable this you don’t need to do anything special. Write your test file as an ES module. In Node.js this means either ending the file with a `.mjs` extension, or, if you want to use the regular `.js` extension, by adding `"type": "module"` to your `package.json`. More information can be found in the [Node.js documentation](https://nodejs.org/api/esm.html).

### <a href="#current-limitations" class="direct-link">#</a> Current Limitations

-   [Watch mode](#-watch-w) does not support ES Module test files
-   [Custom reporters](#third-party-reporters) and [custom interfaces](#interfaces) can only be CommonJS files
-   [Configuration file](#configuring-mocha-nodejs) can only be a CommonJS file (`.mocharc.js` or `.mocharc.cjs`)
-   When using module-level mocks via libs like `proxyquire`, `rewiremock` or `rewire`, hold off on using ES modules for your test files. You can switch to using `testdouble`, which does support ESM.

<a href="#running-mocha-in-the-browser" class="direct-link">#</a> Running Mocha in the Browser
----------------------------------------------------------------------------------------------

Mocha runs in the browser. Every release of Mocha will have new builds of `./mocha.js` and `./mocha.css` for use in the browser.

A typical setup might look something like the following, where we call `mocha.setup('bdd')` to use the **BDD** interface before loading the test scripts, running them `onload` with `mocha.run()`.

    <!DOCTYPE html>
    <html lang="en">
      <head>
        <meta charset="utf-8" />
        <title>Mocha Tests</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="https://unpkg.com/mocha/mocha.css" />
      </head>
      <body>
        <div id="mocha"></div>

        <script src="https://unpkg.com/chai/chai.js"></script>
        <script src="https://unpkg.com/mocha/mocha.js"></script>

        <script class="mocha-init">
          mocha.setup('bdd');
          mocha.checkLeaks();
        </script>
        <script src="test.array.js"></script>
        <script src="test.object.js"></script>
        <script src="test.xhr.js"></script>
        <script class="mocha-exec">
          mocha.run();
        </script>
      </body>
    </html>

### <a href="#grep" class="direct-link">#</a> Grep

The browser may use the `--grep` as functionality. Append a query-string to your URL: `?grep=api`.

### <a href="#browser-configuration" class="direct-link">#</a> Browser Configuration

Mocha options can be set via `mocha.setup()`. Examples:

    // Use "tdd" interface.  This is a shortcut to setting the interface;
    // any other options must be passed via an object.
    mocha.setup('tdd');

    // This is equivalent to the above.
    mocha.setup({
      ui: 'tdd'
    });

    // Examples of options:
    mocha.setup({
      allowUncaught: true,
      asyncOnly: true,
      bail: true,
      checkLeaks: true,
      dryRun: true,
      failZero: true,
      forbidOnly: true,
      forbidPending: true,
      global: ['MyLib'],
      retries: 3,
      rootHooks: { beforeEach(done) { ... done();} },
      slow: '100',
      timeout: '2000',
      ui: 'bdd'
    });

### <a href="#browser-specific-options" class="direct-link">#</a> Browser-specific Option(s)

Browser Mocha supports many, but not all [cli options](#command-line-usage). To use a [cli option](#command-line-usage) that contains a “-”, please convert the option to camel-case, (eg. `check-leaks` to `checkLeaks`).

#### <a href="#options-that-differ-slightly-from-cli-options" class="direct-link">#</a> Options that differ slightly from [cli options](#command-line-usage):

`reporter` *{string|constructor}* You can pass a reporter’s name or a custom reporter’s constructor. You can find **recommended** reporters for the browser [here](#reporting). It is possible to use [built-in reporters](#reporters) as well. Their employment in browsers is neither recommended nor supported, open the console to see the test results.

#### <a href="#options-that-only-function-in-browser-context" class="direct-link">#</a> Options that *only* function in browser context:

`noHighlighting` *{boolean}* If set to `true`, do not attempt to use syntax highlighting on output test code.

### <a href="#reporting" class="direct-link">#</a> Reporting

The HTML reporter is the default reporter when running Mocha in the browser. It looks like this:

<img src="https://mochajs.org/static/reporter-html.resize920,9999-withoutEnlargement.d3a2bf90fa.png" alt="HTML test reporter" class="screenshot" />

[Mochawesome](https://npm.im/mochawesome) is a great alternative to the default HTML reporter.

<a href="#desktop-notification-support" class="direct-link">#</a> Desktop Notification Support
----------------------------------------------------------------------------------------------

Desktop notifications allow asynchronous communication of events without forcing you to react to a notification immediately. Their appearance and specific functionality vary across platforms. They typically disappear automatically after a short delay, but their content is often stored in some manner that allows you to access past notifications.

[Growl](http://growl.info/) was an early notification system implementation for OS X and Windows, hence, the name of Mocha’s `--growl` option.

Once enabled, when your root suite completes test execution, a desktop notification should appear informing you whether your tests passed or failed.

### <a href="#node-based-notifications" class="direct-link">#</a> Node-based notifications

In order to use desktop notifications with the command-line interface (CLI), you **must** first install some platform-specific prerequisite software. Instructions for doing so can be found [here](https://github.com/mochajs/mocha/wiki/Growl-Notifications).

Enable Mocha’s desktop notifications as follows:

    $ mocha --growl

### <a href="#browser-based-notifications" class="direct-link">#</a> Browser-based notifications

Web notification support is being made available for current versions of modern browsers. Ensure your browser version supports both [promises](https://caniuse.com/#feat=promises) and [web notifications](https://caniuse.com/#feat=notifications). As the Notification API evolved over time, **do not expect** the minimum possible browser version to necessarily work.

Enable Mocha’s web notifications with a slight modification to your client-side mocha HTML. Add a call to `mocha.growl()` prior to running your tests as shown below:

    <!DOCTYPE html>
    <html lang="en">
      <head>
        <meta charset="utf-8" />
        <title>Mocha Tests</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="https://unpkg.com/mocha/mocha.css" />
      </head>
      <body>
        <div id="mocha"></div>

        <script src="https://unpkg.com/chai/chai.js"></script>
        <script src="https://unpkg.com/mocha/mocha.js"></script>

        <script class="mocha-init">
          mocha.setup('bdd');
          mocha.growl(); // <-- Enables web notifications
        </script>
        <script src="test.spec.js"></script>
        <script class="mocha-exec">
          mocha.run();
        </script>
      </body>
    </html>

<a href="#configuring-mocha-nodejs" class="direct-link">#</a> Configuring Mocha (Node.js)
-----------------------------------------------------------------------------------------

> *New in v6.0.0*

Mocha supports configuration files, typical of modern command-line tools, in several formats:

-   **JavaScript**: Create a `.mocharc.js` (or `.mocharc.cjs` when using [`"type"="module"`](#nodejs-native-esm-support) in your `package.json`) in your project’s root directory, and export an object (`module.exports = {/* ... */}`) containing your configuration.
-   **YAML**: Create a `.mocharc.yaml` (or `.mocharc.yml`) in your project’s root directory.
-   **JSON**: Create a `.mocharc.json` (or `.mocharc.jsonc`) in your project’s root directory. Comments — while not valid JSON — are allowed in this file, and will be ignored by Mocha.
-   **package.json**: Create a `mocha` property in your project’s `package.json`.

### <a href="#custom-locations" class="direct-link">#</a> Custom Locations

You can specify a custom location for your configuration file with the `--config <path>` option. Mocha will use the file’s extension to determine how to parse the file, and will assume JSON if unknown.

You can specify a custom `package.json` location as well, using the `--package <path>` option.

### <a href="#ignoring-config-files" class="direct-link">#</a> Ignoring Config Files

To skip looking for config files, use `--no-config`. Likewise, use `--no-package` to stop Mocha from looking for configuration in a `package.json`.

### <a href="#priorities" class="direct-link">#</a> Priorities

If no custom path was given, and if there are multiple configuration files in the same directory, Mocha will search for — and use — only one. The priority is:

1.  `.mocharc.js`
2.  `.mocharc.yaml`
3.  `.mocharc.yml`
4.  `.mocharc.jsonc`
5.  `.mocharc.json`

### <a href="#merging" class="direct-link">#</a> Merging

Mocha will also *merge* any options found in `package.json` into its run-time configuration. In case of conflict, the priority is:

1.  Arguments specified on command-line
2.  Configuration file (`.mocharc.js`, `.mocharc.yml`, etc.)
3.  `mocha` property of `package.json`

Options which can safely be repeated (e.g., `--require`) will be *concatenated*, with higher-priorty configuration sources appearing earlier in the list. For example, a `.mocharc.json` containing `"require": "bar"`, coupled with execution of `mocha --require foo`, would cause Mocha to require `foo`, then `bar`, in that order.

### <a href="#extending-configuration" class="direct-link">#</a> Extending Configuration

Configurations can inherit from other modules using the `extends` keyword. See [here](http://yargs.js.org/docs/#api-configobject-extends-keyword) for more information.

### <a href="#configuration-format" class="direct-link">#</a> Configuration Format

-   Any “boolean” flag (which doesn’t require a parameter, such as `--bail`), can be specified using a boolean value, e.g.: `"bail": true`.
-   Any “array”-type option (see `mocha --help` for a list) can be a single string value.
-   For options containing a dash (`-`), the option name can be specified using camelCase.
-   Aliases are valid names, e.g., `R` instead of `reporter`.
-   Test files can be specified using `spec`, e.g., `"spec": "test/**/*.spec.js"`.
-   Flags to `node` are *also* supported in configuration files. Use caution, as these can vary between versions of Node.js!

**For more configuration examples, see the [`example/config`](https://github.com/mochajs/mocha/tree/master/example/config) directory on GitHub.**

<a href="#the-test-directory" class="direct-link">#</a> The `test/` Directory
-----------------------------------------------------------------------------

By default, `mocha` looks for the glob `"./test/*.{js,cjs,mjs}"`, so you may want to put your tests in `test/` folder. If you want to include subdirectories, pass the `--recursive` option.

To configure where `mocha` looks for tests, you may pass your own glob:

    $ mocha --recursive "./spec/*.js"

Some shells support recursive matching by using the globstar (`**`) wildcard. Bash &gt;= 4.3 supports this with the [`globstar` option](https://www.gnu.org/software/bash/manual/html_node/The-Shopt-Builtin.html) which [must be enabled](https://github.com/mochajs/mocha/pull/3348#issuecomment-383937247) to get the same results as passing the `--recursive` option ([ZSH](http://zsh.sourceforge.net/Doc/Release/Expansion.html#Recursive-Globbing) and [Fish](https://fishshell.com/docs/current/#expand-wildcard) support this by default). With recursive matching enabled, the following is the same as passing `--recursive`:

    $ mocha "./spec/**/*.js"

[You should *always* quote your globs in npm scripts](https://medium.com/@jakubsynowiec/you-should-always-quote-your-globs-in-npm-scripts-621887a2a784). If you use double quotes, it’s the shell on UNIX that will expand the glob. On the other hand, if you use single quotes, the [`node-glob`](https://www.npmjs.com/package/glob) module will handle its expansion.

See this [tutorial](https://gist.github.com/reggi/475793ea1846affbcfe8) on using globs.

*Note*: Double quotes around the glob are recommended for portability.

<a href="#error-codes" class="direct-link">#</a> Error Codes
------------------------------------------------------------

> *New in v6.0.0*

When Mocha itself throws exception, the associated `Error` will have a `code` property. Where applicable, consumers should check the `code` property instead of string-matching against the `message` property. The following table describes these error codes:

<table><thead><tr class="header"><th>Code</th><th>Description</th></tr></thead><tbody><tr class="odd"><td><code>ERR_MOCHA_INVALID_ARG_TYPE</code></td><td>wrong type was passed for a given argument</td></tr><tr class="even"><td><code>ERR_MOCHA_INVALID_ARG_VALUE</code></td><td>invalid or unsupported value was passed for a given argument</td></tr><tr class="odd"><td><code>ERR_MOCHA_INVALID_EXCEPTION</code></td><td>a falsy or otherwise underspecified exception was thrown</td></tr><tr class="even"><td><code>ERR_MOCHA_INVALID_INTERFACE</code></td><td>interface specified in options not found</td></tr><tr class="odd"><td><code>ERR_MOCHA_INVALID_REPORTER</code></td><td>reporter specified in options not found</td></tr><tr class="even"><td><code>ERR_MOCHA_NO_FILES_MATCH_PATTERN</code></td><td>test file(s) could not be found</td></tr><tr class="odd"><td><code>ERR_MOCHA_UNSUPPORTED</code></td><td>requested behavior, option, or parameter is unsupported</td></tr></tbody></table>

<a href="#editor-plugins" class="direct-link">#</a> Editor Plugins
------------------------------------------------------------------

The following editor-related packages are available:

### <a href="#textmate" class="direct-link">#</a> TextMate

The [Mocha TextMate bundle](https://github.com/mochajs/mocha.tmbundle) includes snippets to make writing tests quicker and more enjoyable.

### <a href="#jetbrains" class="direct-link">#</a> JetBrains

[JetBrains](https://www.jetbrains.com/) provides a [NodeJS plugin](https://www.jetbrains.com/idea/features/nodejs.html) for its suite of IDEs (IntelliJ IDEA, WebStorm, etc.), which contains a Mocha test runner, among other things.

<img src="https://mochajs.org/static/jetbrains-plugin.resize920,9999-withoutEnlargement-pngquant.eaf0a5f39e.png?ncolors=" alt="JetBrains Mocha Runner Plugin in Action" class="screenshot" />

The plugin is titled **NodeJS**, and can be installed via **Preferences** &gt; **Plugins**, assuming your license allows it.

### <a href="#wallabyjs" class="direct-link">#</a> Wallaby.js

[Wallaby.js](https://wallabyjs.com/) is a continuous testing tool that enables real-time code coverage for Mocha with any assertion library in VS Code, Atom, JetBrains IDEs (IntelliJ IDEA, WebStorm, etc.), Sublime Text and Visual Studio for both browser and node.js projects.

<img src="https://mochajs.org/static/wallaby.resize920,9999-withoutEnlargement-pngquant.6d5ba62803.png?ncolors=" alt="Wallaby.js in Action" class="screenshot" />

### <a href="#emacs" class="direct-link">#</a> Emacs

[Emacs](https://www.gnu.org/software/emacs/) support for running Mocha tests is available via a 3rd party package [mocha.el](https://github.com/scottaj/mocha.el). The package is available on MELPA, and can be installed via `M-x package-install mocha`.

<img src="https://mochajs.org/static/emacs.resize920,9999-withoutEnlargement-pngquant.bf59ba2694.png?ncolors=" alt="Emacs Mocha Runner in Action" class="screenshot" />

### <a href="#mocha-sidebar-vs-code" class="direct-link">#</a> Mocha Sidebar (VS Code)

[Mocha sidebar](https://marketplace.visualstudio.com/items?itemName=maty.vscode-mocha-sidebar) is the most complete mocha extension for vs code.

#### <a href="#features-2" class="direct-link">#</a> Features

-   see all tests in VS Code sidebar menu
-   run & debug tests for each level hierarchy from all tests to a single test (and each suite)
-   auto run tests on file save
-   see tests results directly in the code editor

<img src="https://mochajs.org/static/mocha_side_bar.resize920,9999-withoutEnlargement-pngquant.8f90ce1d2b.png?ncolors=" alt="mocha side bar in Action" class="screenshot" />

<a href="#examples" class="direct-link">#</a> Examples
------------------------------------------------------

Real live example code:

-   [Mocha examples](https://github.com/mochajs/mocha-examples)
-   [Express](https://github.com/visionmedia/express/tree/master/test)
-   [Connect](https://github.com/senchalabs/connect/tree/master/test)
-   [SuperAgent](https://github.com/visionmedia/superagent/tree/master/test/node)
-   [WebSocket.io](https://github.com/LearnBoost/websocket.io/tree/master/test)
-   [Mocha tests](https://github.com/mochajs/mocha/tree/master/test)

<a href="#testing-mocha" class="direct-link">#</a> Testing Mocha
----------------------------------------------------------------

To run Mocha’s tests, you will need GNU Make or compatible; Cygwin should work.

    $ cd /path/to/mocha
    $ npm install
    $ npm test

<a href="#more-information" class="direct-link">#</a> More Information
----------------------------------------------------------------------

In addition to chatting with us on [Gitter](https://gitter.im/mochajs/mocha), for additional information such as using spies, mocking, and shared behaviours be sure to check out the [Mocha Wiki](https://github.com/mochajs/mocha/wiki) on GitHub. For discussions join the [Google Group](https://groups.google.com/group/mochajs). For a running example of Mocha, view [example/tests.html](https://mochajs.org/example/tests.html). For the JavaScript API, view the [API documentation](https://mochajs.org/api/) or the [source](https://github.com/mochajs/mocha/blob/master/lib/mocha.js).

[![Matomo logo](https://mochajs.org/static/matomo-logo.trim.fe5d9e166f.png)](https://matomo.org/ "Mocha is sponsored by Matomo") [<embed src="data:image/svg+xml,%3Csvg%20version%3D%221.1%22%20id%3D%22ARTWORK%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20x%3D%220%22%20y%3D%220%22%20viewBox%3D%220%200%201000%20314.4%22%20xml%3Aspace%3D%22preserve%22%3E%3Cstyle%3E.st1%7Bfill%3A%2354565a%7D%3C%2Fstyle%3E%3ClinearGradient%20id%3D%22SVGID_1_%22%20gradientUnits%3D%22userSpaceOnUse%22%20x1%3D%2228.7654%22%20y1%3D%2249.8307%22%20x2%3D%22243.506%22%20y2%3D%22264.5713%22%3E%3Cstop%20offset%3D%22.2145%22%20stop-color%3D%22%230075c9%22%2F%3E%3Cstop%20offset%3D%22.7067%22%20stop-color%3D%22%2380bc00%22%2F%3E%3Cstop%20offset%3D%221%22%20stop-color%3D%22%23fde021%22%2F%3E%3C%2FlinearGradient%3E%3Cpath%20d%3D%22M271.4%2078.1L137%20.5l-.9-.5-.9.5L1.6%2077.7l-.7.4-.9.5v157.2l.9.5%20134.4%2077.6.9.5.9-.5%20132.6-76.5%201.8-1%20.9-.5V78.6l-1-.5zm-148.7-58L89.8%2077H24.1l98.6-56.9zM84.4%2086.4L69%20113.1%2022.8%2086.4h61.6zm-12%2039.4l54.3%2031.4-54.3%2031.4-18.1-31.4%2018.1-31.4zm-8-4.6L49%20147.9%2018.1%2094.5l46.3%2026.7zm-53.7-20.9l32.9%2056.9-32.9%2056.9V100.3zm38.2%2066.3l15.4%2026.7L18.1%20220l30.8-53.4zM69%20201.3L84.4%20228H22.8L69%20201.3zm-44.9%2036.1h65.7l32.9%2056.9-98.6-56.9zm107.4%2053.4l-30.8-53.4h30.8v53.4zm0-62.8H95.2l-18.1-31.4%2054.3-31.4V228zm0-78.9l-54.3-31.4%2018.1-31.4h36.2v62.8zm0-72.1h-30.8l30.8-53.4V77zm76.4%2044.2l46.2-26.7-30.8%2053.4-15.4-26.7zm10%2036l-18.1%2031.4-54.3-31.4%2054.3-31.4%2018.1%2031.4zm-14.7-44.1l-15.4-26.7h61.6l-46.2%2026.7zM248.1%2077h-65.7l-32.8-56.9L248.1%2077zM140.8%2023.6L171.6%2077h-30.8V23.6zm0%2062.8H177l18.1%2031.4-54.3%2031.4V86.4zm0%2078.9l54.3%2031.4L177%20228h-36.2v-62.7zm0%2072.1h30.8l-30.8%2053.4v-53.4zm8.8%2056.9l32.8-56.9h65.7l-98.5%2056.9zm38.2-66.3l15.4-26.7%2046.2%2026.7h-61.6zm20.1-34.8l15.4-26.7%2030.8%2053.4-46.2-26.7zm53.7%2020.9l-32.9-56.9%2032.9-56.9v113.8z%22%20fill%3D%22url(%23SVGID_1_)%22%2F%3E%3Cpath%20class%3D%22st1%22%20d%3D%22M308.4%20202.7h64.2v5.8H315V257h52.2v6H315v49.9h-6.6zM383.8%20279.7c0-19%2015.2-34.4%2034.5-34.4s34.2%2015.4%2034.2%2034.4-14.9%2034.5-34.2%2034.5c-19.3%200-34.5-15.5-34.5-34.5m62.2%200c0-16.4-11.2-28.7-27.7-28.7s-28%2012.3-28%2028.7%2011.5%2028.9%2028%2028.9%2027.7-12.5%2027.7-28.9M469.9%20288.5v-41.7h6.3v40.7c0%2013.5%206.3%2021.1%2019%2021.1%2014.3%200%2024.3-9.6%2024.3-24.8v-37h6.3V313h-6.3l.2-14.6c-4.4%209.9-13.5%2016-25.1%2016-14.8%200-24.7-9.7-24.7-25.9M543%20246.8h6.3l-.2%2014.8c4.4-10%2013.6-16.2%2025.3-16.2%2014.8%200%2024.6%209.9%2024.6%2026.3V313h-6.3v-40.2c0-13.6-6.3-21.6-19.1-21.6-14.3%200-24.3%209.4-24.3%2024.8v37H543v-66.2zM616.3%20279.7c0-19.5%2013.8-34.4%2032.8-34.4%2013.5%200%2023.2%207.3%2028%2017.2v-66.6h6.3V313h-6.3l.3-16.5c-4.7%2010.2-15.6%2017.8-28.4%2017.8-18.9-.1-32.7-15.1-32.7-34.6m61.3%200c0-16.4-11-28.7-27.7-28.7-16.4%200-26.9%2012.3-26.9%2028.7s10.5%2028.9%2026.9%2028.9c16.7%200%2027.7-12.5%2027.7-28.9M748%20271.4c0-14.9-6.8-20.6-17.7-20.6-10.1%200-16.9%204.2-21.6%2011.4l-4.5-3.2c5.5-8.6%2014.9-13.6%2026.3-13.6%2013.6%200%2023.8%208.3%2023.8%2025.5v42.2H748l.3-10.2c-4.2%206.3-11.5%2011.5-22.9%2011.5-15.1%200-25-7-25-20.3%200-13.1%2011.5-19.3%2024.2-19.3H748v-3.4zm-22.6%208.5c-10.1%200-18.6%203.9-18.6%2013.9%200%2010.1%206.6%2014.8%2019.3%2014.8%2011%200%2021.9-6.5%2021.9-16.7v-12h-22.6zM782.5%20295.4v-43.3h-10.4v-5.4h10.4v-23.2h6.3v23.2h19.1v5.4h-19.1v43.1c0%209.7%203.4%2013.3%208.9%2013.3%205.8%200%208.1-2.3%2010.5-4.9l4.1%203.9c-3.2%203.7-7.1%206.6-14.6%206.6-8.4.1-15.2-5.2-15.2-18.7M829.5%20218.2c0-3.1%202.6-5.4%205.4-5.4%202.8%200%205.4%202.3%205.4%205.4%200%203.2-2.6%205.3-5.4%205.3-2.8.1-5.4-2-5.4-5.3m2.3%2028.6h6.3V313h-6.3v-66.2zM857.1%20279.7c0-19%2015.2-34.4%2034.5-34.4s34.2%2015.4%2034.2%2034.4-14.9%2034.5-34.2%2034.5c-19.2%200-34.5-15.5-34.5-34.5m62.3%200c0-16.4-11.2-28.7-27.7-28.7s-28%2012.3-28%2028.7%2011.5%2028.9%2028%2028.9%2027.7-12.5%2027.7-28.9M943.9%20246.8h6.3l-.2%2014.8c4.4-10%2013.6-16.2%2025.3-16.2%2014.8%200%2024.6%209.9%2024.6%2026.3V313h-6.3v-40.2c0-13.6-6.3-21.6-19.1-21.6-14.3%200-24.3%209.4-24.3%2024.8v37h-6.3v-66.2zM308.4%2073.1c0-41.4%2031.8-71.3%2071.7-71.3%2039.6%200%2071.5%2029.8%2071.5%2071.3%200%2041.4-31.9%2071.3-71.5%2071.3-39.9-.1-71.7-29.9-71.7-71.3m121%200c0-29.6-20.4-51.9-49.4-51.9s-49.6%2022.3-49.6%2051.9c0%2029.6%2020.6%2051.9%2049.6%2051.9%2029-.1%2049.4-22.3%2049.4-51.9M473.9%2056.8h20.8l-.6%2015.9c5.5-10.6%2015.7-17.8%2030.4-17.8%2022%200%2039.8%2018.6%2039.8%2044.5s-18%2044.9-40.2%2044.9c-14.3%200-24.5-6.9-29.4-16.5v58h-20.8v-129zm69.2%2042.6c0-15.5-9.4-26.1-24.3-26.1-15.1%200-24.9%2010.6-24.9%2026.1%200%2016.1%209.8%2026.7%2024.9%2026.7%2015%20.1%2024.3-10.5%2024.3-26.7M635%20127c11.2%200%2019.4-4.5%2024.3-9.2l12%2012.7c-8%208-19%2013.9-36.1%2013.9-29.4%200-48.4-19-48.4-44.7%200-25.5%2020-44.7%2045.7-44.7%2029.2%200%2045.7%2021.6%2044.3%2051.7h-69C610.3%20119%20619.3%20127%20635%20127m21.1-34.7c-1.8-11.6-9-20.2-23.3-20.2-13.3%200-22.5%207.3-24.9%2020.2h48.2zM699.7%2056.8h20.6l-.4%2015.9c5.3-11.2%2016.1-17.8%2029-17.8%2019%200%2032.1%2013.5%2032.1%2036.7v50.8h-20.6V93.3c0-12.3-5.7-19.4-17.8-19.4-13.5%200-22.3%208.2-22.3%2022v46.5h-20.6V56.8zM803.5%20120.9l17.6-10.8c4.9%208.8%2010.6%2014.9%2020.8%2014.9%2011.6%200%2019.2-5.5%2019.2-21.6V3.7h21.6v100c0%2027.6-16.5%2040.6-39.8%2040.6-20.6%200-32.8-10.6-39.4-23.4M904.9%20115.6l17.8-9.8c6.5%2010.8%2014.9%2019.4%2031.8%2019.4%2014.1%200%2024.1-7.6%2024.1-19%200-12-8.2-17.4-23.3-24.1l-9.2-4.1c-20.2-9-32.5-19.2-32.5-40.6%200-20.6%2015.9-35.3%2039-35.3C971%202%20983.5%209%20991.8%2023.9l-16.9%2010.4c-5.3-9.2-11.4-13.5-22.3-13.5-11%200-18%206.7-18%2016.1%200%2010.4%205.9%2015.1%2020%2021.2l9%204.1c23.7%2010.4%2036.3%2021.4%2036.3%2043.7%200%2024.3-19%2038.4-45.1%2038.4-26.3%200-42.2-13-49.9-28.7%22%2F%3E%3C%2Fsvg%3E" width="300" height="94" />](https://openjsf.org/ "Mocha is an OpenJS Foundation Project") [](https://wallabyjs.com/ "Mocha is sponsored by Wallaby")

![Wallaby](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgAQMAAACxAfVuAAAABlBMVEVHcExfsFB3ZBKQAAAAAXRSTlMAQObYZgAAACZJREFUSMftyKEBAAAIA6D9/7S2JbMJIklNRUoppXzOOUgppZTPuTULVyh+G8tFAAAAAElFTkSuQmCC)

[mochajs.org](https://mochajs.org/) is licensed under a [Creative Commons Attribution 4.0 International License](https://creativecommons.org/licenses/by/4.0/).

Copyright [OpenJS Foundation](https://openjsf.org/) and Mocha contributors. All rights reserved. The [OpenJS Foundation](https://openjsf.org/) has registered trademarks and uses trademarks. For a list of trademarks of the [OpenJS Foundation](https://openjsf.org/), please see our [Trademark Policy](https://trademark-policy.openjsf.org/) and [Trademark List](https://trademark-list.openjsf.org/). Trademarks and logos not indicated on the [list of OpenJS Foundation trademarks](https://trademark-list.openjsf.org/) are trademarks™ or registered® trademarks of their respective holders. Use of them does not imply any affiliation with or endorsement by them.

-   [The OpenJS Foundation](https://openjsf.org/)
-   [Terms of Use](https://terms-of-use.openjsf.org/)
-   [Privacy Policy](https://privacy-policy.openjsf.org/)
-   [OpenJS Foundation Bylaws](https://bylaws.openjsf.org/)
-   [Trademark Policy](https://trademark-policy.openjsf.org/)
-   [Trademark List](https://trademark-list.openjsf.org/)
-   [Cookie Policy](https://www.linuxfoundation.org/cookies/)

[![](https://www.netlify.com/img/global/badges/netlify-color-accent.svg)](https://www.netlify.com/)

Last updated  
Mon Nov 15 00:12:03 2021
